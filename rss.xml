<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Han Lee]]></title><description><![CDATA[이한의 개발 블로그]]></description><link>https://blog.hanlee.io</link><generator>RSS for Node</generator><lastBuildDate>Sat, 29 Dec 2018 18:44:42 GMT</lastBuildDate><item><title><![CDATA[Under the C: PyObject]]></title><description><![CDATA[파이썬의 모든 것은 객체다. 당연하게 들릴 수 있으나 객체 지향 언어라고 하려 모든것이 객체인건 아니다.
예를 들어 자바의 거의 모든것은 객체지만, 원시 자료형 (Primitive Type…]]></description><link>https://blog.hanlee.io/2018/under-the-c-2/</link><guid isPermaLink="false">https://blog.hanlee.io/2018/under-the-c-2/</guid><pubDate>Sat, 21 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;파이썬의 모든 것은 객체다. 당연하게 들릴 수 있으나 객체 지향 언어라고 하려 모든것이 객체인건 아니다.
예를 들어 자바의 거의 모든것은 객체지만, 원시 자료형 (Primitive Type)은 아니다.
그러나 파이썬은 숫자도 객체다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__add__&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 점을 두개 붙어야 호출 가능하다&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;45.0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이와 같은 이유로 객체를 알아보는건 파이썬 내부를 알아보는데 좋은 출발점이다.&lt;/p&gt;
&lt;h1&gt;PyObject&lt;/h1&gt;
&lt;p&gt;파이썬의 객체는 &lt;code class=&quot;language-text&quot;&gt;PyObject&lt;/code&gt;로 이뤄져 있다.
&lt;code class=&quot;language-text&quot;&gt;PyObject&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;Include&lt;/code&gt; 폴더의 &lt;code class=&quot;language-text&quot;&gt;object.h&lt;/code&gt;에 다음과 같이
&lt;a href=&quot;https://github.com/python/cpython/blob/f320be7/Include/object.h#L106&quot;&gt;정의&lt;/a&gt;
되어 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; _object &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    _PyObject_HEAD_EXTRA
    Py_ssize_t ob_refcnt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; _typeobject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ob_type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; PyObject&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이중 &lt;code class=&quot;language-text&quot;&gt;_PyObject_HEAD_EXTRA&lt;/code&gt;매크로는 디버깅에만 사용되므로 무시하자.
따라서 &lt;code class=&quot;language-text&quot;&gt;PyObject&lt;/code&gt;는 다음의 구조체다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; _object &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Py_ssize_t ob_refcnt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; _typeobject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ob_type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; PyObject&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;_typeobject&lt;/code&gt;는 외부에는 &lt;code class=&quot;language-text&quot;&gt;PyTypeObject&lt;/code&gt;라는 이름으로 사용된다.
이름처럼 객체에 관한 정보가 기록 된다. &lt;code class=&quot;language-text&quot;&gt;PyTypeObject&lt;/code&gt;의 자세한 소스코드는 &lt;a href=&quot;https://github.com/python/cpython/blob/f320be7/Include/object.h#L346&quot;&gt;GitHub&lt;/a&gt;을 참고하라.
예를 들어 파이썬 객체의 &lt;code class=&quot;language-text&quot;&gt;__doc__&lt;/code&gt;정보는 &lt;code class=&quot;language-text&quot;&gt;PyTypeObject&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;tp_doc&lt;/code&gt;필드에 저장된다.&lt;/p&gt;
&lt;p&gt;따라서 필요하다면 C언어로 &lt;code class=&quot;language-text&quot;&gt;PyTypeObject&lt;/code&gt;를 상속받아 새로운 객체를 만들 수도 있다.
&lt;code class=&quot;language-text&quot;&gt;PyTypeObject&lt;/code&gt;의 내용은 다음에 다루기로 하고, 지금은 다른 필드 &lt;code class=&quot;language-text&quot;&gt;ob_refcnt&lt;/code&gt;를 알아보자.
변수명에서 눈치 챘겠지만, 레퍼런스 카운팅(이하 RC)을 위한 필드다.&lt;/p&gt;
&lt;h1&gt;Reference Counting&lt;/h1&gt;
&lt;p&gt;파이썬의 주 메모리 관리는 RC로 이뤄진다.
RC는 객체가 얼마나 사용되는지 레퍼런스 카운트에 기록한다.
객체가 사용되는 만큼 레퍼런스 카운트를 1씩 증가/감소하며, 레퍼런스 카운트가 0이 되면 메모리에서 해제한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Foo(&quot;{}&quot;)가 메모리에서 제거 되었습니다&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)가 새로 생성 되었으므로 레퍼런스 카운트는 1이 된다&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# B도 a를 참조 있으므로 Foo의 레퍼런스 카운트는 2가 된다&lt;/span&gt;

b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# B가 더이상 Foo(&quot;a&quot;)를 사용하지 않으므로 Foo(&quot;a&quot;)의 레퍼런스 카운트는 1 줄어 들어 1 이 된다&lt;/span&gt;
a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a도 더이상 Foo(&quot;a&quot;)를 사용하지 않으므로 Foo(&quot;a&quot;)의 레퍼런스 카운트는 1 줄어 0이 되어, 해재하며 소멸자를 호출한다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파이썬에서 &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt;는 생성자, &lt;code class=&quot;language-text&quot;&gt;__del__&lt;/code&gt;은 소멸자이다.
위 코드를  &lt;strong&gt;인터프리터 모드&lt;/strong&gt;에서 실행하면 &lt;code class=&quot;language-text&quot;&gt;a = None&lt;/code&gt;을 실행한 직후 &lt;code class=&quot;language-text&quot;&gt;Foo(&amp;quot;a&amp;quot;)가 메모리에서 제거 되었습니다&lt;/code&gt;라는 메시지를 볼 수 있을 것이다.
이처럼 RC를 사용하면 메모리가 필요 없어진 순간 제거 된다.&lt;/p&gt;
&lt;p&gt;파이썬 내부에선 Reference Count 관리를 위해 &lt;code class=&quot;language-text&quot;&gt;Py_INCREF&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Py_DECREF&lt;/code&gt;를 사용한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; Py_INCREF(op) (                         \
    _Py_INC_REFTOTAL  _Py_REF_DEBUG_COMMA       \
    ((PyObject *)(op))-&gt;ob_refcnt++)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; Py_DECREF(op)                                   \
    do {                                                \
        PyObject *_py_decref_tmp = (PyObject *)(op);    \
        if (_Py_DEC_REFTOTAL  _Py_REF_DEBUG_COMMA       \
        --(_py_decref_tmp)-&gt;ob_refcnt != 0)             \
            _Py_CHECK_REFCNT(_py_decref_tmp)            \
        else                                            \
            _Py_Dealloc(_py_decref_tmp);                \
    } while (0)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;_Py_DEC_REFTOTAL&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;_Py_REF_DEBUG_COMMA&lt;/code&gt; 처럼 디버그에서 사용하는 내용을 지우면,
&lt;code class=&quot;language-text&quot;&gt;Py_INCREF&lt;/code&gt;는 다음과 같으며,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;ob_refcnt&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Py_DECREF&lt;/code&gt;는 다음과 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;_py_decref_tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;ob_refcnt &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;_Py_Dealloc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;RC를 사용하면 프로그래머가 큰 신경을 쓰지 않아도, 필요 없다고 판단된 메모리는 그 즉시 해제할 수 있다.
개인적으로 RC는 &lt;em&gt;비용있는&lt;/em&gt; 추상화 방식 중에서는 가장 우아한 방식이라고 생각한다.
아래의 문제점들만 없다면 말이다.&lt;/p&gt;
&lt;h1&gt;문제&lt;/h1&gt;
&lt;p&gt;메모리관리에 대해 알아본 프로그래머라면 알겠지만, 아쉽게도 RC는 만병통치약이 아니다.&lt;/p&gt;
&lt;h2&gt;오버헤드&lt;/h2&gt;
&lt;p&gt;첫번째로 오버헤드를 이야기 할 수 있다.
우선 &lt;code class=&quot;language-text&quot;&gt;PyObject&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;ob_refcnt&lt;/code&gt; 처럼 레퍼런스 카운트를 저장할 공간이 추가적으로 필요하고,
변수를 할당할때도 추가적으로 레퍼런스 카운트를 관리해야 한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.sn0wle0pard.io/2018/under-the-c-1/&quot;&gt;저번 글&lt;/a&gt;에 나온 내용을 다시 살펴보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파이썬 인터프리터에게 위 코드는 다음의 C 코드와 비슷하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;T &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Py_True&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_INCREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PyObject_RichCompareBool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Py_NE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;변수 &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;True&lt;/code&gt;를 비교하기 위해 임시 변수 &lt;code class=&quot;language-text&quot;&gt;T&lt;/code&gt;를 만들었고, T는 &lt;code class=&quot;language-text&quot;&gt;Py_True&lt;/code&gt;값을 참조 한다.
아쉽게도 단순히 참조에서 끝나는게 아니라 필요에 따라 &lt;code class=&quot;language-text&quot;&gt;Py_INCREF&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Py_DECREF&lt;/code&gt;가 호출 된다.&lt;/p&gt;
&lt;p&gt;오버헤드는 메모리 관리에 드는 수고를 생각하면 넘어갈 수 있을 수도 있다.
그러나 아쉽게도 해제할 수 없는 메모리도 있다.&lt;/p&gt;
&lt;h2&gt;순환참조&lt;/h2&gt;
&lt;p&gt;RC는 안전하지만 완전하진 않다.
모든 해제된 메모리는 필요 없는 메모리지만, 모든 필요없는 메모리가 헤제되는건 아니다.&lt;/p&gt;
&lt;p&gt;예를 들어 다음의 코드를 보자,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Foo(&quot;{}&quot;)가 메모리에서 제거 되었습니다&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)의 ref count는 1&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;b&quot;)의 ref count는 1&lt;/span&gt;

a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; b  &lt;span class=&quot;token comment&quot;&gt;# a.child가 Foo(&quot;b&quot;)를 참조하므로 Foo(&quot;b&quot;)의 레퍼런스 카운트는 1 증가하여 2가 된다&lt;/span&gt;
b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# b.child가 Foo(&quot;a&quot;)를 참조하므로 Foo(&quot;a&quot;)의 레퍼런스 카운트는 1 증가하여 2가 된다&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a가 더이상 Foo(&quot;a&quot;)를 참조하지 않으므로 레퍼런스 카운트는 1 감소해서 1 이다&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b가 더이상 Foo(&quot;b&quot;)를 참조하지 않으므로 레퍼런스 카운트는 1 감소해서 1 이다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)와 Foo(&quot;b&quot;)모두 접근할 수 없지만, 레퍼런스 카운트가 남아 있으므로 해재되지 않는다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드를  &lt;strong&gt;인터프리터 모드&lt;/strong&gt;에서 실행하면 &lt;code class=&quot;language-text&quot;&gt;a = 0&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;b = 0&lt;/code&gt;이 되면 더이상 &lt;code class=&quot;language-text&quot;&gt;Foo(&amp;quot;a&amp;quot;)&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Foo(&amp;quot;b&amp;quot;)&lt;/code&gt;에 접근 할 수 없다.
그러나 &lt;code class=&quot;language-text&quot;&gt;a.child&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;b.child&lt;/code&gt;의 참조때문에 올라간 레퍼런스 카운트가 존재해 a와 b가 더이상 child에 접근 못 하더라도 해제가 불가능 하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Foo(&quot;{}&quot;)가 메모리에서 제거 되었습니다&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)의 ref count는 1&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# a.child가 Foo(&quot;a&quot;)를 참조하므로 Foo(&quot;a&quot;)의 레퍼런스 카운트는 1 증가하여 2가 된다&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a가 더이상 Foo(&quot;a&quot;)를 참조하지 않으므로 레퍼런스 카운트는 1 감소해서 1 이다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)에 접근할 수 없지만, 레퍼런스 카운트가 남아 있으므로 해재되지 않는다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또 하나, 위처럼 자기 자신을 참조하는 경우도 마찬가지로 해재할 수 없다.
이 처럼 서로 참조하는 경우를 &lt;strong&gt;순환참조&lt;/strong&gt;라고 하며, 레퍼런스 카운트로는 해결하기 까다롭다.&lt;/p&gt;
&lt;p&gt;좀 더 쉬운 예를 하나 보면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
x&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파이썬의 경우 위의 코드는 자기자신을 참조한다.&lt;/p&gt;
&lt;h1&gt;GC&lt;/h1&gt;
&lt;p&gt;이러한 이유로 파이썬은 RC만을 사용하지 않고, 추가적으로 GC도 사용한다.
엄밀하게 말하면 RC도 GC의 일부지만 이 글에선 RC가 아닌 GC를 말하기로 하자.
파이썬의 GC는 &lt;code class=&quot;language-text&quot;&gt;gcmodule.c&lt;/code&gt;에 &lt;a href=&quot;https://github.com/python/cpython/blob/master/Modules/gcmodule.c&quot;&gt;정의&lt;/a&gt; 되어 있으며,
자세한 내용은 추후에 다루도록 하겠다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Foo(&quot;{}&quot;)가 메모리에서 제거 되었습니다&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 1&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 1&lt;/span&gt;

b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 2&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; b  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 2&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 1 감소해서 1 이다 (b.child에 참조가 남아있다)&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 1 감소해서 1 이다 (a.child에 참조가 남아있다)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; gc
gc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;collect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# GC를 직접 호출해보자 (원래는 필요한 경우 자동으로 호출 된다)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드를 실행하면 &lt;code class=&quot;language-text&quot;&gt;gc.collect()&lt;/code&gt;가 더이상 접근할 수 없는 객체를 해재하는 것을 볼 수 있다.
특별한 설정을 하지 않는다면 파이썬은 자동으로 필요할때 gc를 호출해 RC로 해재할 수 없는 객체를 해제해 준다.&lt;/p&gt;
&lt;p&gt;GC도 사용하므로 파이썬의 메모리 관리는 아쉽게도 RC하나만 사용하는 것에 비해 추가적인 비용이 든다.&lt;/p&gt;
&lt;p&gt;다행인 점은 파이썬의 GC는 순환참조를 만들 가능성이 있는 컨테이너 객체를 대상으로 사용되어 모든 객체를 검사하진 않는다.&lt;/p&gt;
&lt;p&gt;실제로, GC는 파이썬 2.0 버전부터 도입 되었으며 &lt;a href=&quot;http://www.arctrix.com/nas/python/gc/&quot;&gt;당시 자료&lt;/a&gt;를 보면 이전 버전에 비해 약 4%의 성능 저하의 원인으로 생각한다고 한다.&lt;/p&gt;
&lt;p&gt;이런 이유로 성능에 여유가 없거나, 순환참조를 피할 자신이 있다면 &lt;code class=&quot;language-text&quot;&gt;gc.disable()&lt;/code&gt;로 GC를 꺼도 된다.
대표적으로 &lt;a href=&quot;https://instagram-engineering.com/dismissing-python-garbage-collection-at-instagram-4dca40b29172&quot;&gt;인스타그램&lt;/a&gt;은 GC를 사용하지 않는다고 한다.&lt;/p&gt;
&lt;h2&gt;덤: 약한참조&lt;/h2&gt;
&lt;p&gt;다른 RC를 사용하는 언어를 사용한 분들은 들어본적이 있겠지만,
순환참조로 인한 메모리 누수를 피하는 또다른 방법은 &lt;strong&gt;약한참조&lt;/strong&gt;가 있다.&lt;/p&gt;
&lt;p&gt;쉽게 설명하면 참조는 하되, 레퍼런스 카운트는 올리지 않는 것이다.
파이썬은 &lt;code class=&quot;language-text&quot;&gt;weakref&lt;/code&gt;모듈을 통해 약한 참조를 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Foo(&quot;{}&quot;)가 메모리에서 제거 되었습니다&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 1&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 1&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; weakref

&lt;span class=&quot;token comment&quot;&gt;# weakref를 사용했으므로 레퍼런스 카운트는 변화하지 않는다&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; weakref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;b&quot;)의 레퍼런스 카운트는 여전히 1 이다&lt;/span&gt;
b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; weakref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)의 레퍼런스 카운트는 여전히 1 이다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 그러나 접근은 가능하다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# child 자체는 weakref 객체이므로 호출을 통해 가리키는 객체를 가져올수 있다&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;a&quot;)의 레퍼런스 카운트는 1 감소해서 0 이다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 소멸자가 호출된다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 더이상 접근이 불가능하므로 None이 반환된다&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&quot;b&quot;)의 레퍼런스카운트는 1 감소해서 0 이다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 소멸자가 호출된다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;weakref&lt;/code&gt;는 접근이 가능하면 해당 객체를, 해당객체가 접근 불가능 하면 &lt;code class=&quot;language-text&quot;&gt;None&lt;/code&gt;을 반환한다.&lt;/p&gt;
&lt;h1&gt;RC와 GIL&lt;/h1&gt;
&lt;p&gt;CPython은 멀티 &lt;em&gt;스레드&lt;/em&gt;를 효율적으로 사용하지 못한다.
한 파이썬 프로세스는 한번에 한 스레드만 사용하며, 이를 GIL (Global interpreter lock) 이라고 부른다.&lt;/p&gt;
&lt;p&gt;CPython에서 GIL을 제거하려는 시도는 종종 있지만, 아직까지는 GIL이 남아 있다.
그 이유중 하나가 바로 RC 때문이다.&lt;/p&gt;
&lt;p&gt;다만 GIL 자체는 선택사항이며 원한다면 RC를 쓰고도 GIL을 제거 할 수도 있다.
잠시 다른 파이썬 구현체를 보자.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jython은 GC로 관리 하며, GIL이 없다&lt;/li&gt;
&lt;li&gt;IronPython은 GC로 메모리 관리 하며, GIL이 없다&lt;/li&gt;
&lt;li&gt;PyPy는 GC로 메모리 관리를 하며, GIL이 &lt;em&gt;있다&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;PyPy가 대표적으로 GC만 사용하나, GIL이 존재한다.
그러나, PyPy는 2017년 8월 블로그글 &lt;a href=&quot;https://morepypy.blogspot.kr/2017/08/lets-remove-global-interpreter-lock.html&quot;&gt;Let&apos;s remove the Global Interpreter Lock&lt;/a&gt;를 통해 GIL을 제거할 수 있음을 알렸다.&lt;/p&gt;
&lt;p&gt;PyPy의 블로그 글에 따르면 CPython에서 GIL을 제거하기 힘든 두가지 이유는 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;how do we guard access to mutable data structures with locks and&lt;/li&gt;
&lt;li&gt;what to do with reference counting that needs to be guarded.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;멀티스레드에서 발생하는 문제중 하나는 여러 스레드가 동시에 한 변수를 수정하려는 문제이다.
멀티스레드를 사용해본 경험이 있다면 &lt;code class=&quot;language-text&quot;&gt;lock guard&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;mutex&lt;/code&gt;등을 보거나 사용해본 점이 있을 것이다.&lt;/p&gt;
&lt;p&gt;그렇다면 스레드간 공유하는 객체는 읽기만 가능하고, 수정은 못하게 한다면 되지 않을까?
좋은 접근이지만 RC를 사용하면 쉽지많은 않은 일이다.&lt;/p&gt;
&lt;p&gt;다시 위의 코드를 보자&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; sys


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;foo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;foo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

read_foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# read_foo의 매개변수 foo가 a를 참조 있으므로 Foo의 레퍼런스 카운트는 증가하였다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# read_a 함수가 끝나면 레퍼런스 카운트는 다시 줄어든다&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getrefcount&lt;/code&gt;는 객체의 레퍼런스 카운트 갯수를 구하는 함수다.
우리가 생각한 레퍼런스 카운트 횟수보다 좀 더 많을 텐데 &lt;a href=&quot;https://docs.python.org/3/library/sys.html#sys.getrefcount&quot;&gt;문서&lt;/a&gt;의 내용에 따르면, &lt;code class=&quot;language-text&quot;&gt;getrefcount&lt;/code&gt;함수를 실행하기 위해 매개변수로 참조 카운트가 증가 하여 그렇다.&lt;/p&gt;
&lt;p&gt;내용으로 돌아가면 &lt;code class=&quot;language-text&quot;&gt;read_foo&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;의 내용을 읽기만 하고 수정하진 않았지만, 매개변수등 참조가 일어 날때마나 &lt;code class=&quot;language-text&quot;&gt;obj_refcnt&lt;/code&gt;는 증/감 한다.
여러 스레드가 동시에 참조를 만든다면 동시수정과 다름 없는 상태가 된다.&lt;/p&gt;
&lt;p&gt;추가로 RC를 사용하고도 이 문제를 피할 방법 자체는 있다.
예를 들어 &lt;code class=&quot;language-text&quot;&gt;std::atomic&lt;/code&gt;이 있다(&lt;a href=&quot;http://www.cplusplus.com/reference/atomic/atomic/&quot;&gt;C++ 문서&lt;/a&gt;).
atomic은 DB의 Atomic 성질 처럼 순서대로 진행하는걸 보장하는데,
즉 두 스레드가 거의 동시에 레퍼런스 카운트를 변화 하려고 하면, 먼저 요청한 스레드의 요청대로 한 obj_refcnt를 변화시키고, 그 다음 스레드 요청을 처리한다.&lt;/p&gt;
&lt;p&gt;대표적인 예로 Rust의 &lt;code class=&quot;language-text&quot;&gt;Rc&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;ARc&lt;/code&gt;가 있다.
Rust 자체는 무비용 추상화로 메모리를 관리하지만, 원한다면 RC로 관리되는 객체를 만들 수 있다.
이 경우 싱글 스레드면 &lt;code class=&quot;language-text&quot;&gt;Rc&lt;/code&gt;를 멀티 스레드면 &lt;code class=&quot;language-text&quot;&gt;ARc&lt;/code&gt;를 사용하면 되는데, &lt;code class=&quot;language-text&quot;&gt;ARc&lt;/code&gt;는 레퍼런스 카운트가 atomic 하게 동작한다.&lt;/p&gt;
&lt;p&gt;Atomic을 보장하는 것은 추가적인 오버헤드가 있다는 이야기다.
실제로 ARc &lt;a href=&quot;https://doc.rust-lang.org/std/sync/struct.Arc.html&quot;&gt;문서&lt;/a&gt;를 보면,
원자성 보장은 일반 메모리 접근보다 비용이 많이 들고, 싱글스레드라면 비용을 줄이기 위에 &lt;code class=&quot;language-text&quot;&gt;Rc&lt;/code&gt;를 쓸 수 있다고 언급하고 있다.&lt;/p&gt;
&lt;p&gt;현재 파이썬의 대부분은 싱글 스레드 환경이며, 멀티스레드를 위해 싱글스레드 저하를 선택할 것인가는 논쟁의 여지가 있다.
현재로는 파이썬 커뮤니티는 멀티스레드 사용을 위해 싱글스레드 성능이 저하 되는 해결을 받아 들이고 싶어 하지 않는다.
&lt;a href=&quot;https://wiki.python.org/moin/GlobalInterpreterLock?action=show&amp;#x26;redirect=GIL&quot;&gt;파이썬 위키&lt;/a&gt;의 GIL 항목을 인용 하면&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The BDFL has said he will reject any proposal in this direction that slows down single-threaded programs.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;BDFL은 파이썬 창시자 귀도 반 로썸을 말한다. 위키백과의 설명을 인용한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;자비로운 종신독재자(BDFL, Benevolent Dictator for Life)란 소수의 오픈 소스 소프트웨어 개발 리더에게 부여되는 칭호이다. 주로 커뮤니티 내에서 논쟁이 있을 때 최종적으로 결론을 내려줄 수 있는, 프로젝트 창시자인 경우가 많다. 이 표현은 1995년에 파이썬의 창시자 귀도 반 로섬을 가리키는 호칭으로 처음 사용되었다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;개인적으로도 멀티스레드를 위해 싱글스레드 성능저하가 심각하다면 받아 들이고 싶지 않다.&lt;/p&gt;
&lt;p&gt;실제로 파이썬에 atomic 레퍼런스 카운트를 사용하게되면 &lt;a href=&quot;https://greek0.net/blog/2015/05/23/python_atomic_refcounting_slowdown/&quot;&gt;약 23%의 성능저하&lt;/a&gt;를 보인다고 한다.&lt;/p&gt;
&lt;p&gt;공유하는 객체만 원자성 보장을 하면 어떨까?
멀티 스레드를 사용하는 코딩을 해도 스레드간 공유될 객체가 몇 안될 것 같다고 생각한다면,
파이썬 콘솔을 켜서 다음 코드를 실행해 보길 권한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; sys
&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2296&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;글을 시작하며 언급한것 처럼 파이썬의 모든건 객체다.
단순한 값으로 생각할 수 있는 &lt;code class=&quot;language-text&quot;&gt;None&lt;/code&gt;도 하나의 객체며 여러곳에서 공유하고 있다.
왜 어려운 문제인지 짐작 할 수 있을 것이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Under the C: 소개]]></title><description><![CDATA[소개 Under the C…]]></description><link>https://blog.hanlee.io/2018/under-the-c-1/</link><guid isPermaLink="false">https://blog.hanlee.io/2018/under-the-c-1/</guid><pubDate>Wed, 11 Apr 2018 11:41:22 GMT</pubDate><content:encoded>&lt;h1&gt;소개&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Under the C 시리즈는 작년, 파이썬에 &lt;a href=&quot;https://github.com/python/cpython/pull/3085&quot;&gt;아주 작은 기여&lt;/a&gt;를 하며 공부한 내용을 정리한 글 입니다.&lt;/li&gt;
&lt;li&gt;잘못된 내용을 알려주신다면, 최대한 빨리 수정하도록 하겠습니다&lt;/li&gt;
&lt;li&gt;파이썬 구현체는 계속 발전하고 있으므로, 이 글의 내용과 다소 달라질 수 있습니다.&lt;/li&gt;
&lt;li&gt;특별한 언급이 없다면, 파이썬은 공식 구현체인
&lt;a href=&quot;https://github.com/python/cpython&quot;&gt;CPython&lt;/a&gt;의 파이썬 3.x 구현을 의미합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;들어가며&lt;/h1&gt;
&lt;p&gt;파이썬은 &lt;code class=&quot;language-text&quot;&gt;인터프리터 언어&lt;/code&gt;다. 사소한 말이지만 몇가지 사실을 품고 있다.
코드를 한줄 한줄 읽고 실행을 하는 인터프리터 언어는 컴파일 언어에 비해 최적화의 여지가 적다.&lt;/p&gt;
&lt;p&gt;인터프리터 언어를 다룬다면, 같은 결과가 나오는 코드를 작성하여도,
프로그래머의 최적화, 언어의 이해도에 따라 꽤 다른 실행을 하는 코드를 작성할 수 있다.&lt;/p&gt;
&lt;p&gt;몇가지 동일한 결과를 내는 파이썬 코드를 비교해보자.&lt;/p&gt;
&lt;h1&gt;코드 최적화&lt;/h1&gt;
&lt;p&gt;다음 코드를 보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;fruits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
fruits&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;apple&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
fruits&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;strawberry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;빈 딕셔너리를 만들고 두쌍의 키-값을 할당했다. 위의 코드는 어떤 바이트 코드를 만들까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
fruits = dict()
fruits[&apos;apple&apos;] = 10
fruits[&apos;strawberry&apos;] = 20
&apos;&apos;&apos;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;string&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;exec&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드로 바이트 코드를 확인 할 수 있다. &lt;code class=&quot;language-text&quot;&gt;dis&lt;/code&gt; 모듈은 파이썬의 내장 모듈로, 바이트코드 역어셈블러 모듈이다.&lt;/p&gt;
&lt;p&gt;위 코드를 인터프리터 모드에서 실행하면 다음와 같은 결과를 볼 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  2           0 LOAD_NAME                0 (dict)
              2 CALL_FUNCTION            0
              4 STORE_NAME               1 (fruits)

  3           6 LOAD_CONST               0 (10)
              8 LOAD_NAME                1 (fruits)
             10 LOAD_CONST               1 (&amp;#39;apple&amp;#39;)
             12 STORE_SUBSCR

  4          14 LOAD_CONST               2 (20)
             16 LOAD_NAME                1 (fruits)
             18 LOAD_CONST               3 (&amp;#39;strawberry&amp;#39;)
             20 STORE_SUBSCR
             22 LOAD_CONST               4 (None)
             24 RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;딕셔너리를 만드는, 더 파이썬다운 코드는 제너릭을 이용하는 것 이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;fruits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;apple&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;strawberry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드도 같은 바이트코드를 만들까? 한번 코드의 바이트코드를 한번 확인해보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
fruits = {
    &apos;apple&apos;: 10,
    &apos;strawberry&apos;: 20,
}
&apos;&apos;&apos;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;string&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;exec&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  3           0 LOAD_CONST               0 (10)

  4           2 LOAD_CONST               1 (20)
              4 LOAD_CONST               2 ((&amp;#39;apple&amp;#39;, &amp;#39;strawberry&amp;#39;))
              6 BUILD_CONST_KEY_MAP      2
              8 STORE_NAME               0 (fruits)
             10 LOAD_CONST               3 (None)
             12 RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;같은 역할을 하지만 서로 다른 바이트코드를 생성하는 것을 확인 할 수 있다.
사실 이 예제는 파이썬 입장에선 조금 억울 하고, 최적화가 쉽지 않을 수 있다.
파이썬 인터프리터에게 첫번째 코드는 3줄의 코드이며, 두번째 코드는 한줄의 코드이기 때문이다.
(파이썬은 괄호안의 줄바꿈을 무시한다)&lt;/p&gt;
&lt;p&gt;그렇다면 한가지 예를 더 살펴 보자.
PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
&lt;a href=&quot;https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/&quot;&gt;Back to the Low Level&lt;/a&gt;
에서 코드와 내용을 가져왔다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;A &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
A = False
if A != True:
    pass
&apos;&apos;&apos;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;string&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;exec&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  2           0 LOAD_CONST               0 (False)
              2 STORE_NAME               0 (A)

  3           4 LOAD_NAME                0 (A)
              6 LOAD_CONST               1 (True)
              8 COMPARE_OP               3 (!=)
             10 POP_JUMP_IF_FALSE       12

  4     &amp;gt;&amp;gt;   12 LOAD_CONST               2 (None)
             14 RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드보다 더 파이썬 다운 코드는 아래와 같다. (조건문 실행여부를 이미 알고 있는건 넘어가자)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;A &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;not&lt;/span&gt; A&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
A = False
if not A:
    pass
&apos;&apos;&apos;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;string&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;exec&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  2           0 LOAD_CONST               0 (False)
              2 STORE_NAME               0 (A)

  3           4 LOAD_NAME                0 (A)
              6 POP_JUMP_IF_TRUE         8

  4     &amp;gt;&amp;gt;    8 LOAD_CONST               1 (None)
             10 RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드는 매우 비슷하며, 같은 역할을 하지만, 두 코드는 서로 다른 바이트코드를 만들었고, 연산 횟수도 다르다.&lt;/p&gt;
&lt;h2&gt;Under the C&lt;/h2&gt;
&lt;p&gt;위의 두 코드를 C언어레벨에서 확인하면 더 두드러진 차이를 볼 수 있다.
마찬가지로 PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
&lt;a href=&quot;https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/&quot;&gt;Back to the Low Level&lt;/a&gt;
에서 코드와 내용을 가져왔다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파이썬 인터프리터에게 위 코드는 다음의 C 코드와 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;T &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Py_True&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_INCREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PyObject_RichCompareBool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Py_NE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 이 코드는&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;not&lt;/span&gt; A&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 코드와 같다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PyObject_Not&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;왜 파이썬 다운 코드를 작성해야하는지 이해할 수 있을 것이다.&lt;/p&gt;
&lt;h2&gt;여담&lt;/h2&gt;
&lt;p&gt;파이썬다운 코드가 항상 성능 향상을 약속하진 않다, 예를 들어 &lt;code class=&quot;language-text&quot;&gt;elif&lt;/code&gt;가 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;print_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;print_2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  2           0 LOAD_FAST                0 (raw)
              2 LOAD_CONST               1 (2)
              4 COMPARE_OP               2 (==)
              6 POP_JUMP_IF_FALSE       18

  3           8 LOAD_GLOBAL              0 (print)
             10 LOAD_FAST                0 (raw)
             12 CALL_FUNCTION            1
             14 POP_TOP
             16 JUMP_FORWARD            26 (to 44)

  5     &amp;gt;&amp;gt;   18 LOAD_FAST                0 (raw)
             20 LOAD_CONST               2 (1)
             22 COMPARE_OP               2 (==)
             24 POP_JUMP_IF_FALSE       36

  6          26 LOAD_GLOBAL              0 (print)
             28 LOAD_FAST                0 (raw)
             30 CALL_FUNCTION            1
             32 POP_TOP
             34 JUMP_FORWARD             8 (to 44)

  8     &amp;gt;&amp;gt;   36 LOAD_GLOBAL              0 (print)
             38 LOAD_CONST               1 (2)
             40 CALL_FUNCTION            1
             42 POP_TOP
        &amp;gt;&amp;gt;   44 LOAD_CONST               0 (None)
             46 RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;print_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;elif&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;print_2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  2           0 LOAD_FAST                0 (raw)
              2 LOAD_CONST               1 (2)
              4 COMPARE_OP               2 (==)
              6 POP_JUMP_IF_FALSE       18

  3           8 LOAD_GLOBAL              0 (print)
             10 LOAD_FAST                0 (raw)
             12 CALL_FUNCTION            1
             14 POP_TOP
             16 JUMP_FORWARD            26 (to 44)

  4     &amp;gt;&amp;gt;   18 LOAD_FAST                0 (raw)
             20 LOAD_CONST               2 (1)
             22 COMPARE_OP               2 (==)
             24 POP_JUMP_IF_FALSE       36

  5          26 LOAD_GLOBAL              0 (print)
             28 LOAD_FAST                0 (raw)
             30 CALL_FUNCTION            1
             32 POP_TOP
             34 JUMP_FORWARD             8 (to 44)

  7     &amp;gt;&amp;gt;   36 LOAD_GLOBAL              0 (print)
             38 LOAD_CONST               1 (2)
             40 CALL_FUNCTION            1
             42 POP_TOP
        &amp;gt;&amp;gt;   44 LOAD_CONST               0 (None)
             46 RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;줄번호는 다르지만 같은 바이트코드를 생성하는 걸 볼 수 있다. &lt;code class=&quot;language-text&quot;&gt;elif&lt;/code&gt;는 그저 문법 설탕이다.&lt;/p&gt;
&lt;h1&gt;마치며&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;섣부른 최적화는 만악의 근원이다 — 도널드 커누스&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;사실 언어적 특성이 코딩에 미치는 영향보단, 프로그램의 로직이 더 중요하다고 생각한다.&lt;/p&gt;
&lt;p&gt;그러나 파이썬 인터프리터 (C언어) 아래에서 일어나는 일을 이해한다면,
분명 더 나은 프로그래머가 될 수 있을 것이고, 재미있는 특성들도 알게 될 것이다.&lt;/p&gt;
&lt;p&gt;다음에는 파이썬을 이해하는데 매우 중요한 &lt;code class=&quot;language-text&quot;&gt;PyObject&lt;/code&gt;를 다룰 예정이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[스타트업 인턴 회고: peoplefund]]></title><description><![CDATA[저에게 작년은 엄청난 한 해 였습니다. 스타수 100 이상의 오픈소스 를 만들었고 PyConKR 에서 발표를 했으며 Python 에 기여 했고 새로운 스킬 자바스크립트가 생겼습니다! 여기에 또 한가지 약 1…]]></description><link>https://blog.hanlee.io/2018/peoplefund/</link><guid isPermaLink="false">https://blog.hanlee.io/2018/peoplefund/</guid><pubDate>Fri, 23 Feb 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;저에게 작년은 엄청난 한 해 였습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sn0wle0pard/ipytracer&quot;&gt;스타수 100 이상의 오픈소스&lt;/a&gt;를 만들었고&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.pycon.kr/2017/program/135&quot;&gt;PyConKR&lt;/a&gt;에서 발표를 했으며&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/python/cpython/pull/3085&quot;&gt;Python&lt;/a&gt;에 기여 했고&lt;/li&gt;
&lt;li&gt;새로운 스킬 자바스크립트가 생겼습니다!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;여기에 또 한가지 약 10개월간 스타트업에서 인턴을 했습니다.&lt;/p&gt;
&lt;p&gt;저는 UNIST(울산과학기술원)에 다니고 있습니다.
학교를 다니며 아쉬운 점중 하나는 주변에 IT 기업이 거의 없다는 점 입니다.
게다가 저는 지리적, 개인적인 사정으로 쉽사리 방학을 이용한 인턴을 할 수 없었습니다.
몇가지 이유로 휴학을 하였고, 운좋게도 &lt;a href=&quot;https://www.peoplefund.co.kr/&quot;&gt;피플펀드&lt;/a&gt;에서 인턴을 할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;&lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/669e8161b1463ed85ba05fa532fb864f/4ece8/pf_logo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 23.878161544737555%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/UlEQVQY02MIz1gf3ZS0uGZ1yIwQBgEGxuzoasb/Gv8ZQCAwMJAFiJmAmDEgIEAEiKWh4upAbAxlg+RYQWwgbcxguuxEvO6BC/FHPafGRQVGRPgF+qcGBgSmAhWmAHEsUFE0EGcAcRqQ3wQVawXSBUBsDmQXAjFIfRSQnsCgfvhKreKeSxXP3aZHRgeGVwMNbAMaOAGooBGquAaIpwFxNhBPBIp3AnEoELuBLADJA+kgIO4BspsYlBefnHQmelHKF/eZUW5BfvahAUHC4QEhLEBJdiDmAGIFILaHeokNiLlBQQGkmYFYEIkNkhNjsJ18POm/XoeR1ZRdzAxUAAAUUWsphwdmXQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;&lt;/span&gt;
    &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;&quot;
        alt=&quot;peoplefund&quot;
        title=&quot;&quot;
        src=&quot;/static/669e8161b1463ed85ba05fa532fb864f/10273/pf_logo.png&quot;
        srcset=&quot;/static/669e8161b1463ed85ba05fa532fb864f/9b14a/pf_logo.png 163w,
/static/669e8161b1463ed85ba05fa532fb864f/94962/pf_logo.png 325w,
/static/669e8161b1463ed85ba05fa532fb864f/10273/pf_logo.png 650w,
/static/669e8161b1463ed85ba05fa532fb864f/2fc6f/pf_logo.png 975w,
/static/669e8161b1463ed85ba05fa532fb864f/a8a2c/pf_logo.png 1300w,
/static/669e8161b1463ed85ba05fa532fb864f/173d2/pf_logo.png 1950w,
/static/669e8161b1463ed85ba05fa532fb864f/4ece8/pf_logo.png 3677w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
      /&gt;
  &lt;/span&gt;
  &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;이 글은 10개월간 제가 느낀점을 기록한 것 입니다. 이 글이 다른분들께도 도움이 되었으면 좋겠습니다.
특히 저와 같은 고민을 했던 분들께 조금이나마 도움이 되었으면 좋겠습니다.&lt;/p&gt;
&lt;h1&gt;Back to the basic&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;정확하게 알고 쓰자&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;피플펀드 사무실에 붙어 있는 문구 입니다. 저는 기술을 익힐때 보통,&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;간략한 소개글을 보고 배울지 결정한다&lt;/li&gt;
&lt;li&gt;튜로리얼을 따라 간단한 토이 프로젝트를 만들어 본다&lt;/li&gt;
&lt;li&gt;GitHub에서 모범사례를 참고하며 공부한다&lt;/li&gt;
&lt;li&gt;필요할때마다 검색해 지식을 얻는다&lt;/li&gt;
&lt;li&gt;구현원리를 알아보기 위해 노력한다&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;의 과정을 거쳐 기술을 익혔습니다. 때로는 꼼꼼히 처음부터 단계를 밞았지만 일반적으로는 위와 같이 기술을 익혔습니다.&lt;/p&gt;
&lt;p&gt;기초지식 까지 알기 위해 &lt;a href=&quot;http://localhost:4000/2017/pythons-innards-introduction/&quot;&gt;노력&lt;/a&gt;&lt;a href=&quot;https://www.slideshare.net/Sn0wLe0pard/layer-model&quot;&gt;들&lt;/a&gt;도 많이 했지만, 놓치고 있던 것들도 많았습니다.
몇가지 제가 느낀 사례를 공유하겠습니다.&lt;/p&gt;
&lt;h2&gt;RDBMS&lt;/h2&gt;
&lt;p&gt;새로운 기술은 언제나 멋지고, 기존 기술 보다 좋아 보입니다. 저에겐 특히 NoSQL이 그렇게 보였고 (속도, 비정형 데이터 저장 등등),
개인 프로젝트에서는 대체제로 문제가 없어 보였습니다. 하지만 피플펀드는 &lt;em&gt;P2P&lt;/em&gt; &lt;strong&gt;금융&lt;/strong&gt;서비스 업체 이므로 DB의 정확성은 엄청나게 중요한 문제 였습니다.&lt;/p&gt;
&lt;p&gt;결국, &lt;strong&gt;&lt;a href=&quot;https://ko.wikipedia.org/wiki/ACID&quot;&gt;ACID&lt;/a&gt;&lt;/strong&gt;보장을 해주는 RDBMS와 NoSQL은 대체제가 아닌 보완제 였습니다.&lt;/p&gt;
&lt;h3&gt;MySQL&lt;/h3&gt;
&lt;p&gt;제가 겪은 문제중 하나는, MySQL은 기본적으로 문자열의 &lt;a href=&quot;https://dev.mysql.com/doc/refman/5.7/en/case-sensitivity.html&quot;&gt;대소문자&lt;/a&gt;를 구별하지 않았습니다.
예를 들어 아래 코드로 Model을 정의하면 얼핏 보기에는 문제 없어 보였지만,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SomeModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;python manage.py shell&lt;/code&gt;를 실행하고 다음 코드를 입력하면 아래와 같은 에러가 발생합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; SomeModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sn0wle0pard&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SomeModel&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; SomeModel &lt;span class=&quot;token builtin&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; SomeModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Sn0wle0pard&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;utils&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegrityError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1062&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Duplicate entry &apos;Sn0wle0pard&apos; for key &apos;name&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정확하게 알고 쓰지 않아 생긴 문제는 때때로 발견하기 어려웠습니다.&lt;/p&gt;
&lt;h2&gt;ORM&lt;/h2&gt;
&lt;p&gt;저는 ORM을 좋아합니다 (여담이지만 커뮤니티 슬랙에서 Raw SQL을 선호하는 개발자도 많다는걸 알았습니다).
더 프로그래밍 언어에 친화적인 코드를 작성할 수 있고, 유지보수도 쉬워지며, 실수도 줄일 수 있으니까요.
네, 저는 ORM을 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%EC%9D%80%EC%A0%9C_%ED%83%84%ED%99%98&quot;&gt;은탄환&lt;/a&gt;으로 여겼습니다.&lt;/p&gt;
&lt;p&gt;실제로 개인프로젝트에서는 SQL 지식을 거의 가지지 않고도 충분히 사용가능해 보였습니다.
하지만 ORM은 은탄환이 아니었습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ORM으로 표현이 어려운경우&lt;/li&gt;
&lt;li&gt;ORM을 비효율적으로 사용한 경우&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;전자는 대표적으로 일부 통계가 있었습니다. 후자는 프로젝트가 커지면서 점점 문제로 다가 왔고,
ORM의 특성을 잘 이해하지 않으면 DB에 엄청난 무리를 줄 수 있다는 점을 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;피플펀드 개발팀이 ORM 성능 향상을 위해 알아보고 적용한 내용은
&lt;a href=&quot;https://peoplefund-dev.github.io/2017/11/03/django-db-optimization.html&quot;&gt;Django DB 최적화&lt;/a&gt;
포스트에서 자세히 보실 수 있습니다.&lt;/p&gt;
&lt;p&gt;부끄럽게도 전 DB 및 SQL 공부를 소홀히 하였고, 그렇다고 ORM의 특성을 잘 이해하고 있던것도 아니었습니다.
아래 글은 Django ORM에 대한 제가 추천하는 글 입니다. (Django 공식문서는 기본 입니다!)&lt;/p&gt;
&lt;h3&gt;좋은글&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://peoplefund-dev.github.io/2017/11/03/django-db-optimization.html&quot;&gt;Django DB 최적화&lt;/a&gt; :)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://raccoonyy.github.io/using-django-querysets-effectively-translate/&quot;&gt;Django에서 쿼리셋 효과적으로 사용하기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://wayhome25.github.io/django/2017/06/20/selected_related_prefetch_related/&quot;&gt;django 쿼리셋 수정을 통한 웹서비스 성능 개선&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://raccoonyy.github.io/django-annotate-and-aggregate-like-as-excel/&quot;&gt;(엑셀만큼 쉬운) Django Annotation/Aggregation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;그외&lt;/h2&gt;
&lt;p&gt;그외에도 몇가지
(예: &lt;a href=&quot;https://peoplefund-dev.github.io/2017/11/04/performance-improvements-of-peoplefund.html&quot;&gt;피플펀드 성능개선기&lt;/a&gt;중 &lt;em&gt;소켓 연결 제한&lt;/em&gt;)
일을 보거나 겪고 나니 DB, Network, OS 등등 기초지식의 중요성을 세삼스레 깨닫게 되었습니다.&lt;/p&gt;
&lt;h3&gt;좋은글&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://slides.com/eungjun/rest#/&quot;&gt;그런 REST API로 괜찮은가&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.npcode.com/&quot;&gt;eungju 님의 블로그&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;더 나은 코드를 위해서&lt;/h1&gt;
&lt;p&gt;이전에도 코드리뷰 같은 문화는 알았지만, 현장에서 느낀 점도 많았습니다.&lt;/p&gt;
&lt;h2&gt;테스트, 테스트, 테스트!&lt;/h2&gt;
&lt;p&gt;가장 강조하고 싶고, 많이 느낀점 입니다. 학교 과제를 하면서 테스트 코드를 작성하는 일은 드무니까요.&lt;/p&gt;
&lt;p&gt;저는 인턴을 하면서 처음으로 유닛테스트에 대해 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;예를 들어 주어진 문자열이 올바른 형식의 이메일인지 확인하는 함수 &lt;code class=&quot;language-text&quot;&gt;is_right_email&lt;/code&gt;을 만들었다고 하죠.
그럼 아래와 같은 테스트 코드를 만들 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; unittest

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; some_module &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; is_right_email


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TestSomeModule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unittest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TestCase&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_email&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;is_right_email&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test@test.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;is_right_email&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test@test&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 코드에 문제가 있는지 미리 파악할 수 있을 뿐더러,
추후에 &lt;code class=&quot;language-text&quot;&gt;is_right_email&lt;/code&gt;함수를 리팩토링 할때도 큰 도움이 됩니다 (테스트를 모두 통과해야 되므로).&lt;/p&gt;
&lt;p&gt;솔직히 처음에는 조금 귀찮은 작업이었지만 테스트 코드를 작성하는 도중에 내 코드의 문제점을 발견하고 고친적도 있으며,
테스트 코드를 철저하게 작성했다면 미리 발견했을 문제도 겪었습니다.&lt;/p&gt;
&lt;h3&gt;좋은글&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.outsider.ne.kr/1275&quot;&gt;유닛테스트에 대한 생각&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Type&lt;/h2&gt;
&lt;p&gt;이 문제는 &lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2016/05/01/TypeWars.html&quot;&gt;타입 전쟁&lt;/a&gt;으로 유명하기도 하고,
개인의 취향도 많이 타는 문제 입니다.
그렇지만 TypeScript, Python 3.6 부터 들어온 typing 등등 많은 프로그래밍 언어가 정도는 다르지만 타입정보 제공을 지원하고 있습니다.
협업을 하다보니 강타입 까진 아니더라도 Type Hinting을 위한 Type Annotation 정도는 있는게 많은 도움을 준다고 느꼈습니다.&lt;/p&gt;
&lt;h2&gt;자동화&lt;/h2&gt;
&lt;p&gt;여러 업무를 겪다보면 반복되는 작업이 생깁니다. 그냥 지나칠수도 있지만 이런 문제를 정형화 하고,
해결하는 습관은 결과적으로 업무량도 줄이고 실수도 줄일 수 있습니다.&lt;/p&gt;
&lt;h1&gt;클라우드 시대&lt;/h1&gt;
&lt;p&gt;AWS는 프리티어를 주기도 하고, 학생혜택도 있기 때문에 이전부터 사용하긴 했습니다.
개인적으로 AWS를 사용하게 되면 보통 EC2만 간단하게 사용하게 되고, 결국 &lt;code class=&quot;language-text&quot;&gt;다른 가상 호스팅과 다를게 뭐지?&lt;/code&gt;,
&lt;code class=&quot;language-text&quot;&gt;왜 개발자들이 열광하는 걸까?&lt;/code&gt;라는 의문을 가지고 있었습니다.&lt;/p&gt;
&lt;p&gt;회사에 들어오기 전에 &lt;code class=&quot;language-text&quot;&gt;serverless&lt;/code&gt; 아키텍쳐를 흥미롭게 보고, 몇 가지 토이 프로젝트를 만들면서 DynamoDB, S3, Lambda 등등
필요에 따라서 필요한 만큼만 사용하는 클라우드의 장점을 일부 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;인턴으로 일하며 느낀 장점은 자동화와 고가용성 입니다.
RDS, ECS, CloudWatch 등등이 제공하는 여러 기능들은 그동안 &lt;strong&gt;일일히 관리 해야 했던 일들을 자동화 해줬습니다&lt;/strong&gt;.
스타트업에 있어 개발자는 특히 비싼 자원입니다. 개발자의 할일과 실수를 줄이는 건 엄청난 이득일 뿐만아니라 더 우선순위가 높은 일을 처리할 수 있게 해줬습니다.&lt;/p&gt;
&lt;p&gt;추가로 비싸보였던 여러 소프트웨어도 프로그래머 명의 일을 대신한다는 관점에서 보면 (특히 프로그래머 월급보다 싸다면) 합리적인 가격으로 느낄수 있었고요.&lt;/p&gt;
&lt;p&gt;비단 클라우드 뿐만 아니라 New Relic 같은 APM,
Travis CI, Circle CI 같은 CI/CD, Sentry 같은 log 분석 시스템, Serverless, Apex등 Serverless Framework
등등 클라우드에 맞춰진 다양한 소프트웨어들도 인상 깊었습니다. SaaS, FaaS의 편리함도 포함해서요.&lt;/p&gt;
&lt;h2&gt;좋은 글&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://egloos.zum.com/eggry/v/3763434&quot;&gt;스티브의 구글 플랫폼 폭언&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;자율과 규율 사이&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;스타트업의 장점은 논의의 여지가 남아있다는 점이다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://news.mk.co.kr/newsRead.php?year=2017&amp;#x26;no=608429&quot;&gt;빠르게 성장하는 회사&lt;/a&gt;에서 인턴을 하면서,
회사 문화를 합의하는 과정 그리고 성장통을 같이 겪고 지켜볼 수 있었습니다.&lt;/p&gt;
&lt;p&gt;특히 저는 사업을 꿈꾸고 있어 느낀점이 많았습니다.&lt;/p&gt;
&lt;h2&gt;어떻게 소통하고 일할 것인가?&lt;/h2&gt;
&lt;p&gt;저는 스타트업의 장점을 자유로운 소통이라고 생각했습니다. 그런데 경우에 따라서는 소통도 규칙이 필요합니다.
앞서 말했듯 스타트업에 있어 개발자는 비싼 자원이고, 개발자가 해결해야 하는 문제는 상당히 많습니다.
일의 우선순위가 바뀔수도 있고, 생각만큼 일이 진행되지 않을 수도 있습니다.
이런상황에서 자꾸만 새로운 문제가 들어온다면요? 먼저 해결하고 있던 문제는 어떻게 된걸까요?
이렇듯 여러 문제의 진행상황을 알리고, 우선순위를 정하고, 코드의 품질을 유지하기 위해서는 일하는 데도 규칙이 필요했습니다.
피플펀드에서는 여러 개발 방법론, 에자일 스크럼, JIRA 같은 소프트웨어를 적용해보고 좋은 방법을 찾아가고 있었습니다.&lt;/p&gt;
&lt;p&gt;아쉽게도 이 고민은 끝나지 않았습니다. 사실 여러 대기업도 계속해서 하는 고민이기도 하고요 :(&lt;/p&gt;
&lt;h3&gt;좋은글&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.venturesquare.net/553623&quot;&gt;페이스북은 어떻게 개발하고 배포할까?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://luckyyowu.tistory.com/370&quot;&gt;어느 스타트업의 애자일 스크럼와 JIRA에 대한 연구 문서&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.dramancompany.com/2016/03/%EA%B0%9C%EB%B0%9C%EA%B7%B8%EB%A3%B9%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9D%BC%EC%9D%84-%ED%95%98%EB%8A%94%EA%B0%80-1&quot;&gt;개발그룹은 어떻게 일을 하는가? #1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;마치며&lt;/h1&gt;
&lt;p&gt;약 10개월의 인턴을 마치고, 이제 복학 준비를 하고 있습니다.
이번학기는 프로그래밍 기초지식을 더 쌓고, 더 좋은 흥미로운 프로그램을 만들기 위해 노력할 것입니다.
올 한해도 더 큰 성장을 이룰 수 있었으면 좋겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/sn0wle0pard&quot;&gt;GitHub&lt;/a&gt;,
&lt;a href=&quot;https://www.linkedin.com/in/sn0wle0pard/&quot;&gt;LinkedIn&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[고밀도 디스플레이를 위한 이미지 다루기]]></title><description><![CDATA[들어가며 레티나 디스플레이를 시작으로 다양한 고밀도 디스플레이 기기가 늘어났습니다.
이에 따라 웹에서도 고 해상도 이미지의 수요가 생겼습니다.
고 해상도 이미지를 제공하는 방법을 알아봅니다. Media Queries: resolution feature…]]></description><link>https://blog.hanlee.io/2018/high-density-display-and-images/</link><guid isPermaLink="false">https://blog.hanlee.io/2018/high-density-display-and-images/</guid><pubDate>Sun, 21 Jan 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h1&gt;들어가며&lt;/h1&gt;
&lt;p&gt;레티나 디스플레이를 시작으로 다양한 고밀도 디스플레이 기기가 늘어났습니다.
이에 따라 웹에서도 고 해상도 이미지의 수요가 생겼습니다.
고 해상도 이미지를 제공하는 방법을 알아봅니다.&lt;/p&gt;
&lt;h1&gt;Media Queries: resolution feature&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;resolution&lt;/code&gt;은 고밀도 디스플레이를 위해 고안된 css문법으로,
IE9를 포함한 &lt;a href=&quot;https://caniuse.com/#feat=css-media-resolution&quot;&gt;브라우저 대부분&lt;/a&gt;이 지원합니다.
문법은 &lt;code class=&quot;language-text&quot;&gt;(min/max)-resolution: 값&lt;/code&gt;으로 사용되며, 기본 단위는 dppx입니다.&lt;/p&gt;
&lt;p&gt;이 미디어쿼리를 사용하면 고밀도 디스플레이와 저밀도 디스플레이에 서로 다른 이미지를 보여줄 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;figure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;some_img.ext&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;img-normal&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;normal image&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;some_img@2x.ext&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;img-retina&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;retina image&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;figure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; initial&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-normal&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;background-image&lt;/code&gt;를 사용할 것이면 다음과 같이 쓸 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(...)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(...)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;하지만 아쉽게도 safari는 &lt;code class=&quot;language-text&quot;&gt;min/max-device-pixel-ratio&lt;/code&gt; 문법만을 지원하고 있어 다음을 사용해야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-webkit-min-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또한 오페라미니와 IE는 dppx를 지원하지 않기 때문에 적당한 dpi를 사용해야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 192dpi&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과적으로 IE9을 포함한 대부분 브라우저를 지원하려면 다음 문법을 사용하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-webkit-min-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;, only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 192dpi&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;, only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2dppx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; initial&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-normal&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;덤으로 만약 파이어 폭스와 오페라 이전 버전을 지원하고 싶다면 다음과 같은 미디어 쿼리를 추가하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min--moz-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;, only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-o-min-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2/1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;resolution&lt;/code&gt; 미디어 쿼리를 사용하면, 브라우저 대부분을 지원하자만, 그러기 위해서는 미디어 쿼리가 복잡해지는 문제가 있습니다.
게다가 한가지 문제가 더 생기는데 브라우저의 &lt;strong&gt;동시 연결 제한&lt;/strong&gt; 문제입니다.&lt;/p&gt;
&lt;h1&gt;동시 연결 제한&lt;/h1&gt;
&lt;p&gt;HTTP 1.1의 표준인 &lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4&quot;&gt;RFC 2616&lt;/a&gt;의 8.1.4절을 살펴보면 다음과 같은 내용이 있습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Clients that use persistent connections SHOULD limit the number of simultaneous connections that they maintain to a given server.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;한국전자통신연구소의 번역본은 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;지속적인 접속을 사용하는 클라이언트는 특정 서버로의 동시 접속 숫자에 제한을 두어야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;실제로 브라우저들은 &lt;em&gt;도메인당 최대 연결수를 제한하고 있습니다&lt;/em&gt;. 그 수는 브라우저 마다 다릅니다.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;브라우저&lt;/th&gt;
&lt;th&gt;도메인당 최대 연결 수&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Internet Explorer® 7.0&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Internet Explorer 8.0 &amp;#x26; 9.0&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Internet Explorer 10.0&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Internet Explorer 11.0&lt;/td&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Firefox®&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Chrome™&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Safari®&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Opera®&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;사파리를 예로 들면, 한 웹페이지의 같은 도메인 한번에 받아 올 수 있는 이미지는 최대 6개 입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-1.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-2.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-3.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-4.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-5.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-6.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-7.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-8.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-9.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-10.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-11.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-12.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/39b9b/img-load.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 61.55405405405405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACc0lEQVQoz61S204TURQ9iZGLL2B8MjExfgnik0QfmJDwDZL4H8ZE/gGe5dYChihQEB40pLShIVBaep3OfabTmelMO+2c5Z4Z/ALdycraZ19WzjozbHnzcvn5GTBzDMwepzyTA57m0vzFT+DV+UM/l/ZizD7gGaE8RhKXpetl9n6jsDiRscG27eF01g6f7NphzI927JBtd5N8Zo/yrTT/i6ls2mc73fCiOx7GgsXrm0X29mtRYFkPbKvHJ3cdPr3nYGLXAcv0wDZ7CU/GZ8onsmnvMfEUzdFOsndhcx4LXt2UBfYx80tYODUw90Plc4cJ8Jrw5kjD/LGOhZyGd7m0Nn+kE2uYi/Fdph0F87RT1FyO0RC/85cCO8x8E0q3LbSbDd6q3fO78h3q1SpqlTu0G3Wosgy5I0KRJCjEKkGTOpBaTcjtFhSxzTuiyMVOBwcHBwLb2t8Trm4rqNcb3DAt7gUhnH4AfzBA3w9QUV2UFRe3soP+IEQ4HGIwCBCOQoxGY8KIR1HEKVAqlQS2kdkXarUaJEnijm3z4XCAIAgS+L4Pt9+H1/dJ3Ifn+jA0k2o2XK+XzLiey13Po70hikX6Hicn54KqatA0NTJNkxuGwU3L4rquc1VVueu63O52uW13k3Oz2eKW1eWapiUzsqJyPwiiWDyfz5PgaU6oVCqoVu/HNESiRiwcKYoSiaIYeZ4XpXUz0nUjajYbxHrUbrciWZKiRluMHY/Jemo5d3a2pGoaSAC9Xi+xSSKwbRuWZdF7DZI63RSO45ATLWFyAro5dMMEKdJPw1EoFJbYp89fXq6tra0QPvwL1tfXV1ZXV1+y/x1/AEXBxYYiAttCAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;&lt;/span&gt;
    &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;&quot;
        alt=&quot;사파리 이미지 로딩&quot;
        title=&quot;&quot;
        src=&quot;/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/10273/img-load.png&quot;
        srcset=&quot;/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/9b14a/img-load.png 163w,
/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/94962/img-load.png 325w,
/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/10273/img-load.png 650w,
/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/2fc6f/img-load.png 975w,
/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/a8a2c/img-load.png 1300w,
/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/173d2/img-load.png 1950w,
/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/39b9b/img-load.png 2960w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
      /&gt;
  &lt;/span&gt;
  &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;위 이미지를 보시면 최대 6개의 네트워크 연결을 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./same-domain-multiple-images.html&quot;&gt;여기에서&lt;/a&gt; 직접 확인해 보실 수 있습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;동일 도메인 연결 제한을 피하고 성능향상을 위해 CDN 서비스를 사용하기도 합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;중요한 점은 브라우저는 보여지지 않는 파일도 가져옵니다. 즉, &lt;code class=&quot;language-text&quot;&gt;display: none&lt;/code&gt; 혹은
무시된 &lt;code class=&quot;language-text&quot;&gt;background-image&lt;/code&gt;도 가져옵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-1.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-2.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style-attr language-css&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt; &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&quot;&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-3.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style-attr language-css&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt; &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&quot;&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-4.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-5.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-6.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-7.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-8.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-9.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-10.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-11.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./img/normal-img-12.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8e9b62e0e1aecf29c8245968544dcd02/39b9b/img-load-with-none.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 61.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACdUlEQVQoz62Q205TQRSGJxExGBM0Xplw48OIYLxgS8Itr+AbkGh8AW6Ad+DUlkSMlHJKNKFQtDRACrSlu/u8u4897XbP75pdYzDx0km+/GutWfPPmmFza6dzLw6B8d2/eZYb6sQB8PJoGD/9XRvPDWPBc+JqgGSdFktz7O1qYWY05YBtuL3HGTd6QggdSbkR23CisbQbjW9RvO4k9fuIfbbpRMfOoCcMz0oXM2xq9Uxi6RBs3ecP0z5/lPExkvbBNok1DyzlYzQzjEVd8IAY2wrojCfgxy7nwvDnxZXE3qe+SdKhiddZjQsmdzRMZjVM7+p4kzMg7el4l1MxJWqUC6gPr74qmNxRMZ1V+Q/d5zzq4nv+RGLZ9GepdHkHpVblcuWGV67LIEX9hrR6C1NTYSgKLE2D3pCh1u9gqwoMuQ6TclORudKQeaPRwJftbYmtbmWkQukSN7cVbtlN3un20e1FiHo9qE6ICy3AJVExfaheBzWrjaAVUk8LPZqqP4h5HMfJk8/PzyW2ThPWajVomsZ9z+dNOtxqtdFut0lbCBPIJPTQagfw7BBNR4fjK/ACC+JMEAS82+2iUChIbH//SDIME6ZpxM1mk9u2zYWapsl1XU+aXdchvCSny7njuNw0LG5ZNlc1nXc6nZjAycmpxPb2clK5XEb5+jo2DCO2bSsxFRM3ZJmHYcipntTEJdVqNcmFsaaqvFaXxYvjwWCAYrEosd2Dg1lVVdGgj3ecJmgi+L4PMqCpzeTZNDFc100gk0TJlHosaLqBfr+PHv15Pp+fZR8+fppYWVmZX15eTlhaWvoT/4v7vfdZXFycX1hYmGD/e/0CetDCelu3ysIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;&lt;/span&gt;
    &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;&quot;
        alt=&quot;img load with none&quot;
        title=&quot;&quot;
        src=&quot;/static/8e9b62e0e1aecf29c8245968544dcd02/10273/img-load-with-none.png&quot;
        srcset=&quot;/static/8e9b62e0e1aecf29c8245968544dcd02/9b14a/img-load-with-none.png 163w,
/static/8e9b62e0e1aecf29c8245968544dcd02/94962/img-load-with-none.png 325w,
/static/8e9b62e0e1aecf29c8245968544dcd02/10273/img-load-with-none.png 650w,
/static/8e9b62e0e1aecf29c8245968544dcd02/2fc6f/img-load-with-none.png 975w,
/static/8e9b62e0e1aecf29c8245968544dcd02/a8a2c/img-load-with-none.png 1300w,
/static/8e9b62e0e1aecf29c8245968544dcd02/173d2/img-load-with-none.png 1950w,
/static/8e9b62e0e1aecf29c8245968544dcd02/39b9b/img-load-with-none.png 2960w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
      /&gt;
  &lt;/span&gt;
  &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;위 이미지를 확인해 보시면 사용하지 않는 &lt;code class=&quot;language-text&quot;&gt;normal-img-2.png&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;normal-img-3.png&lt;/code&gt;도 받아오는걸 확인 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;마찬가지로 &lt;a href=&quot;./same-domain-multiple-images-with-none.html&quot;&gt;여기에서&lt;/a&gt; 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;결국 resolution 미디어 쿼리를 이용해 이미지를 다룰경우, 불필요한 이미지도 모두 받아오게 됩니다.
따라서 고밀도 유저나 일반 유저나 모두 약 2배 가까운 이미지를 받게됩니다. 여러 이미지를 사용하는 페이지라면,
보이지 않는 이미지를 받는 도중 도메인 연결 제한에 걸려 보여줘야할 이미지를 받는데 더 시간이 걸릴 수도 있습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;단, background-image를 이용할 경우에는 필요한 이미지만 받아옵니다.
따라서 가능하다면 &lt;strong&gt;보여줘야할 이미지만 선택해서 받아오게 해야합니다&lt;/strong&gt;. 그럼 다른 방법은 없을 까요?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;JS를 이용해 동적으로 가져오기&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;window.devicePixelRatio&lt;/code&gt; (&lt;a href=&quot;https://caniuse.com/#feat=devicepixelratio&quot;&gt;IE 11&lt;/a&gt;부터 지원)을 사용하거나,
위에 있는 미디어 쿼리를 적용한 element 상태를 보고 적합한 이미지를 가져오는 방법도 있습니다.&lt;/p&gt;
&lt;p&gt;이 방식을 사용하실 거면, &lt;a href=&quot;https://github.com/strues/retinajs&quot;&gt;retinajs&lt;/a&gt;를 추천합니다.
retinajs는 css js를 모두 지원하고 특히 다음과 같은 문법을 지원하는데요,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/images/my_image.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;data-rjs&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/images/my-image@2x.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- or --&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token style-attr language-css&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&quot;&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token property&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(/images/my_image.png)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;data-rjs&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/images/my-image@2x.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 사용하면, 일반 디스플레이 이용자들은 &lt;code class=&quot;language-text&quot;&gt;/images/my_image.png&lt;/code&gt;만을 받아 올 수 있습니다.&lt;/p&gt;
&lt;p&gt;하지만 여전히 고밀도 이용자들은 여러 이미지를 받거나, 깜박임을 겪는 문제를 겪습니다.&lt;/p&gt;
&lt;h1&gt;srcset&lt;/h1&gt;
&lt;p&gt;HTML 5.1 부터 img element에 &lt;a href=&quot;https://www.w3.org/TR/html51/semantics-embedded-content.html#element-attrdef-img-srcset&quot;&gt;srcset&lt;/a&gt; 속성이 추가 되었습니다.
현재 IE와 오페라미니를 제외한 모든 브라우저 에서 &lt;a href=&quot;https://caniuse.com/#feat=srcset&quot;&gt;지원하고 있습니다&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;srcset&lt;/code&gt;은 조건에 따라 다른 이미지를 가져오게 할 수 있는데요 다음과 같은 문법으로 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;[이미지위치] [조건], ...&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쉼표로 구분하며, 앞에 조건과 사용할 이미지를 적으면 됩니다.
&lt;code class=&quot;language-text&quot;&gt;resolution&lt;/code&gt;이 2이상인 디스플레이와 일반디스플레이를 구분해 이미지를 보여주려면 다음과 같이 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;image-src.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;image-1x.png 1x, image-2x.png 2x&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;srcset을 사용하면 브라우저는 적합한 이미지만을 선택해 가져옵니다.
&lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 61.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACFklEQVQoz62Pz47SUBjF+yDzUNNMMlvewI26kJUbNiTARjOsDDpG48JkojHOjPJHGqe4UAYw4mQitL2XMkNbChZa2sI93lvE4MZkEpv8cs537u3pV+lMae6/pi4KX3t40DXw8HKI/HeCN2QCPwA8H/g5XyP8Zp7OfuOtdb4Aqh8+70sflfPdUkfDvZN6mH5+FN1/fxaly2p02OlHA3MeGYNZZHAlG5+wnrcIeY5avbkrqUpLLnUpbr8qs7vPjtid0gvcevoST7oDmKYPwqHDAGS49uSvLBCecc/M6xA15VyWahVVPr3QUKrW2eOywg6VT3jEOf7WA6VjaIaFH/1r9HULOnFAeKYTGz1NZCNo+ogR6jDzaopKVZWlyrtj+eKyj0bHYJQQRimFNRrBpASEGBwCXdcwGNCEfr+XzALD0KEbBtMMwnSD4O3JqSxVq1WZmlcwRy5zHIdZtg13MoE3m8HzPEy4n8/n8H0/0el0Ctd1k1yoPfGY68ds4sdofGnLkqqq8thxMHZsZlmWKEUQBAmiZBuRLRaLhE22CAIWhSFbLWN02pvC8Ri2ba9EIfcsCBac4J/w0m2/iqIIrVZLlhqNhixW50UrUco9C/kXBeKlDes5/HO2OecqylZxHKMtNlQUZU/8Ji9LENvySzdmuVyi2WzuSel0eiebzaZyuVwqn8+n8oVC6uCgmCoWb04mk9mR/vfzCwZr+95x+A0SAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;&lt;/span&gt;
    &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;&quot;
        alt=&quot;webkit 2x&quot;
        title=&quot;&quot;
        src=&quot;/static/6b89a7a3b6ecd77e1a66dab09bf392f8/10273/webkit-2x.png&quot;
        srcset=&quot;/static/6b89a7a3b6ecd77e1a66dab09bf392f8/9b14a/webkit-2x.png 163w,
/static/6b89a7a3b6ecd77e1a66dab09bf392f8/94962/webkit-2x.png 325w,
/static/6b89a7a3b6ecd77e1a66dab09bf392f8/10273/webkit-2x.png 650w,
/static/6b89a7a3b6ecd77e1a66dab09bf392f8/2fc6f/webkit-2x.png 975w,
/static/6b89a7a3b6ecd77e1a66dab09bf392f8/a8a2c/webkit-2x.png 1300w,
/static/6b89a7a3b6ecd77e1a66dab09bf392f8/173d2/webkit-2x.png 1950w,
/static/6b89a7a3b6ecd77e1a66dab09bf392f8/39b9b/webkit-2x.png 2960w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
      /&gt;
  &lt;/span&gt;
위 이미지를 보시면 &lt;code class=&quot;language-text&quot;&gt;image-src.png&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;image-1x.png&lt;/code&gt;를 받지 않고 &lt;code class=&quot;language-text&quot;&gt;image-2x.png&lt;/code&gt;만 받는걸 확인 할 수 있습니다.
&lt;a href=&quot;https://webkit.org/demos/srcset/&quot;&gt;여기에서&lt;/a&gt; 직접 확인해 볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;어떤 조건에도 해당 되지 않거나, 이미지를 가져올 수 없다면 &lt;code class=&quot;language-text&quot;&gt;src&lt;/code&gt;에 있는 이미지를 가져오게 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;image-src.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;image-2x.png 2x&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어 위와 같이 작성하면 2x, 3x ... 밀도를 가진 기기는 &lt;code class=&quot;language-text&quot;&gt;image-2x.png&lt;/code&gt;를 가져오고,
&lt;code class=&quot;language-text&quot;&gt;srcset&lt;/code&gt;을 지원하지 않는 브라우저나 일반 디스플레이는 &lt;code class=&quot;language-text&quot;&gt;image-src.png&lt;/code&gt;을 가져오게 됩니다.&lt;/p&gt;
&lt;p&gt;따라서 &lt;code class=&quot;language-text&quot;&gt;srcset&lt;/code&gt;을 지원하지 않는 브라우저도 (비록 상대적으로 흐린 이미지 겠지만) 이미지 자체는 표시가 될 뿐더러,
불필요한 이미지를 가져오지 않아, 성능에도 도움이 됩니다.&lt;/p&gt;
&lt;h2&gt;덤&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;srcset&lt;/code&gt;으로 가져온 이미지는 한가지 특징을 가지게 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;image-src.png&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;image-2x.png 2x&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style-attr language-css&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt; &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&quot;&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 100%&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 HTML을 작성하였고, image-2x.png는 200px&lt;em&gt;200px 크기의 이미지 라면,
&lt;code class=&quot;language-text&quot;&gt;img&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;width: 100%&lt;/code&gt;를 주었어도 100px&lt;/em&gt;100px으로 표시됩니다.&lt;/p&gt;
&lt;p&gt;따라서 이미지 크기를 반드시 2배 키워서 사용해야 크기 실수를 방지 할 수 있습니다.
safari는 개발자용 &gt; 응답형디자인모드 에서 최대 3x 까지 디스플레이 밀도를 조정하며 확인해 볼 수 있습니다.&lt;/p&gt;
&lt;h3&gt;img-set&lt;/h3&gt;
&lt;p&gt;css에도 img-set이란 속성이 있습니다. 아쉽게도 현재는 사파리와 크롬만 &lt;a href=&quot;https://caniuse.com/#search=image-set&quot;&gt;지원하고&lt;/a&gt; 있는데요,
다음과 같은 방법으로 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.test&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(image-1x.png)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;-webkit-image-set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token url&quot;&gt;url(image-1x.png)&lt;/span&gt; 1x, &lt;span class=&quot;token url&quot;&gt;url(image-2x.png)&lt;/span&gt; 2x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;75px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아쉽게도 사파리와 크롬만 지원하지만 &lt;code class=&quot;language-text&quot;&gt;srcset&lt;/code&gt;처럼 fallback이 있으므로 콘텐츠에 문제를 만들지 않으며, 적합한 이미지만 골라 받아 오게 됩니다.&lt;/p&gt;
&lt;p&gt;하지만,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(...)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; only screen and &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(...)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 css를 사용해도 적합한 파일만을 받기 때문에 현재로썬 복잡한 미디어 쿼리를 작성하기 싫을 경우에 유용합니다.&lt;/p&gt;
&lt;h1&gt;결론&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;문서 상단처럼 고밀도 디스플레이에 서로 다른 HTML Element를 보여줘야 한다&lt;/li&gt;
&lt;li&gt;동적으로 이미지를 가져오는 것이 싫다&lt;/li&gt;
&lt;li&gt;IE에도 고해상도 이미지를 보여주고 싶다&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;resolution&lt;/code&gt; 미디어 쿼리를 이용하세요.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IE를 지원해야 합니다&lt;/li&gt;
&lt;li&gt;동적으로 이미지를 가져와도 좋다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;자바스크립트를 이용해 구현하여 사용합니다. 개인적으로는 retinajs를 추천합니다.&lt;/p&gt;
&lt;p&gt;그외의 경우에는 &lt;code class=&quot;language-text&quot;&gt;srcset&lt;/code&gt;과 사용하시는 것을 권장합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[번역]Python의 내부: 소개]]></title><description><![CDATA[이글은  Yaniv Aknin 의  Python's Innards: Introduction 을 번역한 글입니다.
원글에 따라 이 글도  CC BY-NC-SA 3.…]]></description><link>https://blog.hanlee.io/2017/pythons-innards-introduction/</link><guid isPermaLink="false">https://blog.hanlee.io/2017/pythons-innards-introduction/</guid><pubDate>Sat, 02 Sep 2017 12:34:11 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;이글은 &lt;a href=&quot;https://tech.blog.aknin.name/&quot;&gt;Yaniv Aknin&lt;/a&gt;의 &lt;a href=&quot;https://tech.blog.aknin.name/2010/04/02/pythons-innards-introduction/&quot;&gt;Python&apos;s Innards: Introduction&lt;/a&gt;을 번역한 글입니다.
원글에 따라 이 글도 &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-sa/3.0/&quot;&gt;CC BY-NC-SA 3.0&lt;/a&gt; 라이센스를 따릅니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;한 친구가 제게 말한적이 있습니다.
너도 알겠지만 몇몇 사람들에게 C는 그저 어셈블리로 확장되는 매크로야.
몇 년 전의 일이었습니다 (잘난놈들: 그건 llvm 이전의 이야기였지, 알겠어?),
그렇지만 그 말은 저를 속박했습니다.
&lt;em&gt;Kernighan&lt;/em&gt;과 &lt;em&gt;Ritchie&lt;/em&gt;는 정말로 C프로그램에서 어셈블리 코드를 보나요?
&lt;em&gt;Tim Berners-Lee&lt;/em&gt;는 저나 여러분과 다르게 웹서핑을 하나요?
그리고 &lt;em&gt;Keanu Reeves&lt;/em&gt;는 그 펑키한 초록색 스프(funky green gibberish soup)&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;를 다 보았을때 도데체 무슨 짓을 한 걸까요?
아니, 정말이지, 그가 도제체 무슨 짓을 한 거야?!
음, 프로그램으로 돌아가죠.
어쨌든, Gudio van Rossum&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;의 눈에 Python은 어떻게 생겼을까요?&lt;/p&gt;
&lt;p&gt;이 글은 파이썬 내부 구조에 대한 &lt;a href=&quot;https://tech.blog.aknin.name/tag/pythons-innards/&quot;&gt;시리즈&lt;/a&gt;로 나아갈 시작점 이며,
저는 무언가를 이해하기 위한 가장 좋은 방법은 설명하는 것 이라고 생각하기 때문에 글을 쓰고 있습니다.
그리고 저는 제가 Python 코드를 읽으면서 Python의 &apos;펑키한 녹색 스프&apos;를 더 많이 시각화 할 수 있기를 바라고 있습니다.
커리큘럼은 &lt;em&gt;CPython&lt;/em&gt;, &lt;em&gt;py3k&lt;/em&gt;&lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;, &lt;em&gt;바이트코드 해석&lt;/em&gt;(저는 별로 컴파일 과정의 광팬이 아닙니다.)을 다룰 겁니다.
그렇지만 Python과 Python 같은 코드(&lt;em&gt;Unladen Swallow&lt;/em&gt;&lt;sup id=&quot;fnref-4&quot;&gt;&lt;a href=&quot;#fn-4&quot; class=&quot;footnote-ref&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;, &lt;em&gt;Jython&lt;/em&gt;, &lt;em&gt;CPython&lt;/em&gt; 등)를 실행하는 모든 것들은 이 시리즈의 좋은 주제가 될 수 있습니다.
간결함과 제 정신을 위해서, Python은 특별히 언급하지 않는 한 CPython을 의미합니다.
또, 다른 언급이 없다면 저는 POSIX 또는 (만약 특별한 경우) Linux를 가정하겠습니다.&lt;/p&gt;
&lt;p&gt;여러분은 Python이 어떻게 동작하는지 알고 싶다면 이글을 읽어야 합니다.
여러분은 CPython에 기여하고 싶다면 이글을 읽어야 합니다.
여러분은 제 실수를 찾기 위해서 이 글을 읽어야 하고, 제 뒤에서 저를 비웃거나 악플을 달아야 합니다.
저는 그것들이 단지 애정을 표현하는 &lt;em&gt;여러분들&lt;/em&gt;의 특별한 방법이라는 것을 알았습니다.&lt;/p&gt;
&lt;p&gt;저는 주로 Python의 소스코드나 다른 좋은 자료들(Python 문서, 특히 &lt;a href=&quot;https://docs.python.org/3/c-api/index.html&quot;&gt;이것&lt;/a&gt;과 &lt;a href=&quot;https://docs.python.org/3/extending/index.html&quot;&gt;이것&lt;/a&gt;, PyCon 강연, &lt;a href=&quot;https://mail.python.org/mailman/listinfo/python-dev&quot;&gt;python-dev&lt;/a&gt;&lt;a href=&quot;https://tech.blog.aknin.name/2010/05/07/searching-mailing-list-archives-offline/&quot;&gt;검색&lt;/a&gt; 결과)을 모아 놓은 것에서 자료를 모을 것 입니다.
모든 자료들이 그곳들에 있겠지만,
자료들을 RSS구독을 할 수 있는 한 곳에 모으려는 제 노력이 여러분의 여정을 더 쉽게 만들어 주기를 바랍니다.
저는 독자 분들이 C언어 지식, 조금의 OS 이론, (어떤 아키텍쳐든) 조금 적은 어셈블리 지식, 조금 많은 Python 지식 그리고 UNIX 적합성(즉, 편한한 마음으로 출처에서 무언가를 설치할 수 있어야 합니다)을 가지고 있다고 생각하겠습니다.
만약에 여러분이 이중 하나 (혹은 그 이상)익숙하지 않더라도 두려워 하지는 마세요,
그렇지만 저는 순조로운 항해를 약속 할 수는 없습니다.
또한, Python 개발에 사용할 툴체인이 없다면 &lt;a href=&quot;https://tech.blog.aknin.name/2010/04/08/contributing-to-python/&quot;&gt;여기&lt;/a&gt;로 가서 두번째 (그리고 관련있는 다음)단락에서 말한 대로 하는 것이 좋을 것 입니다.&lt;/p&gt;
&lt;p&gt;여러분이 이미 알고 있는 것부터 시작해 봅시다.
그렇지만 적어도 제가 이해하는 바로는... 이해할 수 있는 모든 것은 중요하다고 생각합니다.
저는 Python을 기계를 처럼 봅니다.
Python의 경우는 (다른 인터프리터 언어와 마찬가지로) 가상머신위에서 동작하므로 더 이해하기 쉽습니다.
이 문맥에서 &lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Virtual_machine#Process_virtual_machines&quot;&gt;가상머신&lt;/a&gt;&lt;/em&gt;을 정확하게 이해하세요.
VirtualBox보다는 JVM과 같은것 으로 생각하세요
(매우 기술적인 관점에서 보면 둘은 같습니다, 하지만 현실 세계에서는 일반적으로 이 두 종류의 VM을 구별합니다).
저는 &lt;em&gt;가상머신&lt;/em&gt;을 문자 그대로 이해 하는 것이 가장 쉽다는 것을 알았습니다.
가상머신은 소프트웨어로 만들어진 기계입니다.
CPU는 단지 모든 입력값(기계어, 데이터)을 받고 상태값(레지스터)를 가지며 입력값과 상태에 따라 (RAM이나 버스에) 출력값을 보내는 복잡한 전자 기계입니다, 맞죠?
자, CPython은 상태값과 명령 처리방법을 가지고 있는 소프트웨어로 만들어진 기계입니다 (다른 구현체는 다소 다른 설명이 필요할 수도 있음).
이 소프트웨어 기계는 Python 인터프리터를 호스팅하는 프로세서에서 작동합니다.
이 점을 기억해 두세요. 저는 (&lt;a href=&quot;https://tech.blog.aknin.name/2010/07/04/pythons-innards-for-my-wife/&quot;&gt;여기서&lt;/a&gt; 상세히 설명한 것 처럼) &lt;a href=&quot;https://en.wikipedia.org/wiki/Turing_machine&quot;&gt;기계&lt;/a&gt;에 비유하는걸 좋아합니다.&lt;/p&gt;
&lt;p&gt;즉, 다음과 &lt;code class=&quot;language-text&quot;&gt;$ python -c &amp;#39;print(&amp;quot;Hello, world!&amp;quot;)&amp;#39;&lt;/code&gt; 같은 일을 할 때 일어나는 일에 대한 개요를 봅시다.
Python 바이너리가 실행됩니다,
표준 C 라이브러리 초기화는 거의 모든 프로세스에서 발생합니다
그리고 main 함수가 실행됩니다
(&lt;code class=&quot;language-text&quot;&gt;./Modules/python.c: main&lt;/code&gt;코드를 보세요, 곧 &lt;code class=&quot;language-text&quot;&gt;./Modules/main.c: Py_Main&lt;/code&gt;을 호출 합니다).
평범한 초기화 작업
(argument를 파싱하고, 환경변수가 동작에 영향을 주는지 확인하고, 표준 스트림&lt;sup id=&quot;fnref-5&quot;&gt;&lt;a href=&quot;#fn-5&quot; class=&quot;footnote-ref&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;에 접근하고 그에 따라 행동 하는 등등)을 마치고 나면
&lt;a href=&quot;https://docs.python.org/3/c-api/init.html#Py_Initialize&quot;&gt;./Python/pythonrun.c: Py_Initialize&lt;/a&gt;가 호출 됩니다.
여러가지 방법으로, 이 함수는 CPython 기계를 실행하는데 필요한 부품을 &apos;빌드&apos;하고 모아서 &apos;프로세스&apos;를 &apos;Python 인터프리터가 있는 프로세스&apos;로 만듭니다.
무엇보다도 두 가지 매우 중요한 &lt;em&gt;인터프리터 상태&lt;/em&gt;와 &lt;em&gt;스레드 상태&lt;/em&gt;에 관한 Python 데이터 구조를 생성합니다.
또한 내장 모듈 &lt;em&gt;sys&lt;/em&gt;와 모든 &lt;a href=&quot;https://docs.python.org/3/library/functions.html#built-in-functions&quot;&gt;내장 함수&lt;/a&gt;모듈을 호스팅 합니다.
이후 글들에서 이 모든 것들을 깊이 있게 다룰 것입니다.&lt;/p&gt;
&lt;p&gt;이 다음, Python은 실행 방법에 따라 다음 몇 가지 중 하나를 실행합니다.
대략적으로, 문자열을 실행하거나 (&lt;code class=&quot;language-text&quot;&gt;-c&lt;/code&gt; 옵션), 모듈을 실행파일로 실행하거나 (&lt;code class=&quot;language-text&quot;&gt;-m&lt;/code&gt; 옵션), (커맨드라인에서 명시적으로 전달되거나 스크립트의 인터프리터로 사용될 때 커널에 의해 전달된) 파일을 실행 하거나 또는 &lt;a href=&quot;https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop&quot;&gt;REPL 루프&lt;/a&gt;를 실행합니다
(이건 조금 특별한 경우로, 파일 실행이 대화형 인터프리터 위에서 일어나는 경우 입니다)를 실행합니다.
지금 저희는 &lt;code class=&quot;language-text&quot;&gt;-c&lt;/code&gt;를 사용해 하나의 문자열을 실행하는 경우를 따르고 있습니다.
이 단일 문자열을 실행하기 위해, &lt;code class=&quot;language-text&quot;&gt;./Python/pythonrun.c: PyRun_SimpleStringFlags&lt;/code&gt;가 호출 됩니다.
이 함수는 &lt;code class=&quot;language-text&quot;&gt;__main__&lt;/code&gt; &lt;em&gt;네임 스페이스&lt;/em&gt;를 만듭니다.
이 네임 스페이스는 우리의 문자열이 실행되는 곳 입니다
(만약에 &lt;code class=&quot;language-text&quot;&gt;$ python -c &amp;#39;a=1; print(a)&amp;#39;&lt;/code&gt;를 실행하면, 어디에 저장될까요? 여기에 저장됩니다.).
네임 스페이스가 생성 된 후 문자열은 그 위에서 실행됩니다.
이를 위해선 먼저 문자열을 기계가 작업할 수 있는 형태로 변환해야 합니다.&lt;/p&gt;
&lt;p&gt;앞서 말했듯이, 저는 Python의 파서/컴파일러 내부에 집중하지 않을 것입니다.
저는 컴파일러 전문가가 아니며,
컴파일러 내부에 별로 관심이 없습니다 그리고 제가 아는 한 Python은 CS(Computer Science) 컴파일 강의를 넘어서는 컴파일 후속 조치가 없습니다.
우리는 여기서 일어나는 일들에 대한 개요를 (매우)빠르게 살펴볼 것 입니다,
아마 나중에도 CPython의 동작을 명확히 볼 필요 있을때만 돌아올 것입니다 (파싱에 영향을 미치는 것으로 알려진 &lt;a href=&quot;https://docs.python.org/3/reference/simple_stmts.html#the-global-statement&quot;&gt;gloobal&lt;/a&gt;문을 참고하세요).
그래서, &lt;code class=&quot;language-text&quot;&gt;PyRun_SimpleStringFlags&lt;/code&gt;의 파서/컴파일러 단계는 크게 다음과 같습니다.
소스 코드를 토큰화 하고 &lt;a href=&quot;https://en.wikipedia.org/wiki/Concrete_syntax_tree&quot;&gt;구체 구문 트리&lt;/a&gt;(Concrete Syntax Tree, CST)를 만들고,
CST를 &lt;a href=&quot;https://en.wikipedia.org/wiki/Abstract_syntax_tree&quot;&gt;추상 구문 트리&lt;/a&gt;(Abstract Syntax Tree, AST)로 변환하고 마지막으로 &lt;code class=&quot;language-text&quot;&gt;./Python/ast.c: PyAST_FromNode.&lt;/code&gt;를 사용하여 AST를 &lt;em&gt;Code Object&lt;/em&gt;&lt;sup id=&quot;fnref-6&quot;&gt;&lt;a href=&quot;#fn-6&quot; class=&quot;footnote-ref&quot;&gt;6&lt;/a&gt;&lt;/sup&gt;로 컴파일 합니다.
지금은 Code Object를 Python VM의 기계가 작동할 수 있는 기계어 이진 문자열이라고 생각합시다.
이제 우리는 (다시, Python의 말로) 해석할 준비가 되어 있습니다.&lt;/p&gt;
&lt;p&gt;우리는 (거의) 빈 &lt;code class=&quot;language-text&quot;&gt;__main__&lt;/code&gt;을 가지고 있고, Code Object를 가지고 있으며, 이제 그것을 &lt;em&gt;평가&lt;/em&gt;하려고 합니다.
이제 뭘 할까요?
저희는 지금 이 라인의 &lt;code class=&quot;language-text&quot;&gt;Python/pythonrun.c: run_mod, v = PyEval_EvalCode(co, globals, locals);&lt;/code&gt; 역할울 하고 있습니다.
그것은 Code Object와 &lt;em&gt;전역&lt;/em&gt; 및 &lt;em&gt;지역&lt;/em&gt; 네임 스페이스를 받습니다
(우리의 경우, 둘 다 새로 생성된 &lt;code class=&quot;language-text&quot;&gt;__main__&lt;/code&gt; 네임 스페이스가 됩니다)
그리고 이것 들로 부터 &lt;em&gt;frame object&lt;/em&gt;를 작성해 실행합니다.
여러분은 &lt;code class=&quot;language-text&quot;&gt;Py_Initialize&lt;/code&gt;가 스레드 상태를 생성하며 이것에 대해 나중에 이야기 할 것이라고 한 걸 기억 하나요?
자, 다시 말씀 드리자면, 각각의 Python 스레드는 Python 스레드가 소유한 스레드 상태로 표현 되며, 스레드 상태는 (다른 것들 가운데서) 현재 실행중인 frame의 스택을 가리킵니다.
frame object가 생성되고 스레드 상태 스택에 배치된 후 &lt;code class=&quot;language-text&quot;&gt;./Python/ceval.c: PyEval_EvalFrameEx&lt;/code&gt; 코드에 의해 목적코드로 평가됩니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;PyEval_EvalFrameEx&lt;/code&gt;는 frame을 가져와 목적코드(만약 피연산자가 들어가 있다면 피연산자)를 생성하고, 목적코드와 일치하는 짧은 C코드를 실행합니다.
컴파일 된 Python 코드를 분해하여 이러한 &quot;목적코드&quot;가 어떻게 생겼는지 자세히 살펴 보겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis &lt;span class=&quot;token comment&quot;&gt;# 오! 편리한 역어셈블리 함수!&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;spam = eggs - 1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;string&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;exec&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_NAME                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eggs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; BINARY_SUBTRACT
              &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt; STORE_NAME               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spam&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;13&lt;/span&gt; RETURN_VALUE
&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... 심지어 Python 바이트 코드에 대해서 잘 알지 못한다고 해도, 이건 상당히 읽기 쉽습니다.
여러분은 &lt;code class=&quot;language-text&quot;&gt;eggs&lt;/code&gt;를 &quot;로드&quot; 했고(어디에서 로드 한 걸까요? 어디로 로드할까요? 곧 알려 드리죠),
상수 값 (1)을 로드 합니다,
그런 다음 &quot;바이너리 뺄셈(binary subtract)&quot;을 실행합니다
(이 문맥에서 &quot;바이너리(binary)&quot;는 무엇을 의미하나요? 피 연산자 사이에 있는 것들 인가요?).
그리고 기타 등등 작업을 합니다.
여러분들은 아마 짐작 했겠지만, 앞에서 살펴본 &lt;em&gt;전역&lt;/em&gt; 및 &lt;em&gt;지역&lt;/em&gt; 네임스페이스에서 변수가 &quot;로드&quot;되고,
그들은 피연산자 스택(실행중인 프래임의 스택과 혼동해서는 안 됨)에 로드 됩니다.
바이너리 뺄셈은 그들을 빼내고,
그중 하나를 다른 하나와 뺀다음 그 결과를 다시 피연산자 스택에 넣을 것 입니다.
&quot;바이너리 뺄셈&quot;은 두개의 피연산자가 있는 빼기 연산 코드를 의미합니다.
(이 이유로 &quot;바이너리 (binary)&quot;라고 부릅니다, 이것은 피연산자가 0, 1로 이루어진 이진수(binary number)를 말하는 것이 아닙니다)&lt;/p&gt;
&lt;p&gt;여러분은 &lt;code class=&quot;language-text&quot;&gt;./Python/ceval.c&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;PyEval_EvalFrameEx&lt;/code&gt;를 살펴볼 수 있으며,
그 함수는 어떤 의미로도 작다고 할 수 없습니다.
여러 실용적인 이유로 여기에 많은 코드를 붙여 넣을 수는 없지만,BINARY_SUBTRACT 목적코드가 발견되었을때 실행되는 코드를 분여 넣을 것 입니다.
저는 이 코드가 정말 잘 설명하고 있다고 생각합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;TARGET&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BINARY_SUBTRACT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    w &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;POP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    v &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TOP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PyNumber_Subtract&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; w&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;SET_TOP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DISPATCH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... 어떤 값을 가져오고,
(피연산자 스택의) 맨위를 기져오고,
C함수 &lt;code class=&quot;language-text&quot;&gt;PyNumber_Subtract()&lt;/code&gt;를 호출하고,
우리가 여전히 이해하지 못하는 (하지만 나중에 이해하게될) “Py_DECREF”을 양쪽 모두에게 호출하고,
스택의 상단을 뺄샘의 결과로 설정하고 (이전의 상단을 덮어씀)
마지막으로 x가 null이 아니면 이해할 수 없는 것을 (“DISPATCH”)합니다.
따라서 여전히 우리가 이해할 수 없는 것들이 있지만,
제 생각에는,
가능한 가장 낮은 레벨에서 Python이 두 숫자를 어떻게 뺄셈 하는지는 매우 분명해 보입니다.
그리고 여기까지 설명하는 데 고작 약 1,500 단어를 사용했습니다!&lt;/p&gt;
&lt;p&gt;frame이 실행되고, &lt;code class=&quot;language-text&quot;&gt;PyRun_SimpleStringFlags&lt;/code&gt;가 반환된 후,
메인 함수는 청소를 합니다 (특히, 나중에 우리가 논의할 &lt;a href=&quot;https://docs.python.org/3/c-api/init.html#Py_Finalize&quot;&gt;Py_Finalize&lt;/a&gt;).
표준 C 라이브러리 초기화 해제(deinitialization)작업이 완료되고,
프로세스가 종료됩니다.&lt;/p&gt;
&lt;p&gt;저는 이 글이 &quot;좋은&quot; 개요를 제공하여, 다른 글의 발판으로 사용되길 바랍니다.
우리는 Python의 다양한 영역에 대해 보다 구체적인 논의를 할 것 입니다.
우리는 다음과 같은 나중에 다시 설명하기로 약속한 몇 가지 용어를 가지고 있습니다.
인터프리터와 스레드 상태, 네임 스페이스, 모듈과 내장 객체, code와 frame object는 물론 &lt;code class=&quot;language-text&quot;&gt;BINARY_SUBTRACT&lt;/code&gt;구현에서 이해할 수 없었던,
&lt;code class=&quot;language-text&quot;&gt;DECREF&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;DISPATCH&lt;/code&gt;.
여기에 우리가 이 글 내내 &apos;이것&apos; 근처에서 춤을 추었지만 이름으로 부르지 않은 매우 중요한 &apos;유령&apos;용어도 있습니다. 객체 입니다.
CPython의 객체 시스템은 CPython이 어떻게 작동하는지 이해하는데 있어 핵심적인 역할을 합니다.
그리고 저는 이 시리즈의 다음글에서 다룰것이라고 생각하빈다. 계속지켜봐 주세요.&lt;/p&gt;
&lt;p&gt;또한 Python은 &lt;a href=&quot;https://en.wikipedia.org/wiki/Guido_van_Rossum&quot;&gt;Guido van Rossum&lt;/a&gt;에 의해 시작 되었지만,
많은 사람들이 수년 동안 Python 프로젝트와 파생 프로젝트에 &lt;a href=&quot;https://en.wikipedia.org/wiki/History_of_Python&quot;&gt;기여해 왔습니다&lt;/a&gt;.
저는 Guido나 다른 기여자들을 확인해본 적은 없지만,
저는 어떤 기여자들도 Guido 보다 Python을 명확하게 보지 못할 것이라고 확신합니다.&lt;/p&gt;
&lt;div class=&quot;footnotes&quot;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;역주 - Keanu Reeves는 메트릭스에서 Neo 역할을 맡아 연기했습니다. 매트릭스에 관한 비유 같습니다.&lt;/p&gt;
&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-2&quot;&gt;
&lt;p&gt;이 시리즈는 명시적으로 언급하지 않는 한 누구도 지지하거나 제휴되어 있지 않는 다는 점을 유의 하세요.&lt;/p&gt;
&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-3&quot;&gt;
&lt;p&gt;역주 - &lt;a href=&quot;https://www.python.org/dev/peps/pep-3000/&quot;&gt;Python 문서&lt;/a&gt;를 참고하세요&lt;/p&gt;
&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-4&quot;&gt;
&lt;p&gt;역주 - &lt;a href=&quot;https://en.wikipedia.org/wiki/CPython#Unladen_Swallow&quot;&gt;위키백과&lt;/a&gt; 구글이 후원한 CPython의 llvm JIT 구현체&lt;/p&gt;
&lt;a href=&quot;#fnref-4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-5&quot;&gt;
&lt;p&gt;역주 - &lt;a href=&quot;https://ko.wikipedia.org/wiki/%ED%91%9C%EC%A4%80_%EC%8A%A4%ED%8A%B8%EB%A6%BC&quot;&gt;위키백과&lt;/a&gt; 참고&lt;/p&gt;
&lt;a href=&quot;#fnref-5&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-6&quot;&gt;
&lt;p&gt;역주 - &lt;a href=&quot;https://docs.python.org/3/c-api/code.html&quot;&gt;Python 문서&lt;/a&gt; 참고&lt;/p&gt;
&lt;a href=&quot;#fnref-6&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[번역]Electron의 진화]]></title><description><![CDATA[이 글은  Cheng Zhao 의  Evolution of Electron…]]></description><link>https://blog.hanlee.io/2017/evolution-of-electron/</link><guid isPermaLink="false">https://blog.hanlee.io/2017/evolution-of-electron/</guid><pubDate>Mon, 03 Jul 2017 21:55:07 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;이 글은 &lt;a href=&quot;https://github.com/zcbenz&quot;&gt;Cheng Zhao&lt;/a&gt;의 &lt;a href=&quot;http://cheng.guru/blog/2016/11/13/evolution-of-electron.html&quot;&gt;Evolution of Electron&lt;/a&gt; (&lt;a href=&quot;http://cheng.guru/blog/2016/11/13/evolution-of-electron-japanese.html&quot;&gt;일본어 번역&lt;/a&gt;)을 허락을 받고 번역한 글 입니다. 오역 및 번역 제안은 댓글로 달아 주시면 감사하겠습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;5899341a59004c43b4f7823301ec04a6&quot; data-ratio=&quot;1.77777777777778&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;皆 さ ん こ ん に ち は(역주 - 여러분 안녕하세요), 저는 오늘 어떻게 Electron이 만들어 졌으며, 어떻게 인기를 얻어 갔는지 말씀 드리고자 합니다.&lt;/p&gt;
&lt;hr&gt;
그리고 Kohei TAKATA님의 번역에 감사드립니다, 덕분에 저는 이 강연을 일본어로 할 수 있습니다.
&lt;hr&gt;
우선, 제 소개를 조금 하겠습니다. 저는 3개의 이름을 가지고 있습니다,
중국인들은 저를 중국어로 ちょうせい(역주 - Chō sei) 라고 부릅니다.
미국에서는 제 이름의 영어 표기법을 따라 Cheng Zhao 이라고 부릅니다.
그렇지만 일본에서 제 이름은 제 영어 이름의 가타가나 표기인 ジャオ　チェン이 됩니다.
이 처럼 저는 같은 뜻의 이름을 3개 가지고 있습니다.
&lt;p&gt;저는 Electron의 창시자 입니다. 지금은 GitHub에서 일하고 있으며, 여전히 Electron 개발을 하고 있습니다.&lt;/p&gt;
&lt;hr&gt;
Electron에 대해 이야기 하기 전에, Atom editor의 이야기를 먼저 해야합니다.
Electron는 Atom 덕분에 만들어 졌으며, Electron의 초기 기술 선택은 주로 Atom의 요구에 따른 것 이었습니다.
&lt;hr&gt;
Atom editor의 첫번째 에디션은 5년 전에 만들어 졌습니다.
GitHub CEO가 메인 개발자 였습니다.
그것은 Electron을 사용하지 않았고,
시스템 내장 webview를 사용한 간단한 Cocoa 응용 프로그램 이었습니다.
&lt;hr&gt;
Atom 개발자가 좀 더 늘어난 뒤,
Atom은 네이티브 레이어를 Chromium Embedded Framework로 변경 하였으며,
Chromium과 V8 및 WebKit을 플랫폼으로 사용하기 시작했습니다.
CEF(역주 - Chromium Embedded Framework)는 모든 플랫폼에 Atom을 이식할 수 있게 해주었고,
모던 web 플랫폼을 제공했기 때문에 개발이 훨씬 쉬워졌습니다.
&lt;hr&gt;
그러는 사이 Node.js가 인기를 끌기 시작했고, node-webkit도 태어났습니다.
&lt;p&gt;node-webkit은 Atom과 매우 비슷한 길을 걷고 있었습니다. node-webkit의 첫번째 에디션은 Node.js symbol을 WebKit 브라우저에 추가한 Node.js 모듈 이었습니다.
제가 node-webkit 개발에 참여한 뒤에는,
node-webkit도 Chromium을 기반으로한 플랫폼이 되었습니다.&lt;/p&gt;
&lt;hr&gt;
따라서 Atom을 커스텀 네이티브 레이어에서 node-webkit으로 전환하려는 유혹이 매우 컸습니다.
그리고 Atom editor 개발자들은 실제로 node-webkit으로 포팅하려 시도했습니다.
&lt;p&gt;그 당시에 이미 Atom은 큰 코드베이스가 되어 있었습니다.
따라서 포팅 작업량이 엄청났으며, Atom은 커스텀된 네이티브 바인딩을 많이 사용하고 있었기 때문에,
개발자들은 그 코드들을 Node.js API와 node-webkit으로 바꿔야 했습니다.&lt;/p&gt;
&lt;p&gt;그렇지만, 결국 그 시도는 실패로 끝났습니다.&lt;/p&gt;
&lt;hr&gt;
실패의 원인은 많이 있었습니다. 그당시 node-webkit은 안정되지 않았고, 많은 중요한 기능이 없었습니다.
실패의 원인의 대부분은 node-webkit이 매우 어렸기 때문이며, 아무도 좋은 web 플랫폼은 어떤 모습이어야 하는지 몰랐기 때문입니다.
&lt;p&gt;Atom은 거대한 코드베이스 였기에, 한 번에 모든 코드를 바꾸는 것은 매우 어려운 작업이었던 것도 원인이었습니다.&lt;/p&gt;
&lt;hr&gt;
하지만 Atom이 node-webkit을 버렸다는 의미는 아니었습니다,
대신에 나온 해결책은 node-webkit 개발자를 고용해 node-webkit을 개선하는 것 이었습니다.
즉, 저를 고용했습니다.
그리고 그 사이에 저는 Atom을 새로운 플랫폼으로 전환하기 위한 더 나은 방법을 도울 필요가 있었습니다.
&lt;hr&gt;
그래서 Atom의 새로운 계획은 다음과 같습이 되었습니다.
제 첫 번째 작업은 CEF에 Node.js의 지원을 추가하는 것이 었습니다.
덕분에 Atom은 점차 기존 코드를 Node.js로 전환 할 수 있었습니다.
이 프로젝트는 CEF와 Node를 합친 말인 cefode라고 불렀고,
제 GitHub 계정에서 프로젝트를 찾을 수 있습니다.
&lt;p&gt;그 후, Atom 개발자들은 Node.js API를 사용하여 Atom을 개발하기 시작했습니다.
동시에 저는 Atom에게 더 나은 플랫폼이되도록 node-webkit을 계속 개선 했습니다.
일단 node-webkit이 충분히 성숙해 지면,
우리는 Atom을 node-webkit을 사용하도록 전환 할 수 있을 것이고,
잘 하면 손쉽게 전환 할 수도 있을 것 입니다.&lt;/p&gt;
&lt;hr&gt;
그러나 node-webkit 개선하는 중에, 저는 이 방식의 몇 가지 문제점을 깨닫기 시작했습니다.
첫째로, node-webkit의 아키텍처는 멀티 윈도우 응용 프로그램에는 적합하지 않았습니다.
node-webkit은 모든 응용 프로그램이 하나의 메인 창 만 가지고 있다고 가정하고 있었고,
하나의 응용 프로그램에서 여러창을 지원할때는 응용 프로그램의 코드는 엉망으로 변할 것 이었습니다.
이 문제를 해결하기 위해서는, node-webkit의 모든 API를 재 설계 해야했습니다.
&lt;p&gt;또다른 문제는, node-webkit는 어떤 조직이 아닌 개인 프로젝트 였고,
원저자는 프로젝트가 유명해진 후에 제가 프로젝트의 리더십을 맡기를 원하지 않았습니다.&lt;/p&gt;
&lt;p&gt;저는 모든 기술적인 결정을 원저자와 상의 해야 했습니다, 심지어 모든 제가 모든 코드를 작성 했더라도요.&lt;/p&gt;
&lt;hr&gt;
그래서 제게 남은 유일한 해결책은,
새 프로젝트를 시작하고 처음부터 node-webkit을 다시 작성하는 것이었습니다.
&lt;hr&gt;
그리하여 atom-shell이 태어났습니다.
atom-shell은 우리의 계획에서 node-webkit을 대체했습니다.
다시 (코드를) 작성하는데 오랜 시간이 걸렸지만, Atom에서는 꽤 잘 작동 했습니다.
&lt;hr&gt;
atom-shell과 node-webkit은 몇가지 큰 차이점이 있습니다.
atom-shell은 메인 프로세스에서 JavaScript를 실행할 수 있게 했습니다.
이것은 응용프로그램의 수명 주기를 스스로 관리 해야 하는 응용프로그램에게 매우 중요한 것이었습니다.
&lt;p&gt;또한 atom-shell은 Chromium 빌드를 온라인 서버로 분리 했습니다.
따라서 개발자는 로컬에서 Chromium을 빌드할 필요가 없습니다.
이것은 개발을 훨씬 더 쉽고 빠르게 해줬으며,
느린 기기를 사용하는 개발자도 atom-shell 개발에 기여 할 수 있도록 해줬습니다.&lt;/p&gt;
&lt;p&gt;마지막으로, 저는 Node.js를 Chromium에 통합하는 방법을 개선했습니다.
덕분에 더 이상 Chromium의 많은 부분을 패치 할 필요가 없었고,
Node.js 통합으로 인한 모든 충돌을 제거했습니다.&lt;/p&gt;
&lt;hr&gt;
요약하자면, atom-shell은 더 나은 디자인을 가지고 있었고, 기여자들에게 친화적이었습니다.
&lt;hr&gt;
그 뒤엔 상황이 일사천리로 진행되었습니다.
&lt;p&gt;atom-shell을 1 년간 개발한 후, Atom과 함께 오픈소스로 공개 했습니다.
그리고 1 년 후 atom-shell을 더 나은 이름인 Electron로 변경 했습니다.
그리고 올해 Electron 1.0을 릴리즈 했습니다.&lt;/p&gt;
&lt;hr&gt;
Electron는 계속 사용자를 늘려 가고 있고,
GitHub의 스타수도 2년만에 37,000개 이상 증가했습니다.
&lt;p&gt;이제는 거의 매일 같이 새로운 Electron 응용프로그램이 나오고 있고,
기업들도 Electron으로 프로그램을 만들고 있습니다.&lt;/p&gt;
&lt;hr&gt;
우리는 기여자들도 얻었습니다.
오늘날 우리는 25명의 커뮤니티 메인테이너와, 약 500명의 기여자가 있습니다.
최근 릴리즈에서는 변경사항의 절반 이상이 GitHub의 외부 기여자들에게서 발생했습니다.
&lt;hr&gt;
Electron 팀도 처음 저 뿐이었다가, 개발자가 4 명으로 늘었고,
더 많은 사람들을 Electron팀에 채용 하려고합니다.
&lt;hr&gt;
마지막으로, Electron이 크게 성장한 과정을 공유하고 싶습니다.
이것이 당신의 프로젝트에 도움이 되기를 바랍니다.
&lt;p&gt;Electron 개인 프로젝트로 시작되었으며, 처음에는 사용자가 Atom editor 밖에 없었습니다.
그러나 Electron이 성장함에 따라, 더 많은 사용자를 모았고,
부가적으로 더 많은 기여자를 얻게 되었습니다.
그들중 몇몇은 또는 오랬동안 메인테이너가 될 것입니다.&lt;/p&gt;
&lt;p&gt;더 많은 메인테이너를 보유하게 되면, 프로젝트는 더 커지고, 많은 사용자를 얻을 것 입니다.
이것은 눈덩이 계속 커지는 것과 같습니다.
그리고 성장의 핵심은 계속해서 더 많은 기여자를 얻는것 입니다.
만약 새로운 기여자를 얻을 수 없는 경우에는 그 프로젝트는 소규모로 머무르거나 끝나 버릴 것입니다.&lt;/p&gt;
&lt;hr&gt;
기여자을 유지하는 것에는, 두 가지 핵심 포인트가 있다고 생각합니다.
&lt;p&gt;먼저, issue나 pull request에 즉시 반응하는 것입니다.
그렇지 않으면 기여자가 될 수도 있는 사람들은 그들의 작업이 무시 되었다고 느끼고 그냥 돌아 설것 입니다.&lt;/p&gt;
&lt;p&gt;저는 Electron이 점을 잘 해내고 있다는 것을 자랑스럽게 생각하고 있습니다.
통계에 따르면 대부분의 issue나 pull request에 좋은 반응을 주었습니다.&lt;/p&gt;
&lt;p&gt;두 번째로, 보다 쉽게 개발할 수 있도록 노력해야 합니다.
이를 달성 하는 방법은 여러가지가 있으며, 우리는 개발 환경을 자동으로 만들어주는 스크립트를 제공하거나, 기여자에게 프로젝트를 더 잘 알 수 있도록 더 나은 코드 리뷰를하고,
기여자들이 쉽게 코드를 이해 할 수 있도록 리팩토링을 계속 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;대부분의 기여자들이 당신의 프로젝트를 깊이 이해하고 있는 것은 아닙니다.
우리가 코드를 더 쉽게 기여할 수 있도록 하면, 더 많은 사람들이 기여자가 되어 줄 것입니다.&lt;/p&gt;
&lt;p&gt;저는 Electron이 이것들을 아주 잘 해냈기 때문에 지금의 위치를 얻을 수 있었다고 생각합니다.&lt;/p&gt;
&lt;hr&gt;
이상입니다. 지금까지 들어주셔서 감사합니다.
&lt;hr&gt;
&lt;h2&gt;번역후기&lt;/h2&gt;
&lt;p&gt;JavaScript로 데스크탑 응용프로그램을 만드는 방법은 몇가지가 있지만 최근에는 Electron이 사실상의 표준이 되가는 것 같습니다.&lt;/p&gt;
&lt;p&gt;제가 처음 접한 JavaScript 데스크탑 응용프로그램 툴은 Adobe에서 만든 &lt;a href=&quot;https://github.com/adobe/brackets-shell&quot;&gt;Brackets-shell&lt;/a&gt;이었습니다.
Atom처럼 &lt;a href=&quot;http://brackets.io/&quot;&gt;Brackets&lt;/a&gt;에티터를 위해 만들어진 툴인데, Atom과 달리 Brackets만을 위해서 만들어지고 있습니다.
최근에는 Adobe 개발자들도 &lt;a href=&quot;https://github.com/electron/electron/issues/1582&quot;&gt;Electron에 관심을 보이는것 같습니다&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;저도 Electron으로 &lt;a href=&quot;https://github.com/sn0wle0pard/realm-browser-electron&quot;&gt;개인 프로젝트&lt;/a&gt;를 만들고 있습니다 :)&lt;/p&gt;
&lt;p&gt;이 글은 Electron이 만들어진 이유와 이런 기술들 속에서 높은 선호를 보이는 이유를 말하고 있어 번역했습니다.&lt;/p&gt;
&lt;p&gt;잘못된 내용이 있다면 언제든지 알려주세요. 확인후 반영하겠습니다 :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React, 강좌 0편 - React 소개]]></title><description><![CDATA[2016년 부터 현재까지 가장 화제가 되는 자바스크립트 라이브러리는 단연 React입니다. 본격적인 강좌에 앞서 React…]]></description><link>https://blog.hanlee.io/2017/react-lecture-00/</link><guid isPermaLink="false">https://blog.hanlee.io/2017/react-lecture-00/</guid><pubDate>Sun, 02 Jul 2017 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;2016년 부터 현재까지 가장 화제가 되는 자바스크립트 라이브러리는 단연 React입니다. 본격적인 강좌에 앞서 React에 대해 알아 봅시다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;동적 웹&lt;/h1&gt;
&lt;p&gt;웹이 점점 복잡해지면서 정적 웹에서 벗어나 동적 웹 페이지가 많아지고 있습니다. 동적 웹에서는 사용자는 웹 페이지에서 데이터를 변경하고, 웹페이지는 변경된 데이터에 따라 컨텐츠를 생성합니다.
&lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7a78d4c47f039c9b9eb773730fec338d/a5004/google-search.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 596px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 54.697986577181204%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdy5RQw//8QAGBAAAgMAAAAAAAAAAAAAAAAAEBEAATH/2gAIAQEAAQUCrQox/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAREhABD/2gAIAQEAAT8hOheLEE1czHP/2gAMAwEAAgADAAAAEEPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAQADAQAAAAAAAAAAAAAAAREAECEx/9oACAEBAAE/EFqEXnOaRfcKiCPcI14y6//Z&apos;); background-size: cover; display: block;&quot;
    &gt;&lt;/span&gt;
    &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;&quot;
        alt=&quot;구글검색&quot;
        title=&quot;&quot;
        src=&quot;/static/7a78d4c47f039c9b9eb773730fec338d/a5004/google-search.jpg&quot;
        srcset=&quot;/static/7a78d4c47f039c9b9eb773730fec338d/cd516/google-search.jpg 163w,
/static/7a78d4c47f039c9b9eb773730fec338d/de791/google-search.jpg 325w,
/static/7a78d4c47f039c9b9eb773730fec338d/a5004/google-search.jpg 596w&quot;
        sizes=&quot;(max-width: 596px) 100vw, 596px&quot;
      /&gt;
  &lt;/span&gt;
  &lt;/a&gt;
구글 검색을 예로 들어 보죠. 구글 검색은 검색어 추천을 제공해 주고 있습니다. 사용자가 단어를 입력하면 서버에 데이터를 요청 하고, 받아온 데이터를 토대로 추천 검색어를 보여줄 HTML을 그려냅니다.
이는 HTML 만으로는 불가능한 일이죠.&lt;/p&gt;
&lt;p&gt;따라서 자바스크립트의 역할은 점점 커지고 있습니다. 동적인 웹에서 자바스크립트는 &lt;em&gt;변하는 데이터&lt;/em&gt;에 맞추어 &lt;em&gt;적합한 컨텐츠&lt;/em&gt;를 생성하는 일을 해야 합니다.&lt;/p&gt;
&lt;h1&gt;React&lt;/h1&gt;
&lt;p&gt;React는 Facebook에서 만든 자바스크립트 라이브러리 입니다. React는 이름 처럼 데이터 변화에 잘 &lt;em&gt;반응&lt;/em&gt; 합니다. 데이터의 변화를 잘 파악하고 변경할 부분을 효과적으로 적용합니다.&lt;/p&gt;
&lt;h2&gt;DOM&lt;/h2&gt;
&lt;p&gt;우선 DOM이야기를 해보죠, DOM은 Document Object Model의 약자로, 문서 객체 모델이라고 합니다. HTML 및 XML 문서를 처리하기 위해 만들어진 API입니다.
브라우저는 HTML을 읽고 트리 형태의 DOM을 생성합니다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/DOM-model-da0650b86a0a52da2dddb6ac159ea301.svg&quot; alt=&quot;DOM&quot;&gt;
출처: &lt;a href=&quot;https://en.wikipedia.org/wiki/Document_Object_Model&quot;&gt;위키피디아&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Tip: DOM에 대해 더 알고 싶으시다면 &lt;a href=&quot;https://developer.mozilla.org/ko/docs/DOM&quot;&gt;모질라 개발 사이트&lt;/a&gt;를 추천 드립니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;동적인 웹에서 DOM의 문제점&lt;/h3&gt;
&lt;p&gt;DOM은 정적인 HTML에 맞추어져 있습니다. 따라서 동적 웹에서는자바스크립트를 통해 DOM을 관리해야 합니다.
이 때문에 기존에는 jQuery 등을 사용하여 데이터가 변경 되었을 때 변경될 필요가 있는 곳을 일일이 지정하고 업데이트 하였습니다.
그런데, 변경해야할 곳이 엄청나게 많다면요? Facebook과 같은 대규모 웹에서 일일이 id나 class를 지정하고 데이터를 변경하는 코드를 작성하는것은 매우 귀찮고 힘들 것 입니다.&lt;/p&gt;
&lt;p&gt;또한 브라우저는 DOM의 변화가 발생하면 다시 레이아웃과 스타일을 변경하는 과정을 거칩니다. 효율적으로 DOM을 조작하지 않는 다면 대규모 웹에서는 이 시간과 비용 또한 많이 발생할 것 입니다.&lt;/p&gt;
&lt;p&gt;그럼 데이터가 변경되면 자동으로 그리고 효과적으로 DOM을 변경할 수 있다면 어떨까요? React에서는 이 문제를 해결하기 위해 Virtual DOM을 도입 했습니다.&lt;/p&gt;
&lt;h2&gt;Virtual DOM&lt;/h2&gt;
&lt;p&gt;Virtual DOM은 자바스크립트로 만들진 가상 DOM 입니다. React Virtual DOM을 만들고 실제 DOM에 반영합니다.&lt;/p&gt;
&lt;p&gt;이때 Ract는 데이터가 변하면 자동으로 다시 렌더링 하는데, 우선 DOM을 직접 변경 하는게 아니라 Virtual DOM을 변경 합니다.
Virtual DOM은 실제로 렌더링 되지 않기 때문에 레이아웃의 크기 우선순위 등을 세세히 계산할 필요가 없어 비교적 빠르게 생성됩니다.
그 후 React에서는 기존 Virtual DOM과 비교하여 &lt;em&gt;변경된 부분만 DOM에 반영&lt;/em&gt;합니다. 이로 인해 React는 효과적으로 DOM을 변경합니다.&lt;/p&gt;
&lt;h2&gt;단방향 데이터 흐름&lt;/h2&gt;
&lt;p&gt;React와 데이터의 또다른 특징은 데이터는 항상 부모에서 자식 방향으로만 흐릅니다. 자식 컴포넌트에서 부모 컴포넌트로는 데이터를 &lt;em&gt;직접&lt;/em&gt; 전달 할 수 없습니다.&lt;/p&gt;
&lt;h2&gt;뷰만 담당하는 라이브러리&lt;/h2&gt;
&lt;p&gt;React는 MV* 패턴에서 오직 V만 담당 합니다. 그렇기에 UI 이외의 것들은 다른 자바스크립트 라이브러리를 조합하여 사용해야 합니다.&lt;/p&gt;
&lt;h2&gt;JSX&lt;/h2&gt;
&lt;p&gt;React를 특별한 템플릿 엔진을 사용하고 있지 않습니다. 이미 자바스크립트는 충분히 강력하기 때문 인데요. 대신에 JSX라는 일종의 자바스크립트/HTML 확장 문법을 제공합니다.
JSX는 Babel과 같은 도구로 자바스크립트로 컴파일 됩니다.&lt;/p&gt;
&lt;p&gt;예를 들어 이 JSX 코드는&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;greeting&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    Hello World &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;someValue&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 변환됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;h1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; className&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;greeting&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;Hello World &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  someValue
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;React는 JSX사용을 강제하지 않습니다. 순수 자바스크립트 만으로도 코딩을 할 수 있습니다. 하지만 위의 코드에서 볼 수 있듯 JSX를 사용하면 훨씬 깔끔한 코드를 만들 수 있습니다.&lt;/p&gt;
&lt;p&gt;참고로 이 코드에서 &lt;code class=&quot;language-text&quot;&gt;someValue&lt;/code&gt; 값이 변경되면 브라우저에는 자동으로 &lt;code class=&quot;language-text&quot;&gt;Hello World someValue값&lt;/code&gt;이 표시 됩니다.
이걸 기존의 자바스크립트로 구현하려면 셀렉터로 &lt;code class=&quot;language-text&quot;&gt;div&lt;/code&gt;를 선택하고 데이터가 변경될 때마다 업데이트를 해줘야 겠지요?&lt;/p&gt;
&lt;h1&gt;결론&lt;/h1&gt;
&lt;p&gt;React는 데이터 변화에 효과적으로 반응하는 UI를 만들 수 있는 자바스크립트 라이브러리 입니다. 점점 복잡해지는 웹 환경에서 React는 좋은 해결책이 될 것 입니다.&lt;/p&gt;
&lt;p&gt;글에 잘못된 점이 있다면 언제든지 알려주세요. 확인후 반영하겠습니다. :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[번역]React로 Multi-Step 가입 폼 만들기]]></title><description><![CDATA[이 글은  viget 의  Tommy Marshall 의 Building a Multi-Step Registration Form with React…]]></description><link>https://blog.hanlee.io/2017/building-a-multi-step-registration-form-with-react/</link><guid isPermaLink="false">https://blog.hanlee.io/2017/building-a-multi-step-registration-form-with-react/</guid><pubDate>Fri, 20 Jan 2017 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;이 글은 &lt;a href=&quot;https://www.viget.com&quot;&gt;viget&lt;/a&gt;의 &lt;a href=&quot;https://www.viget.com/about/team/tmarshall&quot;&gt;Tommy Marshall&lt;/a&gt;의&lt;a href=&quot;https://www.viget.com/articles/building-a-multi-step-registration-form-with-react&quot;&gt;Building a Multi-Step Registration Form with React&lt;/a&gt; 을 허락을 받고 번역한 글 입니다. 오역 및 번역 제안은 댓글로 달아 주시면 감사하겠습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;저희는 Viget에서 &lt;a href=&quot;http://facebook.github.io/react/&quot;&gt;React&lt;/a&gt;와 함께 일하는 것을 정말로 즐겼습니다. 저희는 React를 클라이언트 프로젝트, 개인 벤처 그리고 가장 최근에는 &lt;a href=&quot;https://viget.com/flourish/introducing-jambells-start-a-holiday-handbell-choir-with-your-phne&quot;&gt;Pointless Corp&lt;/a&gt;에 사용하였습니다.&lt;/p&gt;
&lt;p&gt;React의 가장 큰 특징 중 하나는 응용프로그램의 state를 처리하는 방법입니다. React 컴포넌트의 state가 업데이트 될 때마다, React는 업데이트 된 뷰를 다시 렌더링 합니다. 해석: React는 어떤 일이 일어 났을때 사용자에게 뭔가를 보여줄 필요가 있을때 아주 좋습니다.&lt;/p&gt;
&lt;p&gt;저는 컴포넌트의 state를 업데이트 하여 사용자가 어떤 단계에 있는지 표시한 후, 해당 단계에 적절한 필드를 표시하는 multi-step 폼이 이 기능을 보여주는 좋은 예라고 생각 했습니다. 시작하기 전에 우리가 무엇을 만들지 알아 보겠습니다.&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;http://codepen.io/tommymarshall/pen/yyMOzj&quot;&gt;CodePen 라이브 데모&lt;/a&gt;와 &lt;a href=&quot;https://github.com/tommymarshall/react-multi-step-form/&quot;&gt;GitHub Repo&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;현재 단계를 조금 더 확실하게 보여주기 위해 약간의 마크업과 CSS 및 진행바를 추가했습니다.
그외에는, 우리는 기본적으로 같은 것을 만들 겁니다.&lt;/p&gt;
&lt;h3&gt;시작하기&lt;/h3&gt;
&lt;p&gt;저희는 4단계 가입 과정을 만들었습니다. 사용자는 다음 과정을 거칠 것입니다:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;기본 계정 정보 입력&lt;/li&gt;
&lt;li&gt;간단한 설문응답&lt;/li&gt;
&lt;li&gt;올바른 정보를 입력했는지 확인&lt;/li&gt;
&lt;li&gt;성공 메시지 보기&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;주어진 단계에 관한 필드만 표시하는 쉬운 방법은 해당 내용을 개별 컴포넌트로 만드는 것 입니다. 그런 다음 사용자가 다음 단계로 이동하면 step state(역주-지금 어느 단계에 있는지 표시하는 state)를 1씩 증가 시킵니다. React는 step state의 변화를 보고 자동으로 컴포넌트를 재렌더링 하여 사용자가 원하는 것을 정확히 보여줍니다. 다음은 기본 코드 입니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// file: Registration.jsx&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; React         &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; AccountFields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./AccountFields&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; SurveyFields  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./SurveyFields&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; Confirmation  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./Confirmation&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; Success       &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./Success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; Registration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	getInitialState&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			step&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

	render&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;step&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;AccountFields&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;SurveyFields&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Confirmation&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Success&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Registration&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;step&lt;/em&gt; 이 1일 경우 (컴포넌트가 처음 로드 될 때) Account 필드를 보여줄 겁니다, 2일 경우에는 설문 조사 질문을 표시하고, 3일 경우 정보를 확인 하는 화면을, 마지막으로 4단계에서 성공 메시지를 표시합니다. 저는 CommonJS 패턴을 사용하여 이러한 컴포넌트를 구성할 것입니다. 이들 각각은 React 컴포넌트가 될 것입니다.&lt;/p&gt;
&lt;p&gt;다음으로, 사용자가 입력할 값을 저장할 객체를 만듭니다. 우리는 이름, 이메일, 비밀번호, 나이 및 좋아하는 색상 필드를 만들 겁니다. 여기선 이 정보를 상위 컴포넌트(Register.jsx)의 맨 위에 fieldValues로 저장하겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt; &lt;span class=&quot;token comment&quot;&gt;// file: Registration.jsx&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; fieldValues &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name     &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  email    &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  password &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  age      &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  colors   &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// The rest of our file&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사용자에게 표시되는 첫번째 컴포넌트인 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;AccountFields /&amp;gt;&lt;/code&gt;에는 새 계정을 만드는데사용되는 &lt;em&gt;이름, 비밀번호, 이메일&lt;/em&gt; 필드가 있습니다.
사용자가 &quot;Save and Continue&quot;를 클릭하면 데이터가 저장되고 회원 가입 과정의 두 번째 단계로 넘어갑니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// file: AccountFields.jsx&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; React &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; AccountFields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  render&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;label&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;label&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
             &lt;span class=&quot;token attr-name&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
             &lt;span class=&quot;token attr-name&quot;&gt;defaultValue&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;

      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;label&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;label&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
             &lt;span class=&quot;token attr-name&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
             &lt;span class=&quot;token attr-name&quot;&gt;defaultValue&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;

      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;label&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;label&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
             &lt;span class=&quot;token attr-name&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
             &lt;span class=&quot;token attr-name&quot;&gt;defaultValue&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;

      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saveAndContinue &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Save and Continue&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  saveAndContinue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// this.refs를 통해 값을 받습니다.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      name     &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;refs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDOMNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      password &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;refs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDOMNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      email    &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;refs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDOMNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nextStep&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; AccountFields&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;AccountFields /&amp;gt;&lt;/code&gt;&lt;/strong&gt; 에서 알아야 할 4가지 사항:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;em&gt;defaultValue&lt;/em&gt;는 input의 기본값을 설정합니다.
React는HTML에서 기본 input 값을 처리하는 방식의어색함을 해결하기 위해 &lt;em&gt;value&lt;/em&gt; 속성 대신에 이것을 사용합니다.
이 주제에 대해 더 자세히 읽으려면 &lt;a href=&quot;http://facebook.github.io/react/docs/forms.html#advanced-topics&quot;&gt;여기&lt;/a&gt;를 클릭하세요.&lt;/li&gt;
&lt;li&gt;우리는&lt;em&gt;defaultValue&lt;/em&gt;를 부모 컴포넌트의 등록 정보(Registration.jsx)에 전달되는&lt;em&gt;this.props.fieldValues&lt;/em&gt; 키와 연관시켰습니다. 이로 인해 사용자가 저장하고다음단계로 진행하여도 이전 단계로 돌아가면 이전에 입력한 내용이 표시됩니다&lt;/li&gt;
&lt;li&gt;우리는 refs를 사용해 DOM 노드를 참조하여 값을 얻고 있습니다. React에서 refs가 작동하는 방법을 보려면 &lt;a href=&quot;http://facebook.github.io/react/docs/more-about-refs.html#the-ref-attribute&quot;&gt;이 문서&lt;/a&gt;를 확인 하세요. 이 방법은 노드를 참고하는 더 쉬운 방법입니다.&lt;/li&gt;
&lt;li&gt;우리는 Registration 컴포넌트(부모)에 &lt;em&gt;saveValues&lt;/em&gt;와 &lt;em&gt;nextStep&lt;/em&gt;메소드를 만들어야 합니다. 그런 다음 이를 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;AccountFields /&amp;gt;&lt;/code&gt;&lt;/strong&gt;(자식)이 접근 할 수 있게 프로퍼티(property)로 전달해야 합니다. 그리고 2단계에서 이전 단계로 갈 수 있으므로 &lt;em&gt;previousStep&lt;/em&gt;도 만들어야 합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// file: Registration.jsx&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

saveValues&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 이 파일의 맨 위에 `fieldValues`가 있다는걸 기억하세요&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 우리는 단순히 `fieldValues`에 있는 키를 Object.assign을 사용하여`fleld`로 객체를 복사하고 있습니다&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign 를 참고하세요&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 역주 - 한국어 자료 https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/assign&lt;/span&gt;
    fieldValues &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fieldValues&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

nextStep&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    step &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;step &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// nextStep과 같지만 숫자를 감소시킵니다&lt;/span&gt;
previousStep&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    step &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;step &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기에서 새로 만든 메소드를 각각의 자식 컴포넌트에 프로퍼티로 전달하여 호출 할 수 있게 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// file: Registration.jsx&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

render&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;step&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;AccountFields&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fieldValues&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                            &lt;span class=&quot;token attr-name&quot;&gt;nextStep&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextStep&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                            &lt;span class=&quot;token attr-name&quot;&gt;saveValues&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saveValues&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;SurveyFields&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fieldValues&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                           &lt;span class=&quot;token attr-name&quot;&gt;nextStep&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextStep&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                           &lt;span class=&quot;token attr-name&quot;&gt;previousStep&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;previousStep&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                           &lt;span class=&quot;token attr-name&quot;&gt;saveValues&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saveValues&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Confirmation&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fieldValues&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                           &lt;span class=&quot;token attr-name&quot;&gt;previousStep&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;previousStep&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
                           &lt;span class=&quot;token attr-name&quot;&gt;submitRegistration&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;submitRegistration&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Success&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fieldValues&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fieldValues&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여러분은 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;AccountFields /&amp;gt;&lt;/code&gt;&lt;/strong&gt;는 첫번째 단계 이므로 &lt;em&gt;previousStep&lt;/em&gt;로 값을 전달 하지 않고, 이전 단계로 가지 않는 다는 것을 알게 될 것입니다. 또한 &lt;em&gt;saveValue&lt;/em&gt; 또는 &lt;em&gt;nextStep&lt;/em&gt;을 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Confirmation /&amp;gt;&lt;/code&gt;&lt;/strong&gt;에 전달하는 대신 새로 작성한 &lt;em&gt;submitRegistration&lt;/em&gt; 메소드를 전달합니다. 이 메소드는 사용자 입력값(&lt;em&gt;fieldValues&lt;/em&gt;)을 제출하고 step을 4로 늘려 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Success /&amp;gt;&lt;/code&gt;&lt;/strong&gt;를 표시합니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;SurveyFields /&amp;gt;&lt;/code&gt;&lt;/strong&gt;와  &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Confirmation /&amp;gt;&lt;/code&gt;&lt;/strong&gt;그리고 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Success /&amp;gt;&lt;/code&gt;&lt;/strong&gt; 컴포넌트에도 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;AccountFields /&amp;gt;&lt;/code&gt;&lt;/strong&gt;를 만드는 과정을 반복합니다. 간략히 하기 위해 코드는 &lt;a href=&quot;https://github.com/tommymarshall/react-multi-step-form/blob/master/src/javascript/components/SurveyFields.jsx&quot;&gt;여기&lt;/a&gt;와 &lt;a href=&quot;https://github.com/tommymarshall/react-multi-step-form/blob/master/src/javascript/components/Confirmation.jsx&quot;&gt;여기&lt;/a&gt; 그리고 &lt;a href=&quot;https://github.com/tommymarshall/react-multi-step-form/blob/master/src/javascript/components/Success.jsx&quot;&gt;여기&lt;/a&gt;서 확인 하실 수 있습니다.&lt;/p&gt;
&lt;h3&gt;데이터 저장시 주의 사항&lt;/h3&gt;
&lt;p&gt;사용자의 입력을 저장하고 전달하는 방식(&lt;em&gt;fieldValues={fieldValues}&lt;/em&gt;)에 주의하세요. 모든 컴포넌트에 이 방식을 매번 적용 해야 할까요? 이 데이터에 의존하는 더 많은 컴포넌트가 있거나 같은 화면에 여러 컴포넌트를 보여주어야 하는 상황을 생각해 보세요. 가장 최신 데이터를 보여줄 한가지 방법을 찾았지만 다른 방법은 없을까요? 보시다시피 위의 구현은 빠르게 지루해 지고 다루기 힘들어 집니다.&lt;/p&gt;
&lt;p&gt;저희는 Facebook이 &lt;a href=&quot;http://facebook.github.io/react/blog/2014/05/06/flux.html&quot;&gt;플럭스 스토어(Flux Store)&lt;/a&gt;라고 부르는 저장소에 데이터를 저장함으로써 이런 상황을 벗어날 수 있었습니다. 우리는 이 저장소를 사용함으로써 한곳에 데이터를 저장하고 데이터 변경에 반응하는 컴포넌트만 다시 렌더링 할 수 있었습니다. 플럭스의 작동 방식을 조금 더 배우고 싶다면 Pete Hunt의 &lt;a href=&quot;https://www.youtube.com/watch?v=nYkdrAPrdcw&amp;#x26;list=PLb0IAmt7-GS188xDYE-u1ShQmFFGbrk0v#t=621&quot;&gt;강연&lt;/a&gt;을 보는 것을 추천합니다.&lt;/p&gt;
&lt;h3&gt;결론&lt;/h3&gt;
&lt;p&gt;React는 사용자에게 무언가를 보여줄지 처리할때 매우 좋습니다. 이 예제에서 보여지는 부분은 입력 필드(간단한 마크업)이며, 해당 필드가 표시되는 때는 현재 step(Registration component의 state)에 의해 결정됩니다. 이 관계에 대해 생각하는 한가지는 state가 결정하는 모양 입니다. 응용프로그램의 상태에 따라 문자 하나 만큼의 작거나 완전히 다른 컴포넌트를 표시하는 등 다양한 방식으로 간단하고도 예측 가능한 방식으로 렌더링 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;React에 관한 질문이나 제가 한 작업에 대한 피드백이 있으시나요? 자유롭게 댓글로 달아주세요.&lt;/p&gt;</content:encoded></item></channel></rss>