<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[명시지 (形式知)]]></title><description><![CDATA[기록할 수 있는 지식을 나눕니다]]></description><link>https://blog.hanlee.io</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 15 Aug 2022 16:42:21 GMT</lastBuildDate><item><title><![CDATA[큰 비즈니스는 철학에서 나온다]]></title><description><![CDATA[…]]></description><link>https://blog.hanlee.io/2022/business-and-philosophy</link><guid isPermaLink="false">https://blog.hanlee.io/2022/business-and-philosophy</guid><pubDate>Wed, 02 Feb 2022 11:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이직을 하면서 더 큰 회사를 경험해보고 싶었고 더 큰회사는 어떻게 성장하고 있는지, 무엇이 다른지가 궁금하였다.
큰 회사를 만드는 여러 좋은 책과 자료가 많다.
아직 내 사업을 시작하지도 않아 이런글을 쓰는게 부끄럽지만, 지난 한 해 느낀 한 가지 다른 생각을 공유하고 싶었다.&lt;/p&gt;&lt;h2&gt;1조&lt;/h2&gt;&lt;p&gt;쿠팡에 대한 평가는 다양하겠지만, 적어도 쇼핑・물류 시장을 개편하고 있다&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;는 점은 큰 이견이 없을 것이다.&lt;/p&gt;&lt;p&gt;인터넷 쇼핑몰은 많지만, 쿠팡과 같은 사이즈는 드물다. 물론 쿠팡은 다른회사와 달리 막대한 투자를 하였다.
쿠팡이 물류센터에 투자한 금액은 약 1조원&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;이다. 하지만 영업이익이 1조가 되는 모든 회사들이 이와같은 과감함을 보여준다고 생각하진 않는다.
단적으로 유통분야에서도 1년 영업이익이 수천억원인 회사들도 있었다.&lt;/p&gt;&lt;p&gt;같은 시장과 자금이 있어도 어떤 회사는 큰 도전과 성과를 내는 반면 많은 회사는 그렇지 않는다.&lt;/p&gt;&lt;h2&gt;큰 비즈니스는 철학에서 나온다&lt;/h2&gt;&lt;p&gt;지금은 인터넷강의가 자연스러운 시대가 되어 큰 감흥이 없을 수도 있지만, 사실 인터넷 강의의 등장은 한국 교육계의 큰 사건이다.
누구나 집에서 유명 강사의 강의를 들을 수 있는 서비스의 탄생으로, 교육부가 수십 년 성공하지 못한 수도권과 지방의 교육격차를 해소하였다는 평가를 받기도 한다.&lt;/p&gt;&lt;p&gt;메가스터디 창업자 손주은 회장에 대해 알아보던중에 알게된 손주은 회장이 자주 인용하는 말이 인상 깊게 남았다.
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:500px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/91e84ec7a9248ecbd53f8761110f13fd/953fe/whiteboard.jpg&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:80.98159509202453%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB0KSzakw//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERAiEi/9oACAEBAAEFAtP1RsfBaqp//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAwEBAAAAAAAAAAAAAAAAARAhABH/2gAIAQEABj8CLvRoV//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVGh/9oACAEBAAE/IdI99lk39i3mNsjpkgWDEdZ//9oADAMBAAIAAwAAABD/AC//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxBX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAQADAAMAAAAAAAAAAAAAAREAIUFRYXH/2gAIAQEAAT8QWiBUi85qFPqs6C/cjMbQoh3mHmBZvWWkbOZ//9k=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;손주은 회장 칠판&quot; title=&quot;손주은 회장 칠판&quot; src=&quot;/static/91e84ec7a9248ecbd53f8761110f13fd/953fe/whiteboard.jpg&quot; srcSet=&quot;/static/91e84ec7a9248ecbd53f8761110f13fd/520c1/whiteboard.jpg 163w,/static/91e84ec7a9248ecbd53f8761110f13fd/45208/whiteboard.jpg 325w,/static/91e84ec7a9248ecbd53f8761110f13fd/953fe/whiteboard.jpg 500w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;큰 비즈니스는 철학에서 나온다 &lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h2&gt;더더더&lt;/h2&gt;&lt;p&gt;창업에 관심 많다면 Y Combinator (이하 YC)를 한번쯤은 들어봤을것이다.
Stripe, Airbnb, Dropbox, Coinbase등 유명 스타트업에 초기 투자한 최고의 스타트업 인큐베이터 및 액셀러레이터로 평가받는 투자사다.
YC의 창업자 폴 그레이엄은 &lt;a href=&quot;http://paulgraham.com/ace.html&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Billionaires Build&lt;/a&gt;란 글에서 &amp;#x27;억망장자가 되는 유일한 방법은 사람들을 착취하는것이다&amp;#x27;는 말에 반론을 가한다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;So that&amp;#x27;s what YC looks for in founders: authenticity. People&amp;#x27;s motives for starting startups are usually mixed. They&amp;#x27;re usually doing it from some combination of the desire to make money, the desire to seem cool, genuine interest in the problem, and unwillingness to work for someone else. The last two are more powerful motivators than the first two. It&amp;#x27;s ok for founders to want to make money or to seem cool. Most do. But if the founders seem like they&amp;#x27;re doing it just to make money or just to seem cool, they&amp;#x27;re not likely to succeed on a big scale. The founders who are doing it for the money will take the first sufficiently large acquisition offer, and the ones who are doing it to seem cool will rapidly discover that there are much less painful ways of seeming cool.&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;그래서 YC가 창업자들에게서 찾는 것은 진정성입니다. 스타트업을 시작하는 사람들의 동기는 일반적으로 혼합되어있습니다. 일반적으로 돈을 벌고자 하는 욕구, 멋있어 보이려는 욕구, 문제에 대한 진정한 관심, 다른 사람을 위해 일하고 싶지 않은 마음이 복합적으로 섞여 있습니다. 마지막 두 가지는 처음 두 가지보다 더 강력한 동기 부여 요인입니다. 창업자가 돈을 벌고 싶거나 멋있어 보이기를 바라는 것은 괜찮습니다. 창업자 대부분이 그렇습니다. 그러나 창업자가 단지 돈을 벌기 위해 또는 단지 멋있어 보이기 위해 하는 것처럼 보인다면 큰 규모로 성공할 가능성이 없습니다. 돈을 위해 창업을 하는 설립자들은 충분히 큰 첫 번째 인수 제안을 받아들일 것이고, 멋있어 보이기 위해 창업을 하는 사람들은 창업보다 훨씬 덜 고통스러운 방법이 있다는 것을 빠르게 발견할 것입니다. &lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;이건 미국의 사례이고 한국은 그렇지 않는다는 냉소적인 사람들도 있다. 개인적으론 냉소적인 시선에 동의하지 않는다.&lt;/p&gt;&lt;p&gt;한국에서 가장 유명한 VC중 하나인 알토스벤처스는 토스, 로블록스, 쿠팡, 배달의 민족, 당근마켓등 한국의 굵직한 유니콘에 초기투자한 회사이다.
알토스벤처스의 한킴 대표는 &amp;quot;더더더&amp;quot;로 유명하다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;김한준 대표는 스스로 ‘더더더’를 이렇게 정의한다. “우리는 여기서 조금 더 크는 것을 바라지 않는다. 몇십조 이상 되는 것을 원한다 (더더더). 그러려면 지금 욕심내서 매출∙이익 극대화 하지 않고 전 생태계를 발전시키도록 노력한다. 시장 자체가 커져야 우리도 훨씬 더 커질 수 있기 때문이다”&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;“매각 제안을 받아들이면 세후 1000억원, 평생 편하게 지낼 수 있는데”&lt;/p&gt;&lt;p&gt;“현금 500억원이 통장에 꽂히고 3년 경영권 보장해준다는데”&lt;/p&gt;&lt;p&gt;초우량 스타트업 창업자들은 기업가치 1000억원대를 넘어서며 겪는 극심한 내적갈등은 대략 2가지. 하나는 수차례 오프라인 대기업의 기업인수 제안으로 엑시트에 대한 유혹을 떨쳐버리지 못하며 겪는 극심한 내적 갈등이다.&lt;/p&gt;&lt;p&gt;두 번째 겪는 내적갈등은 매출 규모 200억원대, 회사 인원이 100명을 넘어서는 순간부터 겪는 규모의 경제에 대한 최고경영자로서의 한계와 지속적인 성장에 대한 두려움, CEO로서 느끼는 한계 등이 복합된 ‘CEO 성장통’이다.
실제 매출 100억원대를 넘어서며 극심한 고통을 겪는 CEO들이 상당수 있고, 자신은 매출 300억원대 이상 기업경영은 자신 없다며 매각을 고수했던 창업자들이 즐비했다. 심지어 오프라인 대기업의 인수합병 제안에 엑시트를 결정했던 포트폴리오 CEO들도 상당수다.&lt;/p&gt;&lt;p&gt;하지만 데이터를 제시하며, 거꾸로 더욱더 성장할 수 있고 심지어 유니콘 기업까지 클 수 있다고 확신하며 독려하는 알토스벤처스의 긴호흡의 투자 철학 덕에 여린 창업자들은 불과 창업 5,6년만에 탄탄한 경영수완을 갖춘 능력자 CEO로 빠르게 업그레이드하고 있다.&lt;/p&gt;&lt;p&gt;매출 200억원,직원수 100명선에 극심한 스트레스와 혼돈의 내적갈등을 겪던 스타트업 창업자들은 불과 5,6년만에 매출 3000억원대, 직원 수백명 체제를 거뜬히 이끄는 ‘초고속 학습능력’의 경영자로 속속 탈바꿈하고 있다.&lt;/p&gt;&lt;p&gt;김한준 대표의 ‘더더더’는 스타트업 생태계에 의미 있는 성장세만 확보한다면 펀딩과 추가 투자에 대한 자신감과 글로벌시장에 도전할 수 있다는 창업자의 ‘건강한 도전의식’을 만들어내는 결정적 역할을 하고 있다.&lt;/p&gt;&lt;p&gt;출처: &lt;a href=&quot;http://www.pitchone.co.kr/12019/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;[알토스벤처스 신드롬-②]한킴대표 ‘더더더’의 의미,신드롬비결 3가지&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;내가 느끼는 점도 이와 같다. 이미 충분히 성장한 회사라 창업자 개인은 더이상 일하지 않아도 충분한 돈이 생긴다면,
존재욕구&lt;sup id=&quot;fnref-4&quot;&gt;&lt;a href=&quot;#fn-4&quot; class=&quot;footnote-ref&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;를 충족한 이후에도 회사를 키워나갈 동력은 돈을 버는것 이상의 목적이 없다면 분명 힘들것이다.&lt;/p&gt;&lt;p&gt;물론 엑싯을 하는 것과 돈을 쫓는것은 &lt;a href=&quot;http://paulgraham.com/ace.html#f3n&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;폴그레이엄이 말한것&lt;/a&gt; 처럼 나쁜일도 아니고 오히려 대단한 성과라고 생각한다.
다만 큰 회사를 꿈꾼다면 돈을 버는것 이상의 꿈이 있어야한다고 생각한다.&lt;/p&gt;&lt;p&gt;여담으로 한킴 대표와 알토스벤처스에 대해 더 알고 싶다면 &lt;a href=&quot;https://www.folin.co/book/119&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;탁월한 창업가는 무엇이 다른가 : VC 한 킴이 발굴한 한국의 유니콘&lt;/a&gt; 시리즈를 추천한다 (유료기사).&lt;/p&gt;&lt;h1&gt;덤, Moonshot&lt;/h1&gt;&lt;p&gt;요즘 문샷이란 용어를 종종 듣게 된다. 문샷은 달착륙과 같이 &amp;quot;혁신적인 방법으로 어렵고도 큰 과제를 해결하려는 시도를 상징하는 용어&amp;quot;&lt;sup id=&quot;fnref-5&quot;&gt;&lt;a href=&quot;#fn-5&quot; class=&quot;footnote-ref&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;를 말한다.&lt;/p&gt;&lt;p&gt;미국의 달착륙은 우주 경쟁이 심화되면서 소련에 뒤쳐지고 있다고 평가되었던&lt;sup id=&quot;fnref-6&quot;&gt;&lt;a href=&quot;#fn-6&quot; class=&quot;footnote-ref&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; 분위기에서 승부를 뒤집기 위해 선택되었다. 그리고 이 모험은 케네디 대통령이 라이스대학에서 한 &amp;quot;We choose to go to the moon&amp;quot; 연설로 시작한다. &lt;/p&gt;&lt;iframe style=&quot;aspect-ratio:16 / 9&quot; src=&quot;https://www.youtube.com/embed/QXqlziZV63k?start=579&amp;amp;controls=0&quot; title=&quot;YouTube video player&quot; frameBorder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot; class=&quot;c-bHVmPA&quot;&gt;&lt;/iframe&gt;&lt;p&gt;10년 안으로 달착륙을 하겠다는 이 유명한 연설에서 개인적으로 가장 좋아하는 부분이 있다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;So it is not surprising that some would have us stay where we are a little longer to rest, to wait. But this city of Houston, this State of Texas, this country of the United States was not built by those who waited and rested and wished to look behind them. This country was conquered by those who moved forward--and so will space.&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;따라서 일부 사람들이 우리가 조금 더 쉬고 기다리도록 우리를 그곳에 머물게 하는 것은 놀라운 일이 아닙니다. 그러나 이 휴스턴이라는 도시, 이 텍사스 주, 이 미국이라는 나라는 기다리고 쉬고 뒤를 돌아보고자 하는 사람들에 의해 세워진 것이 아닙니다. 이 나라는 전진한 자들에 의해 정복되었으며 우주도 그러할 것입니다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;미국의 달착륙은 우수한 인재, 막대한 자금 그리고 분명 미국의 개척자 정신의 산물일 것이다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;But why, some say, the moon? Why choose this as our goal? And they may well ask why climb the highest mountain? Why, 35 years ago, fly the Atlantic? Why does Rice play Texas?&lt;/p&gt;&lt;p&gt;We choose to go to the moon, We choose to go to the moon. We choose to go to the Moon in this decade and do the other things, not because they are easy, but because they are hard.&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;그러나 어떤 사람들은 왜 달 인가요? 왜 달이 우리의 목표인가요? 라고 말할겁니다, 그리고 그들은 이렇게도 물었을겁니다, 왜 가장높은 산을 오르나요? 왜 35년 전에 대서양을 횡단 하였나요? 왜 라이스대학은 텍사스대학과 경기하나요?&lt;/p&gt;&lt;p&gt;우리는 달에 갈겁니다, 우리는 달에 갈겁니다. 우리는 10년안에 달에 갈 것이고 다른일도 할겁니다, 쉽기 때문이 아니라 어려운일이기 때문입니다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;그리고 또 하나 달 착륙, 큰 비즈니스는 어렵고 고통스러운 일이다. 그렇지만 어렵기 때문에 더 가치 있는 일 이기도 할 것이다.&lt;/p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;&lt;a href=&quot;https://www.newspim.com/news/view/20190814001451&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;[종목이슈] 유통업계 재편…지는 대형마트·뜨는 택배업체&lt;/a&gt;&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-2&quot;&gt;&lt;a href=&quot;https://biz.chosun.com/distribution/channel/2021/06/17/45HI6JV77RASFKTBELHFDO3VCA/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;쿠팡, 부산에도 물류센터 짓는다…누적 투자금액 1조원 넘어&lt;/a&gt;&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-3&quot;&gt;출처: &lt;a href=&quot;https://news.mt.co.kr/mtview.php?no=2012050918451863505&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;손주은 &amp;quot;큰 비즈니스는 철학에서 나온다&amp;quot;&lt;/a&gt; 머니투데이&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-4&quot;&gt;기본적인 욕구로 음식, 공기, 물, 임금 그리고 작업조건과 같은 것에 대한 욕구 - &lt;a href=&quot;https://ko.wikipedia.org/wiki/ERG_%EC%9D%B4%EB%A1%A0#%EC%A1%B4%EC%9E%AC%EC%9A%95%EA%B5%AC(Existence_needs)&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;출처&lt;/a&gt;&lt;a href=&quot;#fnref-4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-5&quot;&gt;&lt;a href=&quot;https://www.mk.co.kr/opinion/contributors/view/2021/01/76971/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;[매경시평] 문샷 프로젝트를 추진하자&lt;/a&gt;&lt;a href=&quot;#fnref-5&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-6&quot;&gt;당시 소련은 인류의 첫 인공위성, 첫 유인발사, 첫 우주유영을 성공시킨 상황이었다.&lt;a href=&quot;#fnref-6&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[웹을 위한 더 나은 압축 - Brotli]]></title><description><![CDATA[웹사이트에서 용량은 매우 중요합니다. 많은 웹사이트에서 빠른 전송 속도를 위해 gzip으로 압축하고 있습니다. 그런데 웹 브라우저가 지원하는 압축 알고리즘 중에는 gzip 보다 더 효율적인 압축도 있습니다. Brotli 는 구글이 201…]]></description><link>https://blog.hanlee.io/2021/brotli</link><guid isPermaLink="false">https://blog.hanlee.io/2021/brotli</guid><pubDate>Sat, 28 Aug 2021 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;웹사이트에서 용량은 매우 중요합니다. 많은 웹사이트에서 빠른 전송 속도를 위해 gzip으로 압축하고 있습니다.&lt;/p&gt;&lt;p&gt;그런데 웹 브라우저가 지원하는 압축 알고리즘 중에는 gzip 보다 더 효율적인 압축도 있습니다.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/google/brotli&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Brotli&lt;/a&gt;는 구글이 2013년에 공개한 압축 알고리즘입니다.
현재 &lt;a href=&quot;https://caniuse.com/brotli&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;IE를 제외한 대부분 브라우저&lt;/a&gt;에서 지원하며, gzip에 비해 &lt;a href=&quot;https://www.siteground.com/blog/brotli-compression/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;최대 15-20% 더 적은 용량&lt;/a&gt;으로 압축할 수 있습니다.&lt;/p&gt;&lt;p&gt;Brotli은 어떻게 gzip 보다 더 나은 압축을 제공해주는 걸까요?&lt;/p&gt;&lt;h1&gt;압축&lt;/h1&gt;&lt;p&gt;압축에는 손실 압축, 무손실 압축 두가지 종류가 있습니다.&lt;/p&gt;&lt;h2&gt;손실 압축&lt;/h2&gt;&lt;p&gt;손실 압축의 좋은예는 mp3 입니다. 인간은 들을수 있는 주파수(가청 주파수)가 한정되어 있습니다.
들을 수 없는 주파수 데이터를 지운다면 용량은 줄어들지만 차이를 느끼지 못할겁니다. &lt;/p&gt;&lt;p&gt;이렇듯 원본과 조금 달라도 괜찮은 이미지, 영상, 음원에는 손실 압축이 많이 사용됩니다.&lt;/p&gt;&lt;h2&gt;무손실 압축&lt;/h2&gt;&lt;p&gt;하지만 자바스크립트, HTML은 압축후에도 원본을 유지해야합니다.
텍스트에서 무손실 압축은 반복되는 단어를 사전으로 만드는 것과 같습니다. 별 헤는 밤의 일부분을 압축하며 설명해보겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;별 하나에 추억과
별 하나에 사랑과
별 하나에 쓸쓸함과
별 하나에 동경과
별 하나에 시와
별 하나에 어머니, 어머니,&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;시에선 &lt;code&gt;별 하나에 &lt;/code&gt;와 &lt;code&gt;어머니,&lt;/code&gt;가 반복되는걸 볼 수 있습니다. &lt;code&gt;별 하나에&lt;/code&gt;를 &lt;code&gt;✩&lt;/code&gt;로, &lt;code&gt;어머니,&lt;/code&gt;를 &lt;code&gt;⺟&lt;/code&gt;로 바꿔보죠&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;✩추억과
✩사랑과
✩쓸쓸함과
✩동경과
✩시와
✩⺟ ⺟&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이렇게 자주 반복되는 단어를 더 짧은 단어로 수정하면 글자수가 줄어들게 됩니다.
압축 알고리즘은 이렇게 반복되는 단어를 더 짧은 단어로 치환하고, 사전을 함께 묶어 파일로 만듭니다.
압축을 풀때는 사전을 이용해 원래 문장으로 복구하는 것이죠.&lt;/p&gt;&lt;p&gt;여러 압축 알고리즘은 &amp;#x27;좋은 사전을 얼마나 빨리 만드는가?&amp;#x27;를 달성하기 위해 노력합니다.
재미있는 사실은 사전을 만들때 자주 반복되는 단어가 가까이 있을 수록 더 효율적으로 압축할 수 있어, &lt;a href=&quot;https://stackoverflow.com/questions/50578582/does-alphabetically-sorting-css-properties-will-give-any-benefit-in-gzip-and-bro&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;CSS 속성을 어떻게 정렬하는가&lt;/a&gt;도 압축효율에 영향을 줄 수 있습니다.&lt;/p&gt;&lt;h1&gt;더 나은 사전 만들기&lt;/h1&gt;&lt;p&gt;여기서 Brotli 압축의 재미있는 아이디어가 나옵니다.&lt;/p&gt;&lt;p&gt;웹에선 반복되는 단어가 많습니다. HTML에서는 &lt;code&gt;div&lt;/code&gt;, &lt;code&gt;a&lt;/code&gt;와 같은 태그들, 자바스크립트에서는 &lt;code&gt;function&lt;/code&gt;, &lt;code&gt;let&lt;/code&gt;과 같은 예약어와 &lt;code&gt;Math&lt;/code&gt; &lt;code&gt;fetch&lt;/code&gt;와 같은 Web API, CSS에서는 각종 CSS 속성들이 반복되어 사용되죠.&lt;/p&gt;&lt;p&gt;Brotli는 이런 웹에서 자주사용되는 단어로 미리 사전을 만들어두었습니다. 자주 사용되는 단어들인 만큼 효율적인데다가, 이 사전은 브라우저에서 미리 가지고 있도록해 사전의 용량도 추가적으로 줄일 수 있습니다.
범용적이진 않지만, 웹에서는 그야말로 딱인 압축 방법이지요. (참고로 Brotli는 동적인 사전 또한 가지고 있습니다.)&lt;/p&gt;&lt;p&gt;이러한 이유로 Brotli는 반복되는 태그가 많은 HTML에서 가장 좋은 효율을 보입니다.&lt;/p&gt;&lt;h1&gt;Brotli 사용하기&lt;/h1&gt;&lt;p&gt;Brotli를 사용할 수 있다면, 웹 브라우저에서는 &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Content-Encoding&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Accept-Encoding&lt;/a&gt; 헤더값으로 &lt;code&gt;br&lt;/code&gt;을 넣어서 전달합니다.&lt;/p&gt;&lt;p&gt;지금 사용하시는 웹브라우저의 개발자도구를 켜시면 대부분 &lt;code&gt;Accept-Encoding: gzip, br&lt;/code&gt; 헤더가 전달되는 것을 보실 수 있습니다.
서버에서는 이 헤더 값을 기준으로 사용할 수 있을때 Brotli로 압축하여 전달하면 됩니다.&lt;/p&gt;&lt;h2&gt;AWS&lt;/h2&gt;&lt;p&gt;AWS를 사용하신다면 &lt;a href=&quot;https://aws.amazon.com/ko/about-aws/whats-new/2020/09/cloudfront-brotli-compression/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;작년 9월 부터 CloudFront에서 지원하고 있어&lt;/a&gt; 간단히 사용하실 수 있습니다.&lt;/p&gt;&lt;p&gt;지금 다니고 있는 회사에서도 Brotli 압축을 사용하는데, 사실 여러 벤치마크에서 처럼 드라마틱한 효과를 보진 못했습니다. 대략 5% 정도 더 효율적 이었던 걸로 기억합니다.
하지만 간단히 용량을 줄일 수 있는 몇 안되는 방법이며, 대규모 트래픽이 몰리는 서비스에선 분명히 비용개선에 도움이 될 것이라 생각합니다.&lt;/p&gt;&lt;p&gt;더 많은 웹사이트에서 Brotli 압축을 보면 좋겠습니다 :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JavaScript Bundle Diet]]></title><description><![CDATA[그동안 항상 공유하고 싶던 내용을 운 좋게  Slash 21 에서 공유할 수 있었다. 시간이 나면 더 자세한 내용을 정리할 계획이다.]]></description><link>https://blog.hanlee.io/2021/javascript-bundle-diet</link><guid isPermaLink="false">https://blog.hanlee.io/2021/javascript-bundle-diet</guid><pubDate>Thu, 29 Apr 2021 15:19:00 GMT</pubDate><content:encoded>&lt;iframe style=&quot;aspect-ratio:16 / 9&quot; src=&quot;https://www.youtube.com/embed/EP7g5R-7zwM?controls=0&quot; title=&quot;YouTube video player&quot; frameBorder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot; class=&quot;c-bHVmPA&quot;&gt;&lt;/iframe&gt;&lt;p&gt;그동안 항상 공유하고 싶던 내용을 운 좋게 &lt;a href=&quot;https://toss.im/slash-21/sessions/3-2&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Slash 21&lt;/a&gt;에서 공유할 수 있었다.&lt;/p&gt;&lt;p&gt;시간이 나면 더 자세한 내용을 정리할 계획이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[공리(公理) 정하기]]></title><description><![CDATA[…]]></description><link>https://blog.hanlee.io/2019/axiom</link><guid isPermaLink="false">https://blog.hanlee.io/2019/axiom</guid><pubDate>Sun, 15 Dec 2019 11:00:00 GMT</pubDate><content:encoded>&lt;h1&gt;들어가기전&lt;/h1&gt;&lt;p&gt;엄밀하게 말할경우, 논리학에서 말하는 명제와, 공리 모두 맞지 않다. 비유로 생각하고 읽어 달라.&lt;/p&gt;&lt;h1&gt;들어가며&lt;/h1&gt;&lt;p&gt;운이 좋게 프론트팀을 리드하게 되었다.&lt;/p&gt;&lt;p&gt;팀을 리드하게되면, 규칙을 정하는 일이 생긴다.
최대한 적은 규칙으로 동작하는 팀을 만들고 싶었다.&lt;/p&gt;&lt;h1&gt;통제가 아닌 맥락을 전달하라&lt;/h1&gt;&lt;p&gt;예를 들어, 팀에서 정한 두 규칙은 다음과 같다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;세미콜론을 사용할 것인가?&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Trailing_commas&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Trailing commas&lt;/a&gt;를 강제할것인가?&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이 두 상황은 비교적 명확한 답이 있었고, 합의 끝에 규칙을 정할 수 있었다.&lt;/p&gt;&lt;p&gt;하지만 더 곤란한 문제도 생겼다. &lt;em&gt;함수 선언을 어떤 방법으로 할 것 인가?&lt;/em&gt;라는 문제 였다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 1.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 2.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; bar &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 1.&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 2.&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;함수인자가 3개 이상이거나, optional한 인자가 많다면 후자가 더 적합할 거란 &lt;em&gt;의견&lt;/em&gt;을 덛붙였지만,
이 문제에 대해선 모호한 결론을 냈는데, &lt;em&gt;상황에 따라 적합한 방법을 사용하자&lt;/em&gt; 였다.&lt;/p&gt;&lt;p&gt;나는 종종 코드리뷰에서 한가지 일을 하는데에는 가능하면 한가지 방법을 사용할 것을 요청했기 때문에, 결론에 약간의 의아함을 느끼는 경우도 있었는데, 사실 규칙보다는 다음의 원칙을 전달 하고 싶었다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;코드는 읽기 쉬워야 한다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;사실 위의 조건만 만족된다면, 세미콜론도, Trailing commas도 &lt;em&gt;팀이&lt;/em&gt; 어떠한 방법을 택하던 괜찮았던 문제 였다.&lt;/p&gt;&lt;p&gt;나는 &lt;em&gt;원칙&lt;/em&gt;아래서 라고 표현했고,
넷플릭스에서는 이를&lt;a href=&quot;https://www.slideshare.net/watchncompass/freedom-responsibility-culture/83&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;&lt;strong&gt;규칙&lt;/strong&gt;이 아닌 &lt;strong&gt;맥락&lt;/strong&gt;을 전달하라&lt;/a&gt;고 설명한다.&lt;/p&gt;&lt;p&gt;리딩을 하면서 드는 고민은 과연 어떤것이 &lt;strong&gt;맥락&lt;/strong&gt;이 되어야하며, 어떤것이 &lt;strong&gt;세부사항&lt;/strong&gt;이 되어야 하는지의 고민이었고, 생각 끝에 흥미로운 비유가 생각났다.&lt;/p&gt;&lt;p&gt;우리는 &lt;strong&gt;공리&lt;/strong&gt;를 정하고 있는 것 이었다.&lt;/p&gt;&lt;h1&gt;공리(公理)&lt;/h1&gt;&lt;blockquote&gt;&lt;p&gt;증명없이 참으로 받아들이는 명제&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;무엇인가를 증명하기 위해서는 정의(定義)가 필요하고, 가정이 필요하다. 이를 타고타고 올라가면 결국 증명할 수 없지만 참이라 받아들여야하는 명제들을 만나게 된다. 이를 공리라고 한다.
수학에서는 한 체계를 만들기 위해선, 필수적으로 공리를 정해야한다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;유클리드 기하학의&lt;/code&gt; 5가지 공리를 살펴보자&lt;/p&gt;&lt;h1&gt;유클리드 기하학의 공리&lt;/h1&gt;&lt;p&gt;유클리드 기하학은 5가지 공리위에 구축되었다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;어떤 한 점에서 어떤 다른 한 점으로 선분을 그릴 수 있다.&lt;/li&gt;&lt;li&gt;임의의 선분을 선을 따라 다른 선분으로 연장할 수 있다.&lt;/li&gt;&lt;li&gt;어떤 한 점을 중심으로 하고 이에 대한 거리(반지름)로 하나의 원을 그릴 수 있다.&lt;/li&gt;&lt;li&gt;모든 직각은 서로 같다.&lt;/li&gt;&lt;li&gt;두 직선이 한 직선과 만날 때, 같은 쪽에 있는 내각의 합이 2직각(180˚)보다 작으면 이 두 직선을 연장할 때 2직각보다 작은 내각을 이루는 쪽에서 반드시 만난다.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;이 중 마지막을 평행선 공리라고 한다. 평행선 공리는 다음과 동치이다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;직선 밖의 한 점을 지나 그 직선에 평행한 직선은 단 하나 존재한다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;당연하게 느껴지는 5가지 명제지만, 이는 정의(定義)도 아니며, 증명할 수도 없다.
우리는 5가지 명제를 참이라 받아들이고 유클리드 기하학을 쌓아 올릴 수 있었다.&lt;/p&gt;&lt;p&gt;예를 들어 &lt;em&gt;삼각형 내각의 합은 180˚이다&lt;/em&gt;의 명제는 위 공리를 이용해 증명이 되었다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f153f34fe957bf6c782a4a2ae9de896a/bbbf7/corresponding-angles.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:78.52760736196319%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAElEQVQ4y63TS0sDUQwF4G+sVGwXKtZWF1LxWR8g6kJRceMDEcWdiLh04Ur//04uZGAsHZxOPRAS7s2c3JxkqI+p8Js4iDiblGwd96MSsgqWMItWxGtDZLVet4d5rOCl5GEa2AodHrGP3RJLOQ/4whOOMcB2aLmQ69FBD+dYRrdgvfAbUfA9Pj7DUtx3Im6O024iuYl4Dv2q0yuK2wifWror06wqcbewGrclG/Encg0Wo6XU5tsY2kznwSAm9oFTXOAV3zHNdHYUOaPsECe4zAln0I4dS6P/DKJVXEXlVix2mTULmv9CqvZc0Ktd5w/ICq1fmxA52c7QNCdG/z9YfgCfAxHi65xjTwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;e와 a는 동위각 이다, e와 c는 엇각이다&quot; title=&quot;e와 a는 동위각 이다, e와 c는 엇각이다&quot; src=&quot;/static/f153f34fe957bf6c782a4a2ae9de896a/663f3/corresponding-angles.png&quot; srcSet=&quot;/static/f153f34fe957bf6c782a4a2ae9de896a/5e043/corresponding-angles.png 163w,/static/f153f34fe957bf6c782a4a2ae9de896a/e5cc6/corresponding-angles.png 325w,/static/f153f34fe957bf6c782a4a2ae9de896a/663f3/corresponding-angles.png 650w,/static/f153f34fe957bf6c782a4a2ae9de896a/d880f/corresponding-angles.png 975w,/static/f153f34fe957bf6c782a4a2ae9de896a/bbbf7/corresponding-angles.png 1280w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이중 평행선 공리를 이용하여, 동위각의 크기는 같음을 증명할 수 있다. (재귀법을 이용하여 증명한다)
동위각의 크기가 같음을 이용하여 엇각의 크기가 같음을 증명할 수 있다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:461px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/725560c7f9442bee7e46d57127bfa554/7967d/triangle.jpg&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:43.558282208588956%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3NiqP/xAAXEAADAQAAAAAAAAAAAAAAAAAAASBB/9oACAEBAAEFAmbH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAMQAg/9oACAEBAAY/Amc//8QAHBAAAgICAwAAAAAAAAAAAAAAASEAERBBUYGx/9oACAEBAAE/IQBKp3NVr2AB1y3kbn//2gAMAwEAAgADAAAAELAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIRBRMbHR/9oACAEBAAE/EEcq8kQiGC19Oo6xvYuHHdP/2Q==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;삼각형 내각의 합은 180˚이다&quot; title=&quot;삼각형 내각의 합은 180˚이다&quot; src=&quot;/static/725560c7f9442bee7e46d57127bfa554/7967d/triangle.jpg&quot; srcSet=&quot;/static/725560c7f9442bee7e46d57127bfa554/520c1/triangle.jpg 163w,/static/725560c7f9442bee7e46d57127bfa554/45208/triangle.jpg 325w,/static/725560c7f9442bee7e46d57127bfa554/7967d/triangle.jpg 461w&quot; sizes=&quot;(max-width: 461px) 100vw, 461px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;
그리고 엇각의 크기가 같음을 이용해, 삼각형 내각의 합은 180˚임을 증명할 수 있다.&lt;/p&gt;&lt;p&gt;삼각형 내각의 합도, 피타고라스의 정리도 다양한 법칙들은 위의 5가지 공리를 바탕으로 증명되었다.&lt;/p&gt;&lt;p&gt;따라서 &lt;em&gt;삼각형 내각의 합은 180˚이다&lt;/em&gt;, &lt;em&gt;직각삼각형의 빗변이 아닌 변의 제곱의 합은 빗변의 합과 같다&lt;/em&gt;
이 두 명제를 굳이 공리에 추가하지 않아도 유클리드 기하학을 만들수 있다.&lt;/p&gt;&lt;p&gt;이 처럼 공리는 다른 명제를 설명할 수 있다면 최소한 으로 정할 수 있다.&lt;/p&gt;&lt;p&gt;나는 수학에서의 공리처럼 가능한 적은 규칙을 정하길 원했고, 가능하면 다른 규칙들은 미리 정해둔 규칙에 의해서 자연스럽게 정해지길 원했다.&lt;/p&gt;&lt;p&gt;그럼 프로그래밍의 공리를 하나 정의해보자.&lt;/p&gt;&lt;h1&gt;프로그래밍의 공리&lt;/h1&gt;&lt;p&gt;가장 먼저 생각난 공리는&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;코드는 읽기 쉬워야 한다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;였다. 이 문장으로 많은 것을 설명 할 수 있기 때문이다.&lt;/p&gt;&lt;p&gt;앞서 언급한 문제를 생각해보자.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;세미 콜론을 사용하지 말아야 한다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;일반적인 상황에서는 세미콜론 유/무로 가독성이 크게 차이나지 않는다.&lt;/p&gt;&lt;p&gt;하지만 코드리뷰할때는 달라진다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 코드 뒤에 &lt;code&gt;.barz()&lt;/code&gt;함수를 chaining 한다고 생각해보자.&lt;/p&gt;&lt;h2&gt;세미콜론을 사용할때&lt;/h2&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;diff&quot;&gt;&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;foo()
&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt; .bar();
&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt; .bar()
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt; .barz();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;세미콜론을 사용하지 않을때&lt;/h2&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;diff&quot;&gt;&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;foo()
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt; .bar()
&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt; .barz()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;세미콜론을 사용하지 않았을때, 더 깔끔한 diff를 확인 할 수 있다! 마찬가지 이유로 &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Trailing_commas&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Trailing commas&lt;/a&gt;를 사용하는게 더 읽기 쉬운 diff를 제공해 준다.&lt;/p&gt;&lt;p&gt;마찬가지로 어떤 함수 선언을 사용하더라도, 읽기 쉬운 아름다운 코드가 나온다면 받아들일수 있다.
좀 더 많은 공리를 원한다면 &lt;a href=&quot;https://www.python.org/dev/peps/pep-0020/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Zen of Python&lt;/a&gt;을 한번 참고해보자.&lt;/p&gt;&lt;p&gt;그런데, 수학과 달리 현실은 &lt;em&gt;증명&lt;/em&gt;이 모호하다. 위에서 말한 선택에도 동의하지 못할 수 있다.
또한, 여러 상황을 모두 설명할 수 있는 공리들은 수학에서조차 불가능 하다.&lt;/p&gt;&lt;h1&gt;힐베르트의 꿈&lt;/h1&gt;&lt;p&gt;수학자 힐베르트는 최소한의 공리로 참인 모든 명제를 증명할 수 있는 완벽한 공리계를 만들고자 했다.
힐베르트의 꿈은 잠시 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%EB%9F%AC%EC%85%80%EC%9D%98_%EC%97%AD%EC%84%A4&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;러셀의 역설&lt;/a&gt;로 위기를 맞았지만, 적절한 공리의 추가로 역설을 해결하고 조금씩 꿈을 향해 가는것 같았다.&lt;/p&gt;&lt;p&gt;그런데 러셀의 역설이 해결된지 약 20년뒤 힐베르트의 꿈은 괴델에 의해 무너지게 된다.&lt;/p&gt;&lt;h1&gt;불완전성 정리&lt;/h1&gt;&lt;p&gt;1931년 괴델은 어떤 공리들을 택해도, 참이지만 증명할 수 없는 명제가 있음을 증명하였다.
이를 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%EA%B4%B4%EB%8D%B8%EC%9D%98_%EB%B6%88%EC%99%84%EC%A0%84%EC%84%B1_%EC%A0%95%EB%A6%AC&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;불완전성 정리&lt;/a&gt; 라고 한다.&lt;/p&gt;&lt;p&gt;따라서 어떤 공리계를 만들어도, 모든것이 증명가능한 완벽한 공리계를 만들 수 없다.&lt;/p&gt;&lt;p&gt;재미있는건 힐베르트는 수학자들이 20세기에 풀어야할 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%ED%9E%90%EB%B2%A0%EB%A5%B4%ED%8A%B8_%EB%AC%B8%EC%A0%9C&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;23가지 문제&lt;/a&gt;들을 뽑았는데, 이중, 첫번째 문제인 연속체 가설이 참도 거짓도 없는 문제임이 밝혀졌다.&lt;/p&gt;&lt;h1&gt;평행선 공리의 부정&lt;/h1&gt;&lt;p&gt;다시 유클리드의 공리로 돌아가자. 유클리드의 공리중 마지막 평행선 공리는 다른 공리들과 달리 쉽게 이해되지 않는다.&lt;/p&gt;&lt;p&gt;사실 수학자들도 평행선 공리는 공리가 아니라 다른 공리로 유도할 수 있는 것이 아닌지 의심을 했다.
그러나 다른 공리로 평행선 공리를 증명할 수 없었고, 수학자들은 평행선 공리가 거짓이라고 가정하고 모순이 생길 수 있는지 확인하려 했다. (모순이 있다면 평행선 공리는 당연히 참임이 증명된다.)&lt;/p&gt;&lt;p&gt;그런데 평행선 공리가 거짓이라고 가정해도 모순이 없었다. 평행선 공리는 참이어도 거짓이어도 된다!&lt;/p&gt;&lt;p&gt;아니 그런데, 참 이면서도 거짓 일수 있을까? 이는 조건에 따라 달라진다.
평행선 공리에 의해서 삼각형의 내각의 합이 180˚임을 증명했다면, 평행선 공리가 참이 아니라면 내각의 합이 180˚가 아닌 삼각형도 있을 것 이다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:400px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/2563a9126c5876b63ff002f5c66e5617/d9f49/spherical-triangle.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAC4jAAAuIwF4pT92AAABw0lEQVQ4y31T7ZKjIBD0/V8wqUrKaMpEGAYY0UAUlKssF5b1ctu/FLrns6niG9u2xRjHcWSM9X2PiPILSin2hXEcMy2hyl8hhMQDgGEYiCiEsCwLAAghOOd930spQwh7cSLN81zGaprmfD53XQcAKeE8zwCwLMu3OIQAAN77VFWClNI5N01T3/f5PMbovQeAlP8lRsTn8xkLSCmnaUrf0zRJKctb51w6qay1RFTGvt1u6S6fEJExppwrEVlrK6VU7iFVdT6fy6kkCCFK2rIsUsoKEcsFIGJJypjneVc8Iv4QW2u11rtl5l8AyO38EK/rGmPctbCDMaau65JcNU1TtvE/ZcpWRm/btjocDtu2AQDn3Fobf8Xj8Uhj37bteDxWjDFEbNv2er3ufLJDqi4lR0TGWKW1Tktv29Zam/r5iHVdrbWXyyVJtNYvkxhjQgic83EcpZTDMDDGTqeTMUa/QUR93zdNc7/fQwjDMLxMks2Ym/HeO+eIyHu/vOG955xrrYUQ2bB/HwYi5rfxC7z3QghE/H4YSV/Xddr5x5llk9Z1nc1blVG7riOijz7x3hNR13VlddWO5JxTSsl/oJRyzu3IfwBm74kND/IdawAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;구면삼각형&quot; title=&quot;구면삼각형&quot; src=&quot;/static/2563a9126c5876b63ff002f5c66e5617/d9f49/spherical-triangle.png&quot; srcSet=&quot;/static/2563a9126c5876b63ff002f5c66e5617/5e043/spherical-triangle.png 163w,/static/2563a9126c5876b63ff002f5c66e5617/e5cc6/spherical-triangle.png 325w,/static/2563a9126c5876b63ff002f5c66e5617/d9f49/spherical-triangle.png 400w&quot; sizes=&quot;(max-width: 400px) 100vw, 400px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;
구에서 삼각형을 긋는다면, 세 각이 모두 직각인 삼각형을 만들 수 있다. 세 각의 합을
유클리드 기하학은 평면에서만 성립한것 이었으며, 이로 인해 비 유클리드 기하학이 탄생하게 된다.
위 구면 삼각형은 그중에서도 구면 기하학 이다.&lt;/p&gt;&lt;p&gt;유클리드 기하학, 구면기하학 모두 다 실용적이며, 구면 기하학은 현실에 더 어울리기 까지 하다.&lt;/p&gt;&lt;h1&gt;남은 과제들&lt;/h1&gt;&lt;p&gt;이 처럼 수학에서 조차 완벽한 공리계는 없다.
우리가 유클리드의 공간이라고 생각하던 지구는, 구면기하학이 더 어울리는 곡면이었다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;코드는 읽기 쉬워야 한다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;너무나 당연하게 느껴지는 문장도, 임베디드 세계에선 얼마든지 부정될 수 있다.
그리고 컴파일러의 발달로 다시 참이 될 수도 있다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;세미콜론을 사용하지 말자&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;우리팀이 정한 규칙도 babel이 자동으로 세미콜론을 삽입해 주지 않았다면, 아마 사용하지 않았을 것이다.&lt;/p&gt;&lt;p&gt;상황에 따라 모든건 바귄다. 수학과 달리 우리는 절대적인 문제상황에 있는게 아니다.
그러니 우리가 정해야할 첫번째 공리는 다음과 같다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;모든건 바뀔 수 있다.&lt;/p&gt;&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[프론트엔드는 백엔드의 꿈을 꾸는가?]]></title><description><![CDATA[현재 나는 휴학을 하고  ZOYI 에서 프론트 엔드 개발자로 일하고 있는데,…]]></description><link>https://blog.hanlee.io/2019/do-front-ends-dream-of-back-ends</link><guid isPermaLink="false">https://blog.hanlee.io/2019/do-front-ends-dream-of-back-ends</guid><pubDate>Sun, 07 Apr 2019 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;현재 나는 휴학을 하고 &lt;a href=&quot;https://zoyi.co&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;ZOYI&lt;/a&gt;에서 프론트 엔드 개발자로 일하고 있는데,
3년 전 컴퓨터 공학을 전공으로 선택할 때만 해도 프론트엔드 개발을 할 것이라 생각하지 않았다.&lt;/p&gt;&lt;p&gt;몇 가지 이유가 있는데, 첫째로 당시에 미래의 웹 페이지는 모두 포토샵과 같은 WYSIWYG 에디터로 만들 것으로 생각했다.&lt;/p&gt;&lt;p&gt;그때는 &lt;strong&gt;웹앱&lt;/strong&gt;을 몰라서 했던 생각이지만, 지금도 정적 페이지, 간단한 쇼핑몰 같은 페이지는 그렇게 될 것으로 생각한다.&lt;/p&gt;&lt;p&gt;둘째로 JavaScript 언어의 난해함과 내 생각대로 작동하지 않는 CSS였다. 특히 &lt;a href=&quot;https://css-tricks.com/centering-css-complete-guide/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;세로 중앙정렬&lt;/a&gt;은 너무나 이상하게 느껴졌다.
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:500px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:53.37423312883436%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHM2JWhAsP/xAAcEAEAAgEFAAAAAAAAAAAAAAACAQMSAAQTFEH/2gAIAQEAAQUCFsZrbjjwRj1qevFrGv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAICAgMBAAAAAAAAAAAAAAECABEhMQMSYRD/2gAIAQEABj8CcKoz7uHkLOa1cHXsQc4PxfdylahP/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFRcYH/2gAIAQEAAT8hAlOzZ7EI5DgoU4TtRh9z5bgVjgn/2gAMAwEAAgADAAAAEDff/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QR//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxBtf//EABoQAQEBAQEBAQAAAAAAAAAAAAERIQAxQVH/2gAIAQEAAT8QXK1VgUEHDG+XrpUBe3N99b2UQCQLkZ9zm03ejpooIxv531fkeXv/2Q==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;여전히 마음에 안들 때도 있다&quot; title=&quot;여전히 마음에 안들 때도 있다&quot; src=&quot;/static/bef713d33288a3f1cbeb6febf63a19f5/953fe/css-mug.jpg&quot; srcSet=&quot;/static/bef713d33288a3f1cbeb6febf63a19f5/520c1/css-mug.jpg 163w,/static/bef713d33288a3f1cbeb6febf63a19f5/45208/css-mug.jpg 325w,/static/bef713d33288a3f1cbeb6febf63a19f5/953fe/css-mug.jpg 500w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;
다행히 ES6 이후의 JS의 변화와 &lt;a href=&quot;https://babeljs.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;지원 노력&lt;/a&gt;으로 (내 기준으로) 난해한 언어는 아니며,
CSS는 사용과 공부, flex와 같은 새로운 스타일로 적응 할 수 있었다.&lt;/p&gt;&lt;p&gt;하지만 무엇 보다도, &lt;a href=&quot;https://vimrc.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;vimrc.io&lt;/a&gt;를 만들때 사용한, &lt;a href=&quot;https://reactjs.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;React&lt;/a&gt;의 만족감이 큰 역할을 했다.&lt;/p&gt;&lt;h1&gt;진료는 의사에게 약은 약사에게&lt;/h1&gt;&lt;p&gt;React의 가장 만족스러운 점은 &lt;strong&gt;관심사의 분리&lt;/strong&gt; 이다. 예를 들어 게시물 목록을 간단히 React로 작성해보면 다음과 같다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;react&amp;#x27;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostList&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;fetchPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;SOME_API&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ok&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;로딩에 실패하였습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          posts&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; posts&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isLoading&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;spinner&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;게시글이 없습니다&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;여전히 한 파일에 있지만, 각 영역은 철저히 자신의 역할만 책임진다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;fetchPosts&lt;/code&gt;함수는 API를 요청하고, 그 결과를 처리한다.&lt;ul&gt;&lt;li&gt;fetchPosts 함수는 HTML 렌더링은 신경쓰지 않고 데이터만 처리한다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;render&lt;/code&gt;함수는 상태에 따라 필요한 HTML을 렌더링한다.&lt;ul&gt;&lt;li&gt;React 같은 라이브러리의 장점은, 매번 새로 렌더링을 하기 때문에, 이전 상태를 고려 하지 않고 지금의 상태만 처리하면 된다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이제 원한다면 두 함수를 완전히 분리할 수도 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;react&amp;#x27;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PostList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; posts&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isLoading&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;spinner&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;게시글이 없습니다&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostContainer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;fetchPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;SOME_API&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ok&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;로딩에 실패하였습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          posts&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PostList&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;isLoading&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;PostList&lt;/code&gt;는 렌더링만 책임을 지며, &lt;code&gt;PostContainer&lt;/code&gt;는 주로 데이터를 가져오는 것을 책임진다.
이러한 접근법은 재사용성을 크게 강화하는데, 이제 다른 컴포넌트에서도 &lt;code&gt;PostList&lt;/code&gt;가 원하는 데이터 형식만 맞춘다면, 동일한 컴포넌트를 여러곳에서 사용할 수 있게 된다.&lt;/p&gt;&lt;p&gt;이렇듯, React는 관심사의 분리와 렌더링과 DOM 이벤트 관리를 쉽게 도와주었지만, &lt;strong&gt;데이터 관리&lt;/strong&gt;라는 어마어마한 폭탄도 가져왔다.&lt;/p&gt;&lt;h1&gt;골드버그 장치&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/51f064f134d28d890afd1d0e06d70c01/a24e6/goldberg.jpg&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:52.760736196319016%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAQL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGrwhZSMD//xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIEERIDEyH/2gAIAQEAAQUCk9DiyxPBeiuiHlnVM//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB4QAAIBAwUAAAAAAAAAAAAAAAABEQIhURIxQWHB/9oACAEBAAY/AqnK09jc87IuycXRU8rwk//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExYXGB/9oACAEBAAE/IUsUM8ciUBZkl/Jk0XuAQKa+lxICm3PE2Bl7P//aAAwDAQACAAMAAAAQEw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEBAAICAwEAAAAAAAAAAAABEQAhMVFBcZGh/9oACAEBAAE/EAE0hQC0FXs/cF3glCHpPmFAzaHxoy/9wKBAs4dd4wORAoohrjlfuG+kBWi6M//Z&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Professor Butts and the Self-Operating Napkin - 루브 골드버그&quot; title=&quot;Professor Butts and the Self-Operating Napkin - 루브 골드버그&quot; src=&quot;/static/51f064f134d28d890afd1d0e06d70c01/8ea4d/goldberg.jpg&quot; srcSet=&quot;/static/51f064f134d28d890afd1d0e06d70c01/520c1/goldberg.jpg 163w,/static/51f064f134d28d890afd1d0e06d70c01/45208/goldberg.jpg 325w,/static/51f064f134d28d890afd1d0e06d70c01/8ea4d/goldberg.jpg 650w,/static/51f064f134d28d890afd1d0e06d70c01/a24e6/goldberg.jpg 800w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;나쁜 프로그래머는 코드에 대해 걱정 하고, 좋은 프로그래머는 데이터 구조와 관계를 걱정 한다&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;리누스 토발즈의 &lt;a href=&quot;https://lwn.net/Articles/193245&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;발언&lt;/a&gt;이며, 개인적으로 토발즈의 발언중 가장 좋아하는 발언이다.&lt;/p&gt;&lt;p&gt;React-Redux 앱을 만들면 더더욱 데이터와 그 흐름의 중요성을 느끼게 된다.
일부는 React의 단방향 데이터흐름, Redux의 구조 때문이지만 (그러나 두 특징 모두 버그를 줄이고, 역할을 나누는데 큰 도움을 준다),
보다 근본적으로는 기능에 따른 독립적인 또는 공통의 상태들이 필요하기 때문이다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:310px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/2b831df5c26f1f372d6b753fac0e8579/56e1b/list-select.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:107.36196319018406%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAADAElEQVQ4y42T247jRBCG/QS8AFe8BRIPgHgKngCJh+ACCXG65o4rBAjtLOdZ0A4LoxUMTDRJJhnHh/iQTGIndhzn6PbhQ93JhpkBR1j6VG131V9VXW3NdX1OWmM+b4bYfY/LVo9mx6R9Y3PVMbgxXUxngNk/gjPEbltYhot23vF4+YuClz6DRw2Ps1+ec/LknLPnDZ48+4M/r27o2R5d01Xi/8Jw6fZ9+k8vMRo62lXP443vV7z6dcZZy6HTNVTGnu2r7D3LQzdddGnrkMLOgBvbQ7Nsl7bh0jQ8LMvhuufsHPYcFXogqpseWsdw1Ythuai1db+l7v/F2FltPA5xhgHWICQYB7iDMd4wwL8NFYMj+Acb4A7H6l1zg5jXfxS89l1B04t49PgbTp/+ypcn32LYLtN4TjCJCWuQe9MkpbpyiZ0RWsuPeeWrUk35ZzPmutmka/TxBiNuxxMVMA6jWiZRQs9yeO/dj9B1C20WRZyaCSf6nEk44aLRou8OifaVHUMKyg6k4Dvvf0zXsNFug4hkOmU+nTIKdhmlo6xOItejGtReMCWcztishbLabJ6SpAtm6YJkvmCx3LBcbViut6zWW+IkZVbDi714Niecp8TzBVqeF7T0JY3OknSx4eKygWn1aXduMEybsiyRPkUNcq8E8GOq+RotjLb88GzG6W8Jlpti2Sb+YITnDxkMRypAiLwWKbpcb/j98U+kYSwrzGnpC1XhPF3h+gOqisOjAmtEs0woH5n4zbfepu/5u5apcqgERVFQFKVyVNwJzvftPURVWZRURUWRl2hCCLKcHSKnqirKstrb8mBlgrq2sywnkz55jiak0KxFFl2QiRJvMD5cm2mUqF9KXpFSVV5zlrLSSYJYbdDEcoiwPyDvf0iWXNPSh3R0i2vdxnaHnP/VpqXb6qyy/2pdfpM3oemQRyma2C7J/E8R3iesFwGrdf7PRCrundVR5ACLQg6lQp6jEFsyUbFabQ4TvDsMUVfdvuUXa+2+Y34vWDyYcp3oXcG/AaYLHHYxmxMCAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;유저 채팅 목록&quot; title=&quot;유저 채팅 목록&quot; src=&quot;/static/2b831df5c26f1f372d6b753fac0e8579/56e1b/list-select.png&quot; srcSet=&quot;/static/2b831df5c26f1f372d6b753fac0e8579/5e043/list-select.png 163w,/static/2b831df5c26f1f372d6b753fac0e8579/56e1b/list-select.png 310w&quot; sizes=&quot;(max-width: 310px) 100vw, 310px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;어떤 데이터는 &lt;strong&gt;여러곳&lt;/strong&gt;에 연관되어 있지만, 어떤건 아니다&lt;ul&gt;&lt;li&gt;위의 유저 채팅 목록 처럼, 리스트는 여러 곳에서 필요한 부분만 가져가서 사용하지만, 선택 여부는 일부 컴포넌트만 가지고 있다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;어떤 데이터들은 &lt;em&gt;여러곳에서&lt;/em&gt; 서로 다르게 가공하여 사용할 수도 있다.&lt;ul&gt;&lt;li&gt;어떤 컴포넌트는 데이터를 모두 활용해야 한다.&lt;/li&gt;&lt;li&gt;어떤 컴포넌트는 조건에 따라서 일부 데이터만 사용한다.&lt;/li&gt;&lt;li&gt;서로 다른 데이터를 합치거나, 평균을 구하거나, 가공할 필요가 생긴다 (예: 차트)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;데이터의 구조와 규모 뿐만 아니라 이들을 가공하는것도 만만하지 않다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;어떤 작업(가공)은 지나치게 오래걸린다.&lt;/li&gt;&lt;li&gt;어떤 작업들은 선행 작업들이 필요하다.&lt;/li&gt;&lt;/ul&gt;&lt;h1&gt;데이터는 어디서 왔으며, 무엇이고, 어디로 가는가?&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/150fc1aa0aa5c86d478de84486b98a7e/40434/where-do-we-come-from-what-are-we-where-are-we-going.jpg&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.809815950920246%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAByWhEan//xAAYEAACAwAAAAAAAAAAAAAAAAAAARESIf/aAAgBAQABBQJkYrI//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABAh0f/aAAgBAQAGPwLVD//EABgQAQEBAQEAAAAAAAAAAAAAAAEhABFx/9oACAEBAAE/IaeiqvKyE9aZFc93/9oADAMBAAIAAwAAABCED//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxCXG//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPxBuCld//8QAGRABAQEBAQEAAAAAAAAAAAAAAREAITFR/9oACAEBAAE/EBZfU0feY2ai35NGQXZxv//Z&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;우리는 어디서 왔으며, 무엇이고, 어디로 가는가? - 폴 고갱&quot; title=&quot;우리는 어디서 왔으며, 무엇이고, 어디로 가는가? - 폴 고갱&quot; src=&quot;/static/150fc1aa0aa5c86d478de84486b98a7e/8ea4d/where-do-we-come-from-what-are-we-where-are-we-going.jpg&quot; srcSet=&quot;/static/150fc1aa0aa5c86d478de84486b98a7e/520c1/where-do-we-come-from-what-are-we-where-are-we-going.jpg 163w,/static/150fc1aa0aa5c86d478de84486b98a7e/45208/where-do-we-come-from-what-are-we-where-are-we-going.jpg 325w,/static/150fc1aa0aa5c86d478de84486b98a7e/8ea4d/where-do-we-come-from-what-are-we-where-are-we-going.jpg 650w,/static/150fc1aa0aa5c86d478de84486b98a7e/40434/where-do-we-come-from-what-are-we-where-are-we-going.jpg 654w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;
여기에 서버로부터 데이터를 가져온다면 더 가정해야할 것들이 생긴다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;어떤 API&lt;em&gt;들&lt;/em&gt;은 다른 API에 의존적이다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;한 API의 결과에 따라 호출이 될수도 아닐 수도 있다.&lt;/li&gt;&lt;li&gt;한 API가 호출된 후 호출해야 한다.&lt;/li&gt;&lt;li&gt;성능 문제로 (예: 너무 잦은 렌더링) 한번에 묶어서 결과를 처리 해야 할 수도 있다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;API의 프로토콜, 형식이 모두 다를 수 있다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;많은 경우 JSON HTTP API를 사용할 것이다.&lt;/li&gt;&lt;li&gt;실시간 데이터 처리를 위해 WebSocket을 사용 할 수도 있다.&lt;/li&gt;&lt;li&gt;HTTP 프로토콜을 사용해도, graphql처럼 한 엔드 포인트에 서로 다른 정보를 넘겨야 할 수도 있다.&lt;/li&gt;&lt;li&gt;IndexDB, WebSQL, LocalStorage을 이용해 로컬에서 데이터를 사용할 수도 있다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이처럼 지금의 프론트엔드 특히 웹앱은 &lt;em&gt;어떻게 보일것인가&lt;/em&gt;는 물론 &lt;strong&gt;데이터를 어떻게 관리할 것인가&lt;/strong&gt;도 고민해야 하며, 데이터의 규모와 복잡도는 앞으로도 커질 수 있다.&lt;/p&gt;&lt;h1&gt;거인의 어깨 위&lt;/h1&gt;&lt;p&gt;위의 고민은 꼭 프론트만 가지고 있는건 아니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;어떤 API&lt;em&gt;들&lt;/em&gt;은 다른 API에 의존적이다.&lt;/li&gt;&lt;li&gt;API의 프로토콜, 형식이 모두 다를 수 있다.&lt;ul&gt;&lt;li&gt;서로 다른 DB 엔진에서 가져올 수도 있다. (RDBMS, NoSQL)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;어떤 데이터들은 &lt;em&gt;여러곳에서&lt;/em&gt; 서로 다르게 가공하여 사용할 수도 있다.&lt;ul&gt;&lt;li&gt;일반적으로 SQL의 JOIN을 사용하는 API가 적어도 하나는 있을 것이다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;어떤 작업은 지나치게 오래 걸린다&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;백엔드 생태계는 이런 상황을 먼저 겪었으며, 각각의 해법들 (SQL, Repository, Task Queue)을 만들며 발전하게 되었다.&lt;/p&gt;&lt;h1&gt;수렴진화&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:310px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/88a96e209ef973468c52cbca3f085851/60f7a/convergent-evolution.jpg&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:52.760736196319016%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAQT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABr8tJEMNK/8QAGRAAAwEBAQAAAAAAAAAAAAAAAQIRAAMQ/9oACAEBAAEFAnuHc1WvhRQZv//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAEDBQEAAAAAAAAAAAAAAAEAEBECISJRcYH/2gAIAQEABj8CtJ4sqh4tMIDf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARMUEhUXH/2gAIAQEAAT8hZ2OoqQni2CW8GqeIg5iKY3qUn//aAAwDAQACAAMAAAAQTM//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EBNX/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARQf/aAAgBAgEBPxA3F//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExUZH/2gAIAQEAAT8QeEk4db6rAFdd6WZFIKSjb4zFAnjMfu2KsexwNoPWf//Z&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;어류, 해양 포유류, 해양 파충류의 수렴진화&quot; title=&quot;어류, 해양 포유류, 해양 파충류의 수렴진화&quot; src=&quot;/static/88a96e209ef973468c52cbca3f085851/60f7a/convergent-evolution.jpg&quot; srcSet=&quot;/static/88a96e209ef973468c52cbca3f085851/520c1/convergent-evolution.jpg 163w,/static/88a96e209ef973468c52cbca3f085851/60f7a/convergent-evolution.jpg 310w&quot; sizes=&quot;(max-width: 310px) 100vw, 310px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;React 생태계는 백엔드와 닮아서 좋아요.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;회사에서 같이 일하는 개발자에게 들었던 말이다. 처음 이 말을 들었을때는 잘 이해하지 못했지만, 점점 공감이 가기 시작했다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:57.668711656441715%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACoUlEQVQoz1VQy24TMRQdCQnxBVUqr6oi9ZG06ZSX2PIXfAObDGwoTXm0ZZEFLCqxZYHYsqgEC5BYUBV1hxAikyhVm2acNDNJZjLvGXtsXzROH9TW0T0+vvf4Xiv1P/uVntnX2u22Vq/XNV3XJbcsS7MsU/Jmo6EZRkdqpmlqrVZL0/W61tB1GQ2j86TZbD6qVCo3lF7XAIwxmKYJYRiC53kScRxLhFEk9SiKLrUwhCAIJHLuOA50ez2o1WrTytj16Mh2WJqmlNIsC8I4G3tBRgjNMsYl2FnMGJNgZ5oE53mZ8IPQ29x+XVCGtiNcP4A4TnJRpIQIxpjIF8AEQoDcMsJVTPIA4iQN19Y3CortjIXr+UApFXGcAKEU+CQHvrYY/D7lkp97SderkMlRHIfrGy8Kiuf5YuS4QAgRcZJASggwPimu7QF8+ptzBn7I4KjNgDEOGWPAOZcPXxomE0PX84XtuJCmqYjyDv8z3DkQsFvPO0ygcUjh2ZaAOCF5MZwvzv/v8HlBsYa2GLvexciU0gvDtz8BdvXJ+EcdgLVNgCybnL//OIR605S/wTgHP4zC9epGQfF8nyVJIjJKWRTHnBKSv8kBBN854PxzU0h+dMJ5dZtxQnneMn/zbo9/+dbg8j+yDEjgB9rTakFxXA9cLwDGGKSEQpRxSBkA4wDWmIATkLPRAGwnuxjVDxKIksldJ2Gwb/rkw1Z1WjlunxgdA3cHg4HRN03cMQe4aw5xrz/EppnDwsPRCDuOjT3PwbZt49HIxq47xiPbxuOBZewf908//mo33798PKWoqjqtqipaUVVULpfR/ZVldO9WGd25XUZldRmtrK6ipaUlNL9QRDOzi2ixWELFUgnN3pxDc3PzaGahhB7eLaJXD0oF5frUtX/vnCy5yctqRwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;데모용 대시보드&quot; title=&quot;데모용 대시보드&quot; src=&quot;/static/524b728ed624e308a268416c4ca4bde5/663f3/dashboard.png&quot; srcSet=&quot;/static/524b728ed624e308a268416c4ca4bde5/5e043/dashboard.png 163w,/static/524b728ed624e308a268416c4ca4bde5/e5cc6/dashboard.png 325w,/static/524b728ed624e308a268416c4ca4bde5/663f3/dashboard.png 650w,/static/524b728ed624e308a268416c4ca4bde5/d880f/dashboard.png 975w,/static/524b728ed624e308a268416c4ca4bde5/4c573/dashboard.png 1300w,/static/524b728ed624e308a268416c4ca4bde5/3fb98/dashboard.png 2752w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;
현재 ZOYI에서는 크게 두 팀이 있는데, 그 중 &lt;a href=&quot;http://walkinsights.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;워크인사이트&lt;/a&gt;오프라인 고객분석을 하는데, 데이터를 시각화 하여 보여주는 대시보드 개발에 참여했다.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://board.walkinsights.com/#/demo&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;데모 대시보드&lt;/a&gt;를 개편하는 일을 맡았을때, 데모 대시보드는 여러 이유로 다른 API와 다른 방식으로 데이터를 가져와야 했다.&lt;/p&gt;&lt;p&gt;이때 최대한 컴포넌트와 리듀서 구조는 유지하고 싶었고, (위의 발언을 한 개발자는) 스프링프레임워크와 같은 백엔드에서 주로 사용한 Repository 패턴을 추천해 주었다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserRepositry&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;USER_API_ENDPOINT&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// fetch api 함수를 흉내낸 함수&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mockFetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token function-variable function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DemoUserRepository&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mockFetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;Demo User&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;처음에는 데모페이지에 사용하는 API가 추가될때마다 두개의 Repository가 생기는게 귀찮았지만, 점점 진가가 발휘되었다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;UserReducer - DemoUserReducer, UserAction - DemoUserAction 등등 로직은 곂치지만, 재사용하지 못한 데이터 레이어를 활용 할 수 있었다.&lt;/li&gt;&lt;li&gt;테스트를 할때 Repository만 교체해주면 되었다.&lt;ul&gt;&lt;li&gt;물론 fetch api를 mocking 할 수도 있지만, 이 편이 더 깔끔했다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;물론 이런 해결법을 우리만 사용하는건 아니다.&lt;/p&gt;&lt;h2&gt;MobX&lt;/h2&gt;&lt;p&gt;사내에서 그리고 많은 React 앱들이 상태관리를 위해 Redux를 사용하지만, 다른 상태관리 라이브러리들도 많다.&lt;/p&gt;&lt;p&gt;Redux를 제외한 라이브러리중 단연 눈에띄는 라이브러리는 &lt;a href=&quot;https://github.com/mobxjs/mobx&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;MobX&lt;/a&gt;인데, 재미있게도 MobX에서는 Repository 패턴을 권장한다.
MobX의 Store, Repository 사용법은 Java의 Spring과 꽤 유사한데, 자세한 내용은 우아한 형제들의 &lt;a href=&quot;http://woowabros.github.io/experience/2019/01/02/kimcj-react-mobx.html&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;React에서 Mobx 경험기 (Redux와 비교기)&lt;/a&gt; 글을 추천한다.&lt;/p&gt;&lt;h2&gt;Immutable.js&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://immutable-js.github.io&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Immutable.js&lt;/a&gt;는 Facebook에서 JS의 불변성을 위해 만든 라이브러리다. 현재 일하고 있는 &lt;a href=&quot;https://channel.io&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;채널&lt;/a&gt; 팀에서는 Immutable.js를 적극적으로 활용하고 있는데, Immutable.js의 진가는 &lt;a href=&quot;https://immutable-js.github.io/immutable-js/docs/#/Record&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Record&lt;/a&gt;라고 생각한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; PersonRecord &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Record&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;Aristotle&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2400&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PersonRecord&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;name&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;name&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;채널에서는 대부분의 데이터를 Record를 활용해 표현하며, &lt;code&gt;models&lt;/code&gt;폴더에 따로 관리하고 있다. Reducer에서 필요한 방식으로 사용하고 있다.
위의 Person Model은 마치 &lt;a href=&quot;https://docs.djangoproject.com/en/2.1/topics/db/models/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Django Models&lt;/a&gt;처럼 보인다.&lt;/p&gt;&lt;p&gt;게다가 여러 데이터를 업데이트 할때도 &lt;code&gt;setIn&lt;/code&gt;과 같은 함수를 사용하니 더더욱 백엔드에서 사용한 모델들 처럼 느껴진다.&lt;/p&gt;&lt;h2&gt;Reselect&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/reduxjs/reselect&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Reselect&lt;/a&gt;는 Redux의 Selector를 구현 하는데 도움을 주는 라이브러리다.
Redux의 Selector는 &lt;code&gt;react-reudx&lt;/code&gt;의 &lt;code&gt;connect&lt;/code&gt;함수의  &lt;code&gt;mapStateToProps&lt;/code&gt; 부분이라고 생각하면 된다.&lt;/p&gt;&lt;p&gt;처음 Reudx를 사용하게 되면, 보통 &lt;code&gt;mapStateToProps&lt;/code&gt; 부분에서 아래처럼 사용하게 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; connect &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;react-redux&amp;#x27;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;mapStateToProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UserReducer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mapStateToProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 &lt;code&gt;UserInfo&lt;/code&gt;가 서로 다른 리듀서에서 데이터를 가져올 뿐만 아니라, 그 값을 가공하게 된다면? &lt;code&gt;render&lt;/code&gt; 함수에서 가공할 수도 있겠지만, 그리 좋은 방법은 아니다.
이때 Reselect를 쓰면 다음과 같이 구현할 수 있다 (코드는 reselect 문서에서 가져와 수정했다)&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; connect &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;react-redux&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createSelector &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;reselect&amp;#x27;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;shopItemsSelector&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;taxPercentSelector&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;taxPercent

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; subtotalSelector &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createSelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  shopItemsSelector&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token parameter&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; acc &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; taxSelector &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createSelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  subtotalSelector&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  taxPercentSelector&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;subtotal&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; taxPercent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; subtotal &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;taxPercent &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; totalSelector &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createSelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  subtotalSelector&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  taxSelector&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;subtotal&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; subtotal &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tax &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;mapStateToProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;totalSelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mapStateToProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Tax&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위 코드를 보면 &lt;code&gt;subtotalSelector&lt;/code&gt;와 &lt;code&gt;taxSelector&lt;/code&gt;는 각각 다른 리듀서에서 데이터를 가져와 가공하며, &lt;code&gt;totalSelector&lt;/code&gt;는 다시 두 셀렉터를 사용해 가공한다.
Redux는 &lt;strong&gt;하나의 상태트리&lt;/strong&gt;만 가지기 때문에 &lt;code&gt;state&lt;/code&gt;에서 모든 데이터를 가져올 수 있기에 가능한 방식이다.&lt;/p&gt;&lt;p&gt;reselect를 사용하면 Reducer는 자신의 데이터만 가지고 있고, 여러 Selector를 활용해 가공하게 되니 Reducer의 역할을 DB의 Table 처럼 만들어 준다.
게다가 &lt;a href=&quot;https://github.com/reduxjs/reselect#creating-a-memoized-selector&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Memoized&lt;/a&gt;기능도 있어, 불필요한 렌더링을 줄여준다.&lt;/p&gt;&lt;h2&gt;Normalizr&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/paularmstrong/normalizr&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;normalizr&lt;/a&gt;는 데이터 정규화 라이브러리이다.
Redux를 사용해보면 중첩된 (nested)된 데이터는 불변성을 유지하기가 꽤 귀찮은데, 이를 쉽게 하기 위해 데이터 형식을 가공하게 해준다.
공식문서의 코드를 가져와 보면&lt;/p&gt;&lt;p&gt;다음의 데이터는&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;123&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&amp;quot;author&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Paul&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;My awesome blog post&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&amp;quot;comments&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;324&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&amp;quot;commenter&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Nicole&amp;quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음의 코드를 이용해&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; normalize&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; schema &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;normalizr&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Define a users schema&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;schema&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Entity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;users&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Define your comments schema&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; comment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;schema&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Entity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;comments&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;commenter&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; user
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Define your article&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; article &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;schema&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Entity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;articles&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;comments&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;comment&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; normalizedData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;normalize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;originalData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; article&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음 처럼 변환된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;123&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;entities&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;articles&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;123&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;123&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;My awesome blog post&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;comments&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;324&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;users&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Paul&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Nicole&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;comments&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;324&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;324&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string-property property&quot;&gt;&amp;quot;commenter&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;변환하기전 데이터를 보면 &lt;code&gt;comments[0].commenter&lt;/code&gt;의 데이터를 변경하였을때, Reducer에서 변경을 인지하게 만들기가 까다로운데 비해, 변환 후 코드는 더 쉬워진다.
Entity를 이용해 API Respose의 구조를 표현하는 곳도 재미 있지만, 더욱 재미 있는건, 변환후 데이터인데 마치 DB에서 Foreign key를 사용한것 처럼, ID만 가지고 있는걸 볼 수 있다.&lt;/p&gt;&lt;p&gt;추가로 변환된 데이터들을 Immutable.js를 이용해 저장하면 &lt;code&gt;Users.get(id)&lt;/code&gt;처럼 마치 백엔드에서 ORM을 사용하는 것처럼 사용할 수 있다.&lt;/p&gt;&lt;p&gt;아직 채널팀에서는 사용하지 않고 있지만, 개인적으로 눈여겨 보고 있다.&lt;/p&gt;&lt;h2&gt;Redux-Saga&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://redux-saga.js.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Redux-Saga&lt;/a&gt;는 인기있는 Redux Side Effect 관리 라이브러리이다.
&lt;code&gt;fork&lt;/code&gt;, &lt;code&gt;task&lt;/code&gt;, &lt;code&gt;race&lt;/code&gt;등등 쓰레드를 활용하는 것과 매우 유사한 경험을 제공해준다.
워크인사이트 팀에서 사용하였는데, 특히 소켓을 활용할때 경험이 좋았다.&lt;/p&gt;&lt;p&gt;이 외에도 &lt;code&gt;Task Queue - WebWorker&lt;/code&gt;등등 그간 백엔드에서 복잡도를 낮추기 위해 또는 관심사와 레이어를 나누기위해 사용한 여러 방법들을 React-Redux 생태계에서 활용할 수 있다.&lt;/p&gt;&lt;h1&gt;마치며&lt;/h1&gt;&lt;p&gt;현재의 프론트엔드는 점점 복잡해지고 있으며, 점점 더 많은 권한을 가지게 되고 있다.&lt;/p&gt;&lt;p&gt;프론트엔드를 단순하게만 생각하고 있거나 혹은 정반대로 복잡한 상태/작업 관리의 해결법의 모티브를 찾고 계시다면 이렇게 답하고 싶다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;프론트엔드는 백엔드의 꿈을 꾸고 있다.&lt;/p&gt;&lt;/blockquote&gt;&lt;h1&gt;첨언&lt;/h1&gt;&lt;p&gt;샤딩처럼 백엔드만 가지고 있는 특성과 문제가 있는것 처럼, 프론트엔드만 가지고 있거나, 프론트엔드에서 더 문제가 되는 것들도 있다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;번들파일 특히 JS 용량은 적어야 한다.&lt;ul&gt;&lt;li&gt;JS파일은 파일을 읽은 후 파싱 -&amp;gt; 컴파일 -&amp;gt; 실행을 해야하니 용량의 증가가 더욱 치명적이다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;JS의 실행속도는 빨라야한다.&lt;ul&gt;&lt;li&gt;당연히 백엔드도 빨라야하지만, 더 좋은 서버를 이용할 수 있는 백엔드와 달리, 사용자의 기기를 업그레이드 할 수 없다.&lt;/li&gt;&lt;li&gt;&lt;em&gt;일단은&lt;/em&gt; 싱글쓰레드기 때문에 None-Blocking관리가 더 중요하다.&lt;/li&gt;&lt;li&gt;60fps 렌더링이 되면 더할나위 없다.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;보기 좋아야 한다 :)&lt;/li&gt;&lt;li&gt;클라이언트 기기가 모두 다르다&lt;ul&gt;&lt;li&gt;아쉽게도 아직 IE를 사용하는 분들도 계시다 :(&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;JS의 Event Programming이 IO가 잦은 곳에 유용하다는 생각으로 &lt;a href=&quot;https://nodejs.org&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Node.js&lt;/a&gt;가 탄생한 것 처럼,
15년 전부터 웹앱(Gmail)을 만든 구글은 반대의 사례가 있을지 궁금하다.&lt;/p&gt;&lt;p&gt;또하나,&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://channel.io&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;채널&lt;/a&gt;과 &lt;a href=&quot;https://walkinsights.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;워크인사이트&lt;/a&gt; 모두 큰 규모의 웹앱을 가지고 있으며,
위와 같이 다양한 방법으로 많은 문제를 해결해가고 있고 매일 도전적인 과제를 해결하고 있다.&lt;/p&gt;&lt;p&gt;특히 채널팀에 오게된다면 쉽게 경험해볼 수 없는 많은 프론트 문제를 만나고, 해결할 수 있다!&lt;/p&gt;&lt;p&gt;프론트이외에도 &lt;a href=&quot;https://zoyi.co/ko/jobs&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;여러 직군을 모집중&lt;/a&gt;이니 많은 관심 가져주시면 감사하겠습니다 :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Under the C: PyObject]]></title><description><![CDATA[파이썬의 모든 것은 객체다. 당연하게 들릴 수 있으나 객체 지향 언어라고 하려 모든것이 객체인건 아니다.
예를 들어 자바의 거의 모든것은 객체지만, 원시 자료형 (Primitive Type…]]></description><link>https://blog.hanlee.io/2018/under-the-c-2</link><guid isPermaLink="false">https://blog.hanlee.io/2018/under-the-c-2</guid><pubDate>Fri, 20 Apr 2018 15:00:00 GMT</pubDate><content:encoded>&lt;p&gt;파이썬의 모든 것은 객체다. 당연하게 들릴 수 있으나 객체 지향 언어라고 하려 모든것이 객체인건 아니다.
예를 들어 자바의 거의 모든것은 객체지만, 원시 자료형 (Primitive Type)은 아니다.
그러나 파이썬은 숫자도 객체다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__add__&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 점을 두개 붙어야 호출 가능하다&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;45.0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이와 같은 이유로 객체를 알아보는건 파이썬 내부를 알아보는데 좋은 출발점이다.&lt;/p&gt;&lt;h1&gt;PyObject&lt;/h1&gt;&lt;p&gt;파이썬의 객체는 &lt;code&gt;PyObject&lt;/code&gt;로 이뤄져 있다.
&lt;code&gt;PyObject&lt;/code&gt;는 &lt;code&gt;Include&lt;/code&gt; 폴더의 &lt;code&gt;object.h&lt;/code&gt;에 다음과 같이
&lt;a href=&quot;https://github.com/python/cpython/blob/f320be7/Include/object.h#L106&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;정의&lt;/a&gt;
되어 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;_object&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    _PyObject_HEAD_EXTRA
    Py_ssize_t ob_refcnt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;_typeobject&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ob_type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; PyObject&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이중 &lt;code&gt;_PyObject_HEAD_EXTRA&lt;/code&gt;매크로는 디버깅에만 사용되므로 무시하자.
따라서 &lt;code&gt;PyObject&lt;/code&gt;는 다음의 구조체다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;_object&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Py_ssize_t ob_refcnt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;_typeobject&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ob_type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; PyObject&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;_typeobject&lt;/code&gt;는 외부에는 &lt;code&gt;PyTypeObject&lt;/code&gt;라는 이름으로 사용된다.
이름처럼 객체에 관한 정보가 기록 된다. &lt;code&gt;PyTypeObject&lt;/code&gt;의 자세한 소스코드는 &lt;a href=&quot;https://github.com/python/cpython/blob/f320be7/Include/object.h#L346&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;GitHub&lt;/a&gt;을 참고하라.
예를 들어 파이썬 객체의 &lt;code&gt;__doc__&lt;/code&gt;정보는 &lt;code&gt;PyTypeObject&lt;/code&gt;의 &lt;code&gt;tp_doc&lt;/code&gt;필드에 저장된다.&lt;/p&gt;&lt;p&gt;따라서 필요하다면 C언어로 &lt;code&gt;PyTypeObject&lt;/code&gt;를 상속받아 새로운 객체를 만들 수도 있다.
&lt;code&gt;PyTypeObject&lt;/code&gt;의 내용은 다음에 다루기로 하고, 지금은 다른 필드 &lt;code&gt;ob_refcnt&lt;/code&gt;를 알아보자.
변수명에서 눈치 챘겠지만, 레퍼런스 카운팅(이하 RC)을 위한 필드다.&lt;/p&gt;&lt;h1&gt;Reference Counting&lt;/h1&gt;&lt;p&gt;파이썬의 주 메모리 관리는 RC로 이뤄진다.
RC는 객체가 얼마나 사용되는지 레퍼런스 카운트에 기록한다.
객체가 사용되는 만큼 레퍼런스 카운트를 1씩 증가/감소하며, 레퍼런스 카운트가 0이 되면 메모리에서 해제한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;Foo(&amp;quot;{}&amp;quot;)가 메모리에서 제거 되었습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)가 새로 생성 되었으므로 레퍼런스 카운트는 1이 된다&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# B도 a를 참조 있으므로 Foo의 레퍼런스 카운트는 2가 된다&lt;/span&gt;

b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# B가 더이상 Foo(&amp;quot;a&amp;quot;)를 사용하지 않으므로 Foo(&amp;quot;a&amp;quot;)의 레퍼런스 카운트는 1 줄어 들어 1 이 된다&lt;/span&gt;
a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a도 더이상 Foo(&amp;quot;a&amp;quot;)를 사용하지 않으므로 Foo(&amp;quot;a&amp;quot;)의 레퍼런스 카운트는 1 줄어 0이 되어, 해재하며 소멸자를 호출한다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;파이썬에서 &lt;code&gt;__init__&lt;/code&gt;는 생성자, &lt;code&gt;__del__&lt;/code&gt;은 소멸자이다.
위 코드를  &lt;strong&gt;인터프리터 모드&lt;/strong&gt;에서 실행하면 &lt;code&gt;a = None&lt;/code&gt;을 실행한 직후 &lt;code&gt;Foo(&amp;quot;a&amp;quot;)가 메모리에서 제거 되었습니다&lt;/code&gt;라는 메시지를 볼 수 있을 것이다.
이처럼 RC를 사용하면 메모리가 필요 없어진 순간 제거 된다.&lt;/p&gt;&lt;p&gt;파이썬 내부에선 Reference Count 관리를 위해 &lt;code&gt;Py_INCREF&lt;/code&gt;와 &lt;code&gt;Py_DECREF&lt;/code&gt;를 사용한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name function&quot;&gt;Py_INCREF&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;                         &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token expression&quot;&gt;_Py_INC_REFTOTAL  _Py_REF_DEBUG_COMMA       &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;ob_refcnt&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;                                   &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;                                                &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        &lt;span class=&quot;token expression&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;_py_decref_tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_Py_DEC_REFTOTAL  _Py_REF_DEBUG_COMMA       &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;ob_refcnt &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;             &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
            &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;_Py_CHECK_REFCNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;            &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;                                            &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
            &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;_Py_Dealloc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;                &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;_Py_DEC_REFTOTAL&lt;/code&gt;, &lt;code&gt;_Py_REF_DEBUG_COMMA&lt;/code&gt; 처럼 디버그에서 사용하는 내용을 지우면,
&lt;code&gt;Py_INCREF&lt;/code&gt;는 다음과 같으며,&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;ob_refcnt&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Py_DECREF&lt;/code&gt;는 다음과 같다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;_py_decref_tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;ob_refcnt &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;_Py_Dealloc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_py_decref_tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;RC를 사용하면 프로그래머가 큰 신경을 쓰지 않아도, 필요 없다고 판단된 메모리는 그 즉시 해제할 수 있다.
개인적으로 RC는 &lt;em&gt;비용있는&lt;/em&gt; 추상화 방식 중에서는 가장 우아한 방식이라고 생각한다.
아래의 문제점들만 없다면 말이다.&lt;/p&gt;&lt;h1&gt;문제&lt;/h1&gt;&lt;p&gt;메모리관리에 대해 알아본 프로그래머라면 알겠지만, 아쉽게도 RC는 만병통치약이 아니다.&lt;/p&gt;&lt;h2&gt;오버헤드&lt;/h2&gt;&lt;p&gt;첫번째로 오버헤드를 이야기 할 수 있다.
우선 &lt;code&gt;PyObject&lt;/code&gt;의 &lt;code&gt;ob_refcnt&lt;/code&gt; 처럼 레퍼런스 카운트를 저장할 공간이 추가적으로 필요하고,
변수를 할당할때도 추가적으로 레퍼런스 카운트를 관리해야 한다.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://blog.sn0wle0pard.io/2018/under-the-c-1/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;저번 글&lt;/a&gt;에 나온 내용을 다시 살펴보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;파이썬 인터프리터에게 위 코드는 다음의 C 코드와 비슷하다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;T &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Py_True&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_INCREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PyObject_RichCompareBool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Py_NE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;변수 &lt;code&gt;A&lt;/code&gt;와 &lt;code&gt;True&lt;/code&gt;를 비교하기 위해 임시 변수 &lt;code&gt;T&lt;/code&gt;를 만들었고, T는 &lt;code&gt;Py_True&lt;/code&gt;값을 참조 한다.
아쉽게도 단순히 참조에서 끝나는게 아니라 필요에 따라 &lt;code&gt;Py_INCREF&lt;/code&gt;와 &lt;code&gt;Py_DECREF&lt;/code&gt;가 호출 된다.&lt;/p&gt;&lt;p&gt;오버헤드는 메모리 관리에 드는 수고를 생각하면 넘어갈 수 있을 수도 있다.
그러나 아쉽게도 해제할 수 없는 메모리도 있다.&lt;/p&gt;&lt;h2&gt;순환참조&lt;/h2&gt;&lt;p&gt;RC는 안전하지만 완전하진 않다.
모든 해제된 메모리는 필요 없는 메모리지만, 모든 필요없는 메모리가 헤제되는건 아니다.&lt;/p&gt;&lt;p&gt;예를 들어 다음의 코드를 보자,&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;Foo(&amp;quot;{}&amp;quot;)가 메모리에서 제거 되었습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)의 ref count는 1&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;b&amp;quot;)의 ref count는 1&lt;/span&gt;

a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; b  &lt;span class=&quot;token comment&quot;&gt;# a.child가 Foo(&amp;quot;b&amp;quot;)를 참조하므로 Foo(&amp;quot;b&amp;quot;)의 레퍼런스 카운트는 1 증가하여 2가 된다&lt;/span&gt;
b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# b.child가 Foo(&amp;quot;a&amp;quot;)를 참조하므로 Foo(&amp;quot;a&amp;quot;)의 레퍼런스 카운트는 1 증가하여 2가 된다&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a가 더이상 Foo(&amp;quot;a&amp;quot;)를 참조하지 않으므로 레퍼런스 카운트는 1 감소해서 1 이다&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b가 더이상 Foo(&amp;quot;b&amp;quot;)를 참조하지 않으므로 레퍼런스 카운트는 1 감소해서 1 이다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)와 Foo(&amp;quot;b&amp;quot;)모두 접근할 수 없지만, 레퍼런스 카운트가 남아 있으므로 해재되지 않는다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위 코드를  &lt;strong&gt;인터프리터 모드&lt;/strong&gt;에서 실행하면 &lt;code&gt;a = 0&lt;/code&gt;이나 &lt;code&gt;b = 0&lt;/code&gt;이 되면 더이상 &lt;code&gt;Foo(&amp;quot;a&amp;quot;)&lt;/code&gt;와 &lt;code&gt;Foo(&amp;quot;b&amp;quot;)&lt;/code&gt;에 접근 할 수 없다.
그러나 &lt;code&gt;a.child&lt;/code&gt;와 &lt;code&gt;b.child&lt;/code&gt;의 참조때문에 올라간 레퍼런스 카운트가 존재해 a와 b가 더이상 child에 접근 못 하더라도 해제가 불가능 하다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;Foo(&amp;quot;{}&amp;quot;)가 메모리에서 제거 되었습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)의 ref count는 1&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# a.child가 Foo(&amp;quot;a&amp;quot;)를 참조하므로 Foo(&amp;quot;a&amp;quot;)의 레퍼런스 카운트는 1 증가하여 2가 된다&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a가 더이상 Foo(&amp;quot;a&amp;quot;)를 참조하지 않으므로 레퍼런스 카운트는 1 감소해서 1 이다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)에 접근할 수 없지만, 레퍼런스 카운트가 남아 있으므로 해재되지 않는다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또 하나, 위처럼 자기 자신을 참조하는 경우도 마찬가지로 해재할 수 없다.
이 처럼 서로 참조하는 경우를 &lt;strong&gt;순환참조&lt;/strong&gt;라고 하며, 레퍼런스 카운트로는 해결하기 까다롭다.&lt;/p&gt;&lt;p&gt;좀 더 쉬운 예를 하나 보면,&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
x&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;파이썬의 경우 위의 코드는 자기자신을 참조한다.&lt;/p&gt;&lt;h1&gt;GC&lt;/h1&gt;&lt;p&gt;이러한 이유로 파이썬은 RC만을 사용하지 않고, 추가적으로 GC도 사용한다.
엄밀하게 말하면 RC도 GC의 일부지만 이 글에선 RC가 아닌 GC를 말하기로 하자.
파이썬의 GC는 &lt;code&gt;gcmodule.c&lt;/code&gt;에 &lt;a href=&quot;https://github.com/python/cpython/blob/master/Modules/gcmodule.c&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;정의&lt;/a&gt; 되어 있으며,
자세한 내용은 추후에 다루도록 하겠다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;Foo(&amp;quot;{}&amp;quot;)가 메모리에서 제거 되었습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 1&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 1&lt;/span&gt;

b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 2&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; b  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 2&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 1 감소해서 1 이다 (b.child에 참조가 남아있다)&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 1 감소해서 1 이다 (a.child에 참조가 남아있다)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; gc
gc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;collect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# GC를 직접 호출해보자 (원래는 필요한 경우 자동으로 호출 된다)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드를 실행하면 &lt;code&gt;gc.collect()&lt;/code&gt;가 더이상 접근할 수 없는 객체를 해재하는 것을 볼 수 있다.
특별한 설정을 하지 않는다면 파이썬은 자동으로 필요할때 gc를 호출해 RC로 해재할 수 없는 객체를 해제해 준다.&lt;/p&gt;&lt;p&gt;GC도 사용하므로 파이썬의 메모리 관리는 아쉽게도 RC하나만 사용하는 것에 비해 추가적인 비용이 든다.&lt;/p&gt;&lt;p&gt;다행인 점은 파이썬의 GC는 순환참조를 만들 가능성이 있는 컨테이너 객체를 대상으로 사용되어 모든 객체를 검사하진 않는다.&lt;/p&gt;&lt;p&gt;실제로, GC는 파이썬 2.0 버전부터 도입 되었으며 &lt;a href=&quot;http://www.arctrix.com/nas/python/gc/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;당시 자료&lt;/a&gt;를 보면 이전 버전에 비해 약 4%의 성능 저하의 원인으로 생각한다고 한다.&lt;/p&gt;&lt;p&gt;이런 이유로 성능에 여유가 없거나, 순환참조를 피할 자신이 있다면 &lt;code&gt;gc.disable()&lt;/code&gt;로 GC를 꺼도 된다.
대표적으로 &lt;a href=&quot;https://instagram-engineering.com/dismissing-python-garbage-collection-at-instagram-4dca40b29172&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;인스타그램&lt;/a&gt;은 GC를 사용하지 않는다고 한다.&lt;/p&gt;&lt;h2&gt;덤: 약한참조&lt;/h2&gt;&lt;p&gt;다른 RC를 사용하는 언어를 사용한 분들은 들어본적이 있겠지만,
순환참조로 인한 메모리 누수를 피하는 또다른 방법은 &lt;strong&gt;약한참조&lt;/strong&gt;가 있다.&lt;/p&gt;&lt;p&gt;쉽게 설명하면 참조는 하되, 레퍼런스 카운트는 올리지 않는 것이다.
파이썬은 &lt;code&gt;weakref&lt;/code&gt;모듈을 통해 약한 참조를 사용할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__del__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;Foo(&amp;quot;{}&amp;quot;)가 메모리에서 제거 되었습니다&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# a의 ref count는 1&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# b의 ref count는 1&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; weakref

&lt;span class=&quot;token comment&quot;&gt;# weakref를 사용했으므로 레퍼런스 카운트는 변화하지 않는다&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; weakref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;b&amp;quot;)의 레퍼런스 카운트는 여전히 1 이다&lt;/span&gt;
b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; weakref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)의 레퍼런스 카운트는 여전히 1 이다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 그러나 접근은 가능하다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# child 자체는 weakref 객체이므로 호출을 통해 가리키는 객체를 가져올수 있다&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;a&amp;quot;)의 레퍼런스 카운트는 1 감소해서 0 이다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 소멸자가 호출된다&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 더이상 접근이 불가능하므로 None이 반환된다&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Foo(&amp;quot;b&amp;quot;)의 레퍼런스카운트는 1 감소해서 0 이다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 소멸자가 호출된다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;weakref&lt;/code&gt;는 접근이 가능하면 해당 객체를, 해당객체가 접근 불가능 하면 &lt;code&gt;None&lt;/code&gt;을 반환한다.&lt;/p&gt;&lt;h1&gt;RC와 GIL&lt;/h1&gt;&lt;p&gt;CPython은 멀티 &lt;em&gt;스레드&lt;/em&gt;를 효율적으로 사용하지 못한다.
한 파이썬 프로세스는 한번에 한 스레드만 사용하며, 이를 GIL (Global interpreter lock) 이라고 부른다.&lt;/p&gt;&lt;p&gt;CPython에서 GIL을 제거하려는 시도는 종종 있지만, 아직까지는 GIL이 남아 있다.
그 이유중 하나가 바로 RC 때문이다.&lt;/p&gt;&lt;p&gt;다만 GIL 자체는 선택사항이며 원한다면 RC를 쓰고도 GIL을 제거 할 수도 있다.
잠시 다른 파이썬 구현체를 보자.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Jython은 GC로 관리 하며, GIL이 없다&lt;/li&gt;&lt;li&gt;IronPython은 GC로 메모리 관리 하며, GIL이 없다&lt;/li&gt;&lt;li&gt;PyPy는 GC로 메모리 관리를 하며, GIL이 &lt;em&gt;있다&lt;/em&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;PyPy가 대표적으로 GC만 사용하나, GIL이 존재한다.
그러나, PyPy는 2017년 8월 블로그글 &lt;a href=&quot;https://morepypy.blogspot.kr/2017/08/lets-remove-global-interpreter-lock.html&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Let&amp;#x27;s remove the Global Interpreter Lock&lt;/a&gt;를 통해 GIL을 제거할 수 있음을 알렸다.&lt;/p&gt;&lt;p&gt;PyPy의 블로그 글에 따르면 CPython에서 GIL을 제거하기 힘든 두가지 이유는 다음과 같다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;how do we guard access to mutable data structures with locks and&lt;/li&gt;&lt;li&gt;what to do with reference counting that needs to be guarded.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;멀티스레드에서 발생하는 문제중 하나는 여러 스레드가 동시에 한 변수를 수정하려는 문제이다.
멀티스레드를 사용해본 경험이 있다면 &lt;code&gt;lock guard&lt;/code&gt;와 &lt;code&gt;mutex&lt;/code&gt;등을 보거나 사용해본 점이 있을 것이다.&lt;/p&gt;&lt;p&gt;그렇다면 스레드간 공유하는 객체는 읽기만 가능하고, 수정은 못하게 한다면 되지 않을까?
좋은 접근이지만 RC를 사용하면 쉽지많은 않은 일이다.&lt;/p&gt;&lt;p&gt;다시 위의 코드를 보자&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; sys


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;

a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;foo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;foo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

read_foo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# read_foo의 매개변수 foo가 a를 참조 있으므로 Foo의 레퍼런스 카운트는 증가하였다&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# read_a 함수가 끝나면 레퍼런스 카운트는 다시 줄어든다&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;getrefcount&lt;/code&gt;는 객체의 레퍼런스 카운트 갯수를 구하는 함수다.
우리가 생각한 레퍼런스 카운트 횟수보다 좀 더 많을 텐데 &lt;a href=&quot;https://docs.python.org/3/library/sys.html#sys.getrefcount&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;문서&lt;/a&gt;의 내용에 따르면, &lt;code&gt;getrefcount&lt;/code&gt;함수를 실행하기 위해 매개변수로 참조 카운트가 증가 하여 그렇다.&lt;/p&gt;&lt;p&gt;내용으로 돌아가면 &lt;code&gt;read_foo&lt;/code&gt;는 &lt;code&gt;a&lt;/code&gt;의 내용을 읽기만 하고 수정하진 않았지만, 매개변수등 참조가 일어 날때마나 &lt;code&gt;obj_refcnt&lt;/code&gt;는 증/감 한다.
여러 스레드가 동시에 참조를 만든다면 동시수정과 다름 없는 상태가 된다.&lt;/p&gt;&lt;p&gt;추가로 RC를 사용하고도 이 문제를 피할 방법 자체는 있다.
예를 들어 &lt;code&gt;std::atomic&lt;/code&gt;이 있다(&lt;a href=&quot;http://www.cplusplus.com/reference/atomic/atomic/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;C++ 문서&lt;/a&gt;).
atomic은 DB의 Atomic 성질 처럼 순서대로 진행하는걸 보장하는데,
즉 두 스레드가 거의 동시에 레퍼런스 카운트를 변화 하려고 하면, 먼저 요청한 스레드의 요청대로 한 obj_refcnt를 변화시키고, 그 다음 스레드 요청을 처리한다.&lt;/p&gt;&lt;p&gt;대표적인 예로 Rust의 &lt;code&gt;Rc&lt;/code&gt;와 &lt;code&gt;ARc&lt;/code&gt;가 있다.
Rust 자체는 무비용 추상화로 메모리를 관리하지만, 원한다면 RC로 관리되는 객체를 만들 수 있다.
이 경우 싱글 스레드면 &lt;code&gt;Rc&lt;/code&gt;를 멀티 스레드면 &lt;code&gt;ARc&lt;/code&gt;를 사용하면 되는데, &lt;code&gt;ARc&lt;/code&gt;는 레퍼런스 카운트가 atomic 하게 동작한다.&lt;/p&gt;&lt;p&gt;Atomic을 보장하는 것은 추가적인 오버헤드가 있다는 이야기다.
실제로 ARc &lt;a href=&quot;https://doc.rust-lang.org/std/sync/struct.Arc.html&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;문서&lt;/a&gt;를 보면,
원자성 보장은 일반 메모리 접근보다 비용이 많이 들고, 싱글스레드라면 비용을 줄이기 위에 &lt;code&gt;Rc&lt;/code&gt;를 쓸 수 있다고 언급하고 있다.&lt;/p&gt;&lt;p&gt;현재 파이썬의 대부분은 싱글 스레드 환경이며, 멀티스레드를 위해 싱글스레드 저하를 선택할 것인가는 논쟁의 여지가 있다.
현재로는 파이썬 커뮤니티는 멀티스레드 사용을 위해 싱글스레드 성능이 저하 되는 해결을 받아 들이고 싶어 하지 않는다.
&lt;a href=&quot;https://wiki.python.org/moin/GlobalInterpreterLock?action=show&amp;amp;redirect=GIL&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;파이썬 위키&lt;/a&gt;의 GIL 항목을 인용 하면&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;The BDFL has said he will reject any proposal in this direction that slows down single-threaded programs.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;BDFL은 파이썬 창시자 귀도 반 로썸을 말한다. 위키백과의 설명을 인용한다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;자비로운 종신독재자(BDFL, Benevolent Dictator for Life)란 소수의 오픈 소스 소프트웨어 개발 리더에게 부여되는 칭호이다. 주로 커뮤니티 내에서 논쟁이 있을 때 최종적으로 결론을 내려줄 수 있는, 프로젝트 창시자인 경우가 많다. 이 표현은 1995년에 파이썬의 창시자 귀도 반 로섬을 가리키는 호칭으로 처음 사용되었다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;개인적으로도 멀티스레드를 위해 싱글스레드 성능저하가 심각하다면 받아 들이고 싶지 않다.&lt;/p&gt;&lt;p&gt;실제로 파이썬에 atomic 레퍼런스 카운트를 사용하게되면 &lt;a href=&quot;https://greek0.net/blog/2015/05/23/python_atomic_refcounting_slowdown/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;약 23%의 성능저하&lt;/a&gt;를 보인다고 한다.&lt;/p&gt;&lt;p&gt;공유하는 객체만 원자성 보장을 하면 어떨까?
멀티 스레드를 사용하는 코딩을 해도 스레드간 공유될 객체가 몇 안될 것 같다고 생각한다면,
파이썬 콘솔을 켜서 다음 코드를 실행해 보길 권한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; sys
&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getrefcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2296&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;글을 시작하며 언급한것 처럼 파이썬의 모든건 객체다.
단순한 값으로 생각할 수 있는 &lt;code&gt;None&lt;/code&gt;도 하나의 객체며 여러곳에서 공유하고 있다.
왜 어려운 문제인지 짐작 할 수 있을 것이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Under the C: 소개]]></title><description><![CDATA[소개 Under the C…]]></description><link>https://blog.hanlee.io/2018/under-the-c-1</link><guid isPermaLink="false">https://blog.hanlee.io/2018/under-the-c-1</guid><pubDate>Wed, 11 Apr 2018 02:41:22 GMT</pubDate><content:encoded>&lt;h1&gt;소개&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;Under the C 시리즈는 작년, 파이썬에 &lt;a href=&quot;https://github.com/python/cpython/pull/3085&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;아주 작은 기여&lt;/a&gt;를 하며 공부한 내용을 정리한 글 입니다.&lt;/li&gt;&lt;li&gt;잘못된 내용을 알려주신다면, 최대한 빨리 수정하도록 하겠습니다&lt;/li&gt;&lt;li&gt;파이썬 구현체는 계속 발전하고 있으므로, 이 글의 내용과 다소 달라질 수 있습니다.&lt;/li&gt;&lt;li&gt;특별한 언급이 없다면, 파이썬은 공식 구현체인
&lt;a href=&quot;https://github.com/python/cpython&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;CPython&lt;/a&gt;의 파이썬 3.x 구현을 의미합니다.&lt;/li&gt;&lt;/ul&gt;&lt;h1&gt;들어가며&lt;/h1&gt;&lt;p&gt;파이썬은 &lt;code&gt;인터프리터 언어&lt;/code&gt;다. 사소한 말이지만 몇가지 사실을 품고 있다.
코드를 한줄 한줄 읽고 실행을 하는 인터프리터 언어는 컴파일 언어에 비해 최적화의 여지가 적다.&lt;/p&gt;&lt;p&gt;인터프리터 언어를 다룬다면, 같은 결과가 나오는 코드를 작성하여도,
프로그래머의 최적화, 언어의 이해도에 따라 꽤 다른 실행을 하는 코드를 작성할 수 있다.&lt;/p&gt;&lt;p&gt;몇가지 동일한 결과를 내는 파이썬 코드를 비교해보자.&lt;/p&gt;&lt;h1&gt;코드 최적화&lt;/h1&gt;&lt;p&gt;다음 코드를 보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;fruits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
fruits&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;apple&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
fruits&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;strawberry&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;빈 딕셔너리를 만들고 두쌍의 키-값을 할당했다. 위의 코드는 어떤 바이트 코드를 만들까?&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&amp;#x27;&amp;#x27;&amp;#x27;
fruits = dict()
fruits[&amp;#x27;apple&amp;#x27;] = 10
fruits[&amp;#x27;strawberry&amp;#x27;] = 20
&amp;#x27;&amp;#x27;&amp;#x27;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;&amp;lt;string&amp;gt;&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;exec&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위 코드로 바이트 코드를 확인 할 수 있다. &lt;code&gt;dis&lt;/code&gt; 모듈은 파이썬의 내장 모듈로, 바이트코드 역어셈블러 모듈이다.&lt;/p&gt;&lt;p&gt;위 코드를 인터프리터 모드에서 실행하면 다음와 같은 결과를 볼 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_NAME                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;dict&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; STORE_NAME               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;fruits&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; LOAD_NAME                &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;fruits&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;apple&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt; STORE_SUBSCR

  &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;          &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; LOAD_NAME                &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;fruits&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;18&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;strawberry&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; STORE_SUBSCR
             &lt;span class=&quot;token number&quot;&gt;22&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;None&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt; RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;딕셔너리를 만드는, 더 파이썬다운 코드는 제너릭을 이용하는 것 이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;fruits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&amp;#x27;apple&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&amp;#x27;strawberry&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위 코드도 같은 바이트코드를 만들까? 한번 코드의 바이트코드를 한번 확인해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&amp;#x27;&amp;#x27;&amp;#x27;
fruits = {
    &amp;#x27;apple&amp;#x27;: 10,
    &amp;#x27;strawberry&amp;#x27;: 20,
}
&amp;#x27;&amp;#x27;&amp;#x27;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;&amp;lt;string&amp;gt;&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;exec&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;apple&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;strawberry&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; BUILD_CONST_KEY_MAP      &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; STORE_NAME               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;fruits&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;None&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt; RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;같은 역할을 하지만 서로 다른 바이트코드를 생성하는 것을 확인 할 수 있다.
사실 이 예제는 파이썬 입장에선 조금 억울 하고, 최적화가 쉽지 않을 수 있다.
파이썬 인터프리터에게 첫번째 코드는 3줄의 코드이며, 두번째 코드는 한줄의 코드이기 때문이다.
(파이썬은 괄호안의 줄바꿈을 무시한다)&lt;/p&gt;&lt;p&gt;그렇다면 한가지 예를 더 살펴 보자.
PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
&lt;a href=&quot;https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Back to the Low Level&lt;/a&gt;
에서 코드와 내용을 가져왔다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;A &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&amp;#x27;&amp;#x27;&amp;#x27;
A = False
if A != True:
    pass
&amp;#x27;&amp;#x27;&amp;#x27;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;&amp;lt;string&amp;gt;&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;exec&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; STORE_NAME               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; LOAD_NAME                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; COMPARE_OP               &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; POP_JUMP_IF_FALSE       &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;     &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;None&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt; RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위 코드보다 더 파이썬 다운 코드는 아래와 같다. (조건문 실행여부를 이미 알고 있는건 넘어가자)&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;A &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; A&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis
code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&amp;#x27;&amp;#x27;&amp;#x27;
A = False
if not A:
    pass
&amp;#x27;&amp;#x27;&amp;#x27;&lt;/span&gt;
co &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;&amp;lt;string&amp;gt;&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;exec&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;co&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; STORE_NAME               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; LOAD_NAME                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; POP_JUMP_IF_TRUE         &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;     &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;None&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위 코드는 매우 비슷하며, 같은 역할을 하지만, 두 코드는 서로 다른 바이트코드를 만들었고, 연산 횟수도 다르다.&lt;/p&gt;&lt;h2&gt;Under the C&lt;/h2&gt;&lt;p&gt;위의 두 코드를 C언어레벨에서 확인하면 더 두드러진 차이를 볼 수 있다.
마찬가지로 PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
&lt;a href=&quot;https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Back to the Low Level&lt;/a&gt;
에서 코드와 내용을 가져왔다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;파이썬 인터프리터에게 위 코드는 다음의 C 코드와 같다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;T &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Py_True&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_INCREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PyObject_RichCompareBool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Py_NE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Py_DECREF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이 코드는&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; A&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음의 코드와 같다&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PyObject_Not&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;왜 파이썬 다운 코드를 작성해야하는지 이해할 수 있을 것이다.&lt;/p&gt;&lt;h2&gt;여담&lt;/h2&gt;&lt;p&gt;파이썬다운 코드가 항상 성능 향상을 약속하진 않다, 예를 들어 &lt;code&gt;elif&lt;/code&gt;가 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;print_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;print_2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; COMPARE_OP               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; POP_JUMP_IF_FALSE       &lt;span class=&quot;token number&quot;&gt;18&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; LOAD_GLOBAL              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;print&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt; POP_TOP
             &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; JUMP_FORWARD            &lt;span class=&quot;token number&quot;&gt;26&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;to &lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;     &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;18&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;22&lt;/span&gt; COMPARE_OP               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt; POP_JUMP_IF_FALSE       &lt;span class=&quot;token number&quot;&gt;36&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;          &lt;span class=&quot;token number&quot;&gt;26&lt;/span&gt; LOAD_GLOBAL              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;print&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;28&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt; POP_TOP
             &lt;span class=&quot;token number&quot;&gt;34&lt;/span&gt; JUMP_FORWARD             &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;to &lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;     &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;36&lt;/span&gt; LOAD_GLOBAL              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;print&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;38&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt; POP_TOP
        &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;None&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;46&lt;/span&gt; RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dis &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dis

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;print_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;elif&lt;/span&gt; raw &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

dis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;print_2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;log&quot;&gt;&lt;pre class=&quot;language-log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; COMPARE_OP               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; POP_JUMP_IF_FALSE       &lt;span class=&quot;token number&quot;&gt;18&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; LOAD_GLOBAL              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;print&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt; POP_TOP
             &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; JUMP_FORWARD            &lt;span class=&quot;token number&quot;&gt;26&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;to &lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;     &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;18&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;22&lt;/span&gt; COMPARE_OP               &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt; POP_JUMP_IF_FALSE       &lt;span class=&quot;token number&quot;&gt;36&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;          &lt;span class=&quot;token number&quot;&gt;26&lt;/span&gt; LOAD_GLOBAL              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;print&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;28&lt;/span&gt; LOAD_FAST                &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;raw&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt; POP_TOP
             &lt;span class=&quot;token number&quot;&gt;34&lt;/span&gt; JUMP_FORWARD             &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;to &lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;     &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;36&lt;/span&gt; LOAD_GLOBAL              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;print&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;38&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt; CALL_FUNCTION            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt; POP_TOP
        &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt; LOAD_CONST               &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;(&lt;/span&gt;None&lt;span class=&quot;token operator&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;token number&quot;&gt;46&lt;/span&gt; RETURN_VALUE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;줄번호는 다르지만 같은 바이트코드를 생성하는 걸 볼 수 있다. &lt;code&gt;elif&lt;/code&gt;는 그저 문법 설탕이다.&lt;/p&gt;&lt;h1&gt;마치며&lt;/h1&gt;&lt;blockquote&gt;&lt;p&gt;섣부른 최적화는 만악의 근원이다 — 도널드 커누스&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;사실 언어적 특성이 코딩에 미치는 영향보단, 프로그램의 로직이 더 중요하다고 생각한다.&lt;/p&gt;&lt;p&gt;그러나 파이썬 인터프리터 (C언어) 아래에서 일어나는 일을 이해한다면,
분명 더 나은 프로그래머가 될 수 있을 것이고, 재미있는 특성들도 알게 될 것이다.&lt;/p&gt;&lt;p&gt;다음에는 파이썬을 이해하는데 매우 중요한 &lt;code&gt;PyObject&lt;/code&gt;를 다룰 예정이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[고밀도 디스플레이를 위한 이미지 다루기]]></title><description><![CDATA[들어가며 레티나 디스플레이를 시작으로 다양한 고밀도 디스플레이 기기가 늘어났습니다.
이에 따라 웹에서도 고 해상도 이미지의 수요가 생겼습니다.
고 해상도 이미지를 제공하는 방법을 알아봅니다. Media Queries: resolution feature…]]></description><link>https://blog.hanlee.io/2018/high-density-display-and-images</link><guid isPermaLink="false">https://blog.hanlee.io/2018/high-density-display-and-images</guid><pubDate>Sat, 20 Jan 2018 15:00:00 GMT</pubDate><content:encoded>&lt;h1&gt;들어가며&lt;/h1&gt;&lt;p&gt;레티나 디스플레이를 시작으로 다양한 고밀도 디스플레이 기기가 늘어났습니다.
이에 따라 웹에서도 고 해상도 이미지의 수요가 생겼습니다.
고 해상도 이미지를 제공하는 방법을 알아봅니다.&lt;/p&gt;&lt;h1&gt;Media Queries: resolution feature&lt;/h1&gt;&lt;p&gt;&lt;code&gt;resolution&lt;/code&gt;은 고밀도 디스플레이를 위해 고안된 css문법으로,
IE9를 포함한 &lt;a href=&quot;https://caniuse.com/#feat=css-media-resolution&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;브라우저 대부분&lt;/a&gt;이 지원합니다.
문법은 &lt;code&gt;(min/max)-resolution: 값&lt;/code&gt;으로 사용되며, 기본 단위는 dppx입니다.&lt;/p&gt;&lt;p&gt;이 미디어쿼리를 사용하면 고밀도 디스플레이와 저밀도 디스플레이에 서로 다른 이미지를 보여줄 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;figure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;some_img.ext&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;img-normal&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;normal image&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;some_img@2x.ext&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;img-retina&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;retina image&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;figure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; initial&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-normal&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;background-image&lt;/code&gt;를 사용할 것이면 다음과 같이 쓸 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;하지만 아쉽게도 safari는 &lt;code&gt;min/max-device-pixel-ratio&lt;/code&gt; 문법만을 지원하고 있어 다음을 사용해야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-webkit-min-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 오페라미니와 IE는 dppx를 지원하지 않기 때문에 적당한 dpi를 사용해야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 192dpi&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;결과적으로 IE9을 포함한 대부분 브라우저를 지원하려면 다음 문법을 사용하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-webkit-min-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 192dpi&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2dppx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; initial&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-normal&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;덤으로 만약 파이어 폭스와 오페라 이전 버전을 지원하고 싶다면 다음과 같은 미디어 쿼리를 추가하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min--moz-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-o-min-device-pixel-ratio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2/1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;resolution&lt;/code&gt; 미디어 쿼리를 사용하면, 브라우저 대부분을 지원하자만, 그러기 위해서는 미디어 쿼리가 복잡해지는 문제가 있습니다.
게다가 한가지 문제가 더 생기는데 브라우저의 &lt;strong&gt;동시 연결 제한&lt;/strong&gt; 문제입니다.&lt;/p&gt;&lt;h1&gt;동시 연결 제한&lt;/h1&gt;&lt;p&gt;HTTP 1.1의 표준인 &lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;RFC 2616&lt;/a&gt;의 8.1.4절을 살펴보면 다음과 같은 내용이 있습니다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Clients that use persistent connections SHOULD limit the number of simultaneous connections that they maintain to a given server.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;한국전자통신연구소의 번역본은 다음과 같습니다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;지속적인 접속을 사용하는 클라이언트는 특정 서버로의 동시 접속 숫자에 제한을 두어야 한다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;실제로 브라우저들은 &lt;em&gt;도메인당 최대 연결수를 제한하고 있습니다&lt;/em&gt;. 그 수는 브라우저 마다 다릅니다.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;브라우저&lt;/th&gt;&lt;th&gt;도메인당 최대 연결 수&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Internet Explorer® 7.0&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Internet Explorer 8.0 &amp;amp; 9.0&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Internet Explorer 10.0&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Internet Explorer 11.0&lt;/td&gt;&lt;td&gt;13&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Firefox®&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Chrome™&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Safari®&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Opera®&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;사파리를 예로 들면, 한 웹페이지의 같은 도메인 한번에 받아 올 수 있는 이미지는 최대 6개 입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-1.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-2.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-3.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-4.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-5.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-6.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-7.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-8.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-9.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-10.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-11.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-12.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/a93a9/img-load.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVQoz61QQUsbQRgdaKH0UNpCaanFi2ALhUKF/onSi4t46LU/LEjpwYI12iZZqYkmWqk2MTEajcqa3RgT3aw7M7tm1yS7mVdmVRB67eHxHu99H/PmI5/imxNvUmcYVRleqRQvryH1qErx9ifDu0WG0RT9J5f8eoGi0PYR+B3kS+UJ8n6mpJA4A5nlAYnzgMzxkMSvMcvDu/M8vP/DCcm3W/6tXO7l+SAAgPLevkI+zJSUO3EKEuficdIRT1IOHiUc3PvOQWZZxA8Sjnww8iUeSk46cifa+8NCAQywtVtVyMd4URlRz/EsScVQkooXKYahFMOwKpljRH5tgeJpwsZNNpSkGE5RPE9SqUWJ9QUGAUqVXYXMzatKuqRh46Am1vc0kSvvY233EL92DrBePcK2foKtozrK+gk2tTryh0bEv/c0bOzXkD/UxZFRF4auQ11YUEgiqSpbuxpOGw1BLUs47gUcx4XnXqHedqCbDmpnHL7vQ/QuEXYvMeh1byD6/Z7odDooFosK+To3r+xUdmAYhuCci34QoNvrodfv47LbxbnjwXI82K4H3++BUY6Ox3HhudGc5/vCvwK2t7cVks6sKq3WGSi1BWdMMMbAOQelFLZtw/c66Fy4Eay2hZNGE47jgNo2KGOwLEu2E9IrFAoKyWWXx6vVKjRNC0zTDNqmGVqWFbZarbBxfBy6rhua155kXa9FfFyvh81mM9TrjSAIw8DzPJTL5XGysrY2aRgGms0mZDt5C9d1o3aWZUV3k21lA9n8tNWK2DRN2OfnODXbGAiBXreLSqUySaY+fxlbTKen0plMbHl5OZbLZWPZbDbSS0tLsVwuF+krLxvLZDKRltnNzOrqamxlZWVqenp6jAD4r/gLSxQF43mjqAUAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;사파리 이미지 로딩&quot; title=&quot;사파리 이미지 로딩&quot; src=&quot;/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/663f3/img-load.png&quot; srcSet=&quot;/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/5e043/img-load.png 163w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/e5cc6/img-load.png 325w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/663f3/img-load.png 650w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/d880f/img-load.png 975w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/4c573/img-load.png 1300w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/a93a9/img-load.png 2960w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위 이미지를 보시면 최대 6개의 네트워크 연결을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;./same-domain-multiple-images.html&quot;&gt;여기에서&lt;/a&gt; 직접 확인해 보실 수 있습니다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;동일 도메인 연결 제한을 피하고 성능향상을 위해 CDN 서비스를 사용하기도 합니다.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;중요한 점은 브라우저는 보여지지 않는 파일도 가져옵니다. 즉, &lt;code&gt;display: none&lt;/code&gt; 혹은
무시된 &lt;code&gt;background-image&lt;/code&gt;도 가져옵니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-1.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-2.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-3.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-4.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-5.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-6.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-7.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-8.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-9.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-10.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-11.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;./img/normal-img-12.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/8e9b62e0e1aecf29c8245968544dcd02/a93a9/img-load-with-none.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACmklEQVQoz62PTWsTURiFL6KCoBa6lRIRakGwuPBPiJsOpSt3/qfSlRW3UhubJpl81GqhIrTGaVKTtE2T5juTzMe9M5mZNJmbe2SmpYhrF4cHzjnvfd9L3kZzy8+TKuZliqeyeaMF2cS8bOJFhuJllmI+eeX9nQd8ljLxc+DB9xwcKvll8mpDkUiUgmwyn3wOxUNFGSebjN/eYvzetsXJp2v/nzyYO2RTHwDypROJvN5QpFtREyTKxEzcErMJCzNxC3e2GMgmxd2YhftxK1iIh/Gr7EHcwmzSCmbCuQPKBTDFUbEskTfRnLSQ0jCXNEUkaYrHsolI0sSTFEUkRbGQCr5l4FHcwGOZIhIoGXQMzCWMgEIxJwJ8AuW4KJHtWEraOzqHclYTuXJF/CiUcVg6w0HxFMppFSeNNkoXTZTqbRxXGyic10P+OqkGM8hXLkSt3hC1Wg1JWZZILJGQcsdn6DSbwtA0MfI8jFwXY9eBqjOcqzaqfRst3YZKnZCXIw/T8Qh8MsbUnwjf94XrulAURSIft2JSsfgbjUZDMGYLpnkYjS4xHo8xdEfQLQe65cG0GYaeC2qOYFAV1O7Ccgw4jidc1wsfLBQKEvmyuy+p6gCUUsEYE4ZugjEG0zRhGAY814EztDG0bWiahk67A8uywjzQQNOCx4Rt28jlchLZ+/Z1qVwqoVKp+P1+39e0Adc0jfd6Pd5qtbht27zf73NN00PWarWQjXqd97pdXm+2fd/nfnBhPp9fInvf91cu6nW02+1w43A4RLBN13UMBgN4nhf6wdWUUnQ7nZCqqoadnjrAVIiwVygUVsi79x8WZTm1lk6nV7PZ7I0ymUyonZ2dkDf+dS/oB346nVnd3d1dlWV5bX19fZEA+K/6AwluBADG1Hi2AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;img load with none&quot; title=&quot;img load with none&quot; src=&quot;/static/8e9b62e0e1aecf29c8245968544dcd02/663f3/img-load-with-none.png&quot; srcSet=&quot;/static/8e9b62e0e1aecf29c8245968544dcd02/5e043/img-load-with-none.png 163w,/static/8e9b62e0e1aecf29c8245968544dcd02/e5cc6/img-load-with-none.png 325w,/static/8e9b62e0e1aecf29c8245968544dcd02/663f3/img-load-with-none.png 650w,/static/8e9b62e0e1aecf29c8245968544dcd02/d880f/img-load-with-none.png 975w,/static/8e9b62e0e1aecf29c8245968544dcd02/4c573/img-load-with-none.png 1300w,/static/8e9b62e0e1aecf29c8245968544dcd02/a93a9/img-load-with-none.png 2960w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위 이미지를 확인해 보시면 사용하지 않는 &lt;code&gt;normal-img-2.png&lt;/code&gt;와 &lt;code&gt;normal-img-3.png&lt;/code&gt;도 받아오는걸 확인 할 수 있습니다.&lt;/p&gt;&lt;p&gt;마찬가지로 &lt;a href=&quot;./same-domain-multiple-images-with-none.html&quot;&gt;여기에서&lt;/a&gt; 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;결국 resolution 미디어 쿼리를 이용해 이미지를 다룰경우, 불필요한 이미지도 모두 받아오게 됩니다.
따라서 고밀도 유저나 일반 유저나 모두 약 2배 가까운 이미지를 받게됩니다. 여러 이미지를 사용하는 페이지라면,
보이지 않는 이미지를 받는 도중 도메인 연결 제한에 걸려 보여줘야할 이미지를 받는데 더 시간이 걸릴 수도 있습니다.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;단, background-image를 이용할 경우에는 필요한 이미지만 받아옵니다.
따라서 가능하다면 &lt;strong&gt;보여줘야할 이미지만 선택해서 받아오게 해야합니다&lt;/strong&gt;. 그럼 다른 방법은 없을 까요?&lt;/p&gt;&lt;/blockquote&gt;&lt;h1&gt;JS를 이용해 동적으로 가져오기&lt;/h1&gt;&lt;p&gt;&lt;code&gt;window.devicePixelRatio&lt;/code&gt; (&lt;a href=&quot;https://caniuse.com/#feat=devicepixelratio&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;IE 11&lt;/a&gt;부터 지원)을 사용하거나,
위에 있는 미디어 쿼리를 적용한 element 상태를 보고 적합한 이미지를 가져오는 방법도 있습니다.&lt;/p&gt;&lt;p&gt;이 방식을 사용하실 거면, &lt;a href=&quot;https://github.com/strues/retinajs&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;retinajs&lt;/a&gt;를 추천합니다.
retinajs는 css js를 모두 지원하고 특히 다음과 같은 문법을 지원하는데요,&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;/images/my_image.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;data-rjs&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;/images/my-image@2x.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- or --&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;
  &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;/images/my_image.png&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;data-rjs&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;/images/my-image@2x.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이렇게 사용하면, 일반 디스플레이 이용자들은 &lt;code&gt;/images/my_image.png&lt;/code&gt;만을 받아 올 수 있습니다.&lt;/p&gt;&lt;p&gt;하지만 여전히 고밀도 이용자들은 여러 이미지를 받거나, 깜박임을 겪는 문제를 겪습니다.&lt;/p&gt;&lt;h1&gt;srcset&lt;/h1&gt;&lt;p&gt;HTML 5.1 부터 img element에 &lt;a href=&quot;https://www.w3.org/TR/html51/semantics-embedded-content.html#element-attrdef-img-srcset&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;srcset&lt;/a&gt; 속성이 추가 되었습니다.
현재 IE와 오페라미니를 제외한 모든 브라우저 에서 &lt;a href=&quot;https://caniuse.com/#feat=srcset&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;지원하고 있습니다&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;code&gt;srcset&lt;/code&gt;은 조건에 따라 다른 이미지를 가져오게 할 수 있는데요 다음과 같은 문법으로 사용합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;[이미지위치] [조건], ...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;쉼표로 구분하며, 앞에 조건과 사용할 이미지를 적으면 됩니다.
&lt;code&gt;resolution&lt;/code&gt;이 2이상인 디스플레이와 일반디스플레이를 구분해 이미지를 보여주려면 다음과 같이 사용합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;image-src.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;image-1x.png 1x, image-2x.png 2x&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;srcset을 사용하면 브라우저는 적합한 이미지만을 선택해 가져옵니다.
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACOklEQVQoz62QS08TURzF5xPxWZgQPogLH+xcuvCxAWFDYpRo4qNKMYxB2wIFSpVHpylCZDrvR8q8O49OO5N7zB1AFyYSExe/nPM/yb33/C/T2jqYed05w/zRKZ4enWH+8BRPvp2geqrAsiLoVgRF80uMch5CM0JIqg9Z9UtVtACS4qHW+DrD7O3w7HJXwm1uK597x+X3d46LueZh8YwXC8NMC8VICs2kpIVqJCXX8xW5bqW5okfYbHZYZq/ZYZd5EXe5bXLv5Xty5/kb3Hr1AS++azCMBKqRQDMTqOalV//MiGYmRNaGaGwfs0xz64B9eyLi4fpn8mhtgzzmGniwXkelXDmGaoRQ9KBU3YxgWDE0c3iZ6SGF6FZM6DdsNg9Z5svGJ7bTO8MuL5Af/T45l2TIug5BFCHJMiRJxvm5UHpZVtDv9yGKEgSBqghRkogkyUQQBHAcxzKbjRorSCoE3SOObRPbtuH7AaLhEGEYwvN8RFGEJElKdV0XjuPA9314nouBFxJ7mBHTCdFsH7HMzu4ua5kGAs8hjuMQeiBOEiRpWl4SxzGS5NKnaYrRaFQqzSlpmpLxeExo1u12WWZ/f5+9uLiA47i0HfE8D1mW3ch4PL72hEIf5HmeZVqt1vRgMKBr5LZt567rFqPRqCRN01/+L+RZluVXF04z7XZ7ljakzShBEGAymdxIPsl/+zwv2/Z6vVlmaWlpqlKpLK6uri5Uq9WFtbWPC7Va7Z+o1+tUF1dWVqYYAP+Vn+oDPtw585BRAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;webkit 2x&quot; title=&quot;webkit 2x&quot; src=&quot;/static/6b89a7a3b6ecd77e1a66dab09bf392f8/663f3/webkit-2x.png&quot; srcSet=&quot;/static/6b89a7a3b6ecd77e1a66dab09bf392f8/5e043/webkit-2x.png 163w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/e5cc6/webkit-2x.png 325w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/663f3/webkit-2x.png 650w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/d880f/webkit-2x.png 975w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/4c573/webkit-2x.png 1300w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/a93a9/webkit-2x.png 2960w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;
위 이미지를 보시면 &lt;code&gt;image-src.png&lt;/code&gt;나 &lt;code&gt;image-1x.png&lt;/code&gt;를 받지 않고 &lt;code&gt;image-2x.png&lt;/code&gt;만 받는걸 확인 할 수 있습니다.
&lt;a href=&quot;https://webkit.org/demos/srcset/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;여기에서&lt;/a&gt; 직접 확인해 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;어떤 조건에도 해당 되지 않거나, 이미지를 가져올 수 없다면 &lt;code&gt;src&lt;/code&gt;에 있는 이미지를 가져오게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;image-src.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;image-2x.png 2x&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어 위와 같이 작성하면 2x, 3x ... 밀도를 가진 기기는 &lt;code&gt;image-2x.png&lt;/code&gt;를 가져오고,
&lt;code&gt;srcset&lt;/code&gt;을 지원하지 않는 브라우저나 일반 디스플레이는 &lt;code&gt;image-src.png&lt;/code&gt;을 가져오게 됩니다.&lt;/p&gt;&lt;p&gt;따라서 &lt;code&gt;srcset&lt;/code&gt;을 지원하지 않는 브라우저도 (비록 상대적으로 흐린 이미지 겠지만) 이미지 자체는 표시가 될 뿐더러,
불필요한 이미지를 가져오지 않아, 성능에도 도움이 됩니다.&lt;/p&gt;&lt;h2&gt;덤&lt;/h2&gt;&lt;p&gt;&lt;code&gt;srcset&lt;/code&gt;으로 가져온 이미지는 한가지 특징을 가지게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;image-src.png&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;srcset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;image-2x.png 2x&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 100%&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음과 같이 HTML을 작성하였고, image-2x.png는 200px&lt;em&gt;200px 크기의 이미지 라면,
&lt;code&gt;img&lt;/code&gt;에 &lt;code&gt;width: 100%&lt;/code&gt;를 주었어도 100px&lt;/em&gt;100px으로 표시됩니다.&lt;/p&gt;&lt;p&gt;따라서 이미지 크기를 반드시 2배 키워서 사용해야 크기 실수를 방지 할 수 있습니다.
safari는 개발자용 &amp;gt; 응답형디자인모드 에서 최대 3x 까지 디스플레이 밀도를 조정하며 확인해 볼 수 있습니다.&lt;/p&gt;&lt;h3&gt;img-set&lt;/h3&gt;&lt;p&gt;css에도 img-set이란 속성이 있습니다. 아쉽게도 현재는 사파리와 크롬만 &lt;a href=&quot;https://caniuse.com/#search=image-set&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;지원하고&lt;/a&gt; 있는데요,
다음과 같은 방법으로 사용할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.test&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image-1x.png&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;-webkit-image-set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image-1x.png&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; 1x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image-2x.png&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; 2x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;75px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아쉽게도 사파리와 크롬만 지원하지만 &lt;code&gt;srcset&lt;/code&gt;처럼 fallback이 있으므로 콘텐츠에 문제를 만들지 않으며, 적합한 이미지만 골라 받아 오게 됩니다.&lt;/p&gt;&lt;p&gt;하지만,&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;only&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;min-resolution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;.img-retina&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 css를 사용해도 적합한 파일만을 받기 때문에 현재로썬 복잡한 미디어 쿼리를 작성하기 싫을 경우에 유용합니다.&lt;/p&gt;&lt;h1&gt;결론&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;문서 상단처럼 고밀도 디스플레이에 서로 다른 HTML Element를 보여줘야 한다&lt;/li&gt;&lt;li&gt;동적으로 이미지를 가져오는 것이 싫다&lt;/li&gt;&lt;li&gt;IE에도 고해상도 이미지를 보여주고 싶다&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;code&gt;resolution&lt;/code&gt; 미디어 쿼리를 이용하세요.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;IE를 지원해야 합니다&lt;/li&gt;&lt;li&gt;동적으로 이미지를 가져와도 좋다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;자바스크립트를 이용해 구현하여 사용합니다. 개인적으로는 retinajs를 추천합니다.&lt;/p&gt;&lt;p&gt;그외의 경우에는 &lt;code&gt;srcset&lt;/code&gt;과 사용하시는 것을 권장합니다.&lt;/p&gt;</content:encoded></item></channel></rss>