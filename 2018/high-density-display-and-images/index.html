<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.20.0"/><meta property="og:type" content="article" data-gatsby-head="true"/><meta property="og:title" content="고밀도 디스플레이를 위한 이미지 다루기" data-gatsby-head="true"/><meta property="og:description" content="레티나 디스플레이에서 또렷한 이미지를 제공해 봅시다" data-gatsby-head="true"/><meta property="og:image" content="/static/2005f0c47cd24a035598e7c4f72e0f20/597c4/thumbnail.png" data-gatsby-head="true"/><meta property="og:author" content="이한" data-gatsby-head="true"/><meta property="og:site_name" content="명시지(形式知) - 기록할 수 있는 지식을 나눕니다" data-gatsby-head="true"/><meta name="msapplication-TileColor" content="#000000" data-gatsby-head="true"/><meta name="theme-color" content="#000000" data-gatsby-head="true"/><meta property="article:author" content="이한" data-gatsby-head="true"/><meta name="twitter:label1" content="읽는 시간" data-gatsby-head="true"/><meta name="twitter:data1" content="3분" data-gatsby-head="true"/><style data-href="/styles.618336a6b0dc03f16839.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Pretendard;font-weight:900;src:local("Pretendard Black"),url(/static/Pretendard-Black-14a71ec59ff2b3bc6933d54c6ee04ff1.woff2) format("woff2"),url(/static/Pretendard-Black-fe80bd8c7ce9b3af972f6e99a5646522.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:800;src:local("Pretendard ExtraBold"),url(/static/Pretendard-ExtraBold-55bef92e8f01b6b6ef2f8d31fdc0f951.woff2) format("woff2"),url(/static/Pretendard-ExtraBold-82ea4400a5eea299b40c94aac01985ba.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:700;src:local("Pretendard Bold"),url(/static/Pretendard-Bold-0676c8838a37a3b770d85a5534f5fdcb.woff2) format("woff2"),url(/static/Pretendard-Bold-f6866c5eb21ccb9a8749d3a2874a7e6e.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:600;src:local("Pretendard SemiBold"),url(/static/Pretendard-SemiBold-7e5eaaf650b9e738991373a7f173b94a.woff2) format("woff2"),url(/static/Pretendard-SemiBold-a0c72d6162af72df37ec279440595738.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:500;src:local("Pretendard Medium"),url(/static/Pretendard-Medium-ea235f1edb8815831a25b376b479949e.woff2) format("woff2"),url(/static/Pretendard-Medium-f902522b86842449110e07cbc07b8346.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:400;src:local("Pretendard Regular"),url(/static/Pretendard-Regular-6090e6b5524796768e78f23519d16488.woff2) format("woff2"),url(/static/Pretendard-Regular-ab56c53f21ca6b32d15fe0ae8daf5f60.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:300;src:local("Pretendard Light"),url(/static/Pretendard-Light-27c9a07cbc308ce88d1ab3613e3152c7.woff2) format("woff2"),url(/static/Pretendard-Light-40808ea4485a78c05f9213ed583b0046.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:200;src:local("Pretendard ExtraLight"),url(/static/Pretendard-ExtraLight-1a26bede4e9bc7d2e9c0ce548cd4cf83.woff2) format("woff2"),url(/static/Pretendard-ExtraLight-ff5e73a97b5e7a5c5d5fed684594e8ad.woff) format("woff")}@font-face{font-display:swap;font-family:Pretendard;font-weight:100;src:local("Pretendard Thin"),url(/static/Pretendard-Thin-41861ab4e67767c4c6ed0b5e361fbca6.woff2) format("woff2"),url(/static/Pretendard-Thin-348f24715998d74e9f5529afd376f55b.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><title data-gatsby-head="true">고밀도 디스플레이를 위한 이미지 다루기 | </title><link rel="alternate" type="application/rss+xml" title="명시지(形式知) - 기록할 수 있는 지식을 나눕니다" href="/rss.xml" data-gatsby-head="true"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" data-gatsby-head="true"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" data-gatsby-head="true"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" data-gatsby-head="true"/><link rel="manifest" href="/favicon/site.webmanifest" data-gatsby-head="true"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="alternate" type="application/rss+xml" title="명시지 (形式知)" href="/rss.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><style id="stitches">--sxs{--sxs:0 t-gdxNDc}@media{:root,.t-gdxNDc{--colors-gray000:#F8F9FA;--colors-gray100:#F1F3F5;--colors-gray200:#E9ECEF;--colors-gray300:#DEE2E6;--colors-gray400:#CED4DA;--colors-gray500:#ADB5BD;--colors-gray600:#868E96;--colors-gray700:#495057;--colors-gray800:#343A40;--colors-gray900:#212529;--colors-blue700:#1C7ED6}}--sxs{--sxs:1 hKePEu}@media{body{padding:0;margin:0;font-size:16px;color:var(--colors-gray800);font-weight:400;font-family:Pretendard,sans-serif}*{box-sizing:border-box}}--sxs{--sxs:2 c-bSvfqS c-hEdiuM c-eAAbaD c-gGqMDa c-jEDjTQ c-dvRuTq c-bZcNek c-jwOSHF c-dMmbPO c-euCchw c-boZbfK c-gBKazA c-eXJruw c-fzsocY c-eJVyyl c-fXXVzC c-hdzxtM c-dpWDmP c-bxCTAm c-jDcCnV c-bvNJHJ c-bHVmPA}@media{.c-bSvfqS{max-width:1000px;padding:24px;margin:0 auto}.c-hEdiuM{width:36px;height:36px}.c-eAAbaD{font-size:18px;line-height:1.8;word-break:keep-all}.c-eAAbaD h1,.c-eAAbaD h2,.c-eAAbaD h3,.c-eAAbaD p{margin-top:0;margin-bottom:12px}.c-eAAbaD h1,.c-eAAbaD h2,.c-eAAbaD h3{font-weight:600}.c-eAAbaD h1{font-size:1.5rem}.c-eAAbaD h2{font-size:1.25rem}.c-eAAbaD h3{font-size:1.15rem}.c-eAAbaD a{color:var(--colors-blue700);text-decoration:none}.c-eAAbaD blockquote{margin:12px 0;padding:1px 16px;color:var(--colors-gray600);border-left:5px solid var(--colors-gray200)}.c-eAAbaD blockquote p{margin:4px 0}.c-eAAbaD iframe{display:block;max-width:100%;margin:0 auto;margin-bottom:18px}.c-eAAbaD pre[class*="language-"]{font-size:16px;border-radius:8px;background-color:var(--colors-gray000)}.c-eAAbaD pre[class*="language-"] .token.operator{background-color:var(--colors-gray000)}.c-eAAbaD .footnotes hr{border-top:none;border-color:var(--colors-gray200)}.c-gGqMDa{font-size:2rem;font-weight:600;margin-bottom:0 !important}.c-jEDjTQ{display:flex;align-items:center;margin-top:24px;background-color:var(--colors-gray000);border-radius:16px;padding:16px}.c-dvRuTq{width:72px;height:72px;border-radius:50%}.c-bZcNek{flex:1;margin-left:24px}.c-jwOSHF{margin:0;font-size:1.25rem;color:var(--colors-gray700);font-weight:600}.c-dMmbPO{margin:6px 0;font-weight:400;color:var(--colors-gray600)}.c-euCchw{font-size:0.85rem;color:var(--colors-gray600);margin-right:8px}.c-boZbfK{max-width:1000px;padding:100px 24px;margin:0 auto}@media screen and (max-width: 1000px){.c-boZbfK{padding:60px 24px}}.c-gBKazA{margin-bottom:24px}.c-eXJruw{color:var(--colors-gray700);font-size:1.75rem;font-weight:600;margin:0}.c-fzsocY{color:var(--colors-gray500);font-size:1.25rem}.c-eJVyyl{margin:0;margin-top:6px;color:var(--colors-gray600);font-weight:300;font-size:1rem}.c-fXXVzC{margin:0;padding:0}.c-hdzxtM{list-style:none;border-bottom:1px solid var(--colors-gray100)}.c-hdzxtM:last-child{border:none}.c-jDcCnV{font-size:1.25rem;color:var(--colors-gray700);font-weight:600;margin:0}.c-bvNJHJ{margin:0;margin-top:6px;color:var(--colors-gray600);font-weight:400}.c-bxCTAm{padding:16px;word-break:keep-all}.c-bxCTAm:hover{border-radius:12px;background-color:var(--colors-gray000)}.c-dpWDmP{display:block;text-decoration:none}.c-bHVmPA{width:100%;border-radius:16px}}</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="c-bSvfqS"><header><a href="/"><img src="/images/logo.png" draggable="false" alt="블로그 로고" width="36" height="36" class="c-hEdiuM"/></a></header><article class="c-eAAbaD"><h1 class="c-gGqMDa">고밀도 디스플레이를 위한 이미지 다루기</h1><p>2018-01-20</p><h1>들어가며</h1><p>레티나 디스플레이를 시작으로 다양한 고밀도 디스플레이 기기가 늘어났습니다.
이에 따라 웹에서도 고 해상도 이미지의 수요가 생겼습니다.
고 해상도 이미지를 제공하는 방법을 알아봅니다.</p><h1>Media Queries: resolution feature</h1><p><code>resolution</code>은 고밀도 디스플레이를 위해 고안된 css문법으로,
IE9를 포함한 <a href="https://caniuse.com/#feat=css-media-resolution">브라우저 대부분</a>이 지원합니다.
문법은 <code>(min/max)-resolution: 값</code>으로 사용되며, 기본 단위는 dppx입니다.</p><p>이 미디어쿼리를 사용하면 고밀도 디스플레이와 저밀도 디스플레이에 서로 다른 이미지를 보여줄 수 있습니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>some_img.ext<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img-normal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>normal image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>some_img@2x.ext<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img-retina<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>retina image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">&gt;</span></span></code></pre></div><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.img-normal</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p><code>background-image</code>를 사용할 것이면 다음과 같이 쓸 수 있습니다.</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>하지만 아쉽게도 safari는 <code>min/max-device-pixel-ratio</code> 문법만을 지원하고 있어 다음을 사용해야 합니다.</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/**/</span>
<span class="token punctuation">}</span></code></pre></div><p>또한 오페라미니와 IE는 dppx를 지원하지 않기 때문에 적당한 dpi를 사용해야 합니다.</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 192dpi<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/**/</span>
<span class="token punctuation">}</span></code></pre></div><p>결과적으로 IE9을 포함한 대부분 브라우저를 지원하려면 다음 문법을 사용하면 됩니다.</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 192dpi<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.img-normal</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>덤으로 만약 파이어 폭스와 오페라 이전 버전을 지원하고 싶다면 다음과 같은 미디어 쿼리를 추가하면 됩니다.</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min--moz-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-o-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2/1<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/**/</span>
<span class="token punctuation">}</span></code></pre></div><p><code>resolution</code> 미디어 쿼리를 사용하면, 브라우저 대부분을 지원하자만, 그러기 위해서는 미디어 쿼리가 복잡해지는 문제가 있습니다.
게다가 한가지 문제가 더 생기는데 브라우저의 <strong>동시 연결 제한</strong> 문제입니다.</p><h1>동시 연결 제한</h1><p>HTTP 1.1의 표준인 <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4">RFC 2616</a>의 8.1.4절을 살펴보면 다음과 같은 내용이 있습니다.</p><blockquote><p>Clients that use persistent connections SHOULD limit the number of simultaneous connections that they maintain to a given server.</p></blockquote><p>한국전자통신연구소의 번역본은 다음과 같습니다.</p><blockquote><p>지속적인 접속을 사용하는 클라이언트는 특정 서버로의 동시 접속 숫자에 제한을 두어야 한다.</p></blockquote><p>실제로 브라우저들은 <em>도메인당 최대 연결수를 제한하고 있습니다</em>. 그 수는 브라우저 마다 다릅니다.</p><table><thead><tr><th>브라우저</th><th>도메인당 최대 연결 수</th></tr></thead><tbody><tr><td>Internet Explorer® 7.0</td><td>2</td></tr><tr><td>Internet Explorer 8.0 &amp; 9.0</td><td>6</td></tr><tr><td>Internet Explorer 10.0</td><td>8</td></tr><tr><td>Internet Explorer 11.0</td><td>13</td></tr><tr><td>Firefox®</td><td>6</td></tr><tr><td>Chrome™</td><td>6</td></tr><tr><td>Safari®</td><td>6</td></tr><tr><td>Opera®</td><td>6</td></tr></tbody></table><p>사파리를 예로 들면, 한 웹페이지의 같은 도메인 한번에 받아 올 수 있는 이미지는 최대 6개 입니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-1.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-2.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-3.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-4.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-5.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-6.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-7.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-8.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-9.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-10.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-11.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-12.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px">
      <a class="gatsby-resp-image-link" href="/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/a93a9/img-load.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVQoz61QQUsbQRgdaKH0UNpCaanFi2ALhUKF/onSi4t46LU/LEjpwYI12iZZqYkmWqk2MTEajcqa3RgT3aw7M7tm1yS7mVdmVRB67eHxHu99H/PmI5/imxNvUmcYVRleqRQvryH1qErx9ifDu0WG0RT9J5f8eoGi0PYR+B3kS+UJ8n6mpJA4A5nlAYnzgMzxkMSvMcvDu/M8vP/DCcm3W/6tXO7l+SAAgPLevkI+zJSUO3EKEuficdIRT1IOHiUc3PvOQWZZxA8Sjnww8iUeSk46cifa+8NCAQywtVtVyMd4URlRz/EsScVQkooXKYahFMOwKpljRH5tgeJpwsZNNpSkGE5RPE9SqUWJ9QUGAUqVXYXMzatKuqRh46Am1vc0kSvvY233EL92DrBePcK2foKtozrK+gk2tTryh0bEv/c0bOzXkD/UxZFRF4auQ11YUEgiqSpbuxpOGw1BLUs47gUcx4XnXqHedqCbDmpnHL7vQ/QuEXYvMeh1byD6/Z7odDooFosK+To3r+xUdmAYhuCci34QoNvrodfv47LbxbnjwXI82K4H3++BUY6Ox3HhudGc5/vCvwK2t7cVks6sKq3WGSi1BWdMMMbAOQelFLZtw/c66Fy4Eay2hZNGE47jgNo2KGOwLEu2E9IrFAoKyWWXx6vVKjRNC0zTDNqmGVqWFbZarbBxfBy6rhua155kXa9FfFyvh81mM9TrjSAIw8DzPJTL5XGysrY2aRgGms0mZDt5C9d1o3aWZUV3k21lA9n8tNWK2DRN2OfnODXbGAiBXreLSqUySaY+fxlbTKen0plMbHl5OZbLZWPZbDbSS0tLsVwuF+krLxvLZDKRltnNzOrqamxlZWVqenp6jAD4r/gLSxQF43mjqAUAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="사파리 이미지 로딩" title="사파리 이미지 로딩" src="/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/663f3/img-load.png" srcSet="/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/5e043/img-load.png 163w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/e5cc6/img-load.png 325w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/663f3/img-load.png 650w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/d880f/img-load.png 975w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/4c573/img-load.png 1300w,/static/5a5d86c31a5bc9584d7b4ac57bbe99f3/a93a9/img-load.png 2960w" sizes="(max-width: 650px) 100vw, 650px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>위 이미지를 보시면 최대 6개의 네트워크 연결을 확인할 수 있습니다.</p><p><a href="./same-domain-multiple-images.html">여기에서</a> 직접 확인해 보실 수 있습니다.</p><blockquote><p>동일 도메인 연결 제한을 피하고 성능향상을 위해 CDN 서비스를 사용하기도 합니다.</p></blockquote><p>중요한 점은 브라우저는 보여지지 않는 파일도 가져옵니다. 즉, <code>display: none</code> 혹은
무시된 <code>background-image</code>도 가져옵니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-1.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-2.png<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-3.png<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-4.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-5.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-6.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-7.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-8.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-9.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-10.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-11.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./img/normal-img-12.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px">
      <a class="gatsby-resp-image-link" href="/static/8e9b62e0e1aecf29c8245968544dcd02/a93a9/img-load-with-none.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACmklEQVQoz62PTWsTURiFL6KCoBa6lRIRakGwuPBPiJsOpSt3/qfSlRW3UhubJpl81GqhIrTGaVKTtE2T5juTzMe9M5mZNJmbe2SmpYhrF4cHzjnvfd9L3kZzy8+TKuZliqeyeaMF2cS8bOJFhuJllmI+eeX9nQd8ljLxc+DB9xwcKvll8mpDkUiUgmwyn3wOxUNFGSebjN/eYvzetsXJp2v/nzyYO2RTHwDypROJvN5QpFtREyTKxEzcErMJCzNxC3e2GMgmxd2YhftxK1iIh/Gr7EHcwmzSCmbCuQPKBTDFUbEskTfRnLSQ0jCXNEUkaYrHsolI0sSTFEUkRbGQCr5l4FHcwGOZIhIoGXQMzCWMgEIxJwJ8AuW4KJHtWEraOzqHclYTuXJF/CiUcVg6w0HxFMppFSeNNkoXTZTqbRxXGyic10P+OqkGM8hXLkSt3hC1Wg1JWZZILJGQcsdn6DSbwtA0MfI8jFwXY9eBqjOcqzaqfRst3YZKnZCXIw/T8Qh8MsbUnwjf94XrulAURSIft2JSsfgbjUZDMGYLpnkYjS4xHo8xdEfQLQe65cG0GYaeC2qOYFAV1O7Ccgw4jidc1wsfLBQKEvmyuy+p6gCUUsEYE4ZugjEG0zRhGAY814EztDG0bWiahk67A8uywjzQQNOCx4Rt28jlchLZ+/Z1qVwqoVKp+P1+39e0Adc0jfd6Pd5qtbht27zf73NN00PWarWQjXqd97pdXm+2fd/nfnBhPp9fInvf91cu6nW02+1w43A4RLBN13UMBgN4nhf6wdWUUnQ7nZCqqoadnjrAVIiwVygUVsi79x8WZTm1lk6nV7PZ7I0ymUyonZ2dkDf+dS/oB346nVnd3d1dlWV5bX19fZEA+K/6AwluBADG1Hi2AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="img load with none" title="img load with none" src="/static/8e9b62e0e1aecf29c8245968544dcd02/663f3/img-load-with-none.png" srcSet="/static/8e9b62e0e1aecf29c8245968544dcd02/5e043/img-load-with-none.png 163w,/static/8e9b62e0e1aecf29c8245968544dcd02/e5cc6/img-load-with-none.png 325w,/static/8e9b62e0e1aecf29c8245968544dcd02/663f3/img-load-with-none.png 650w,/static/8e9b62e0e1aecf29c8245968544dcd02/d880f/img-load-with-none.png 975w,/static/8e9b62e0e1aecf29c8245968544dcd02/4c573/img-load-with-none.png 1300w,/static/8e9b62e0e1aecf29c8245968544dcd02/a93a9/img-load-with-none.png 2960w" sizes="(max-width: 650px) 100vw, 650px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>위 이미지를 확인해 보시면 사용하지 않는 <code>normal-img-2.png</code>와 <code>normal-img-3.png</code>도 받아오는걸 확인 할 수 있습니다.</p><p>마찬가지로 <a href="./same-domain-multiple-images-with-none.html">여기에서</a> 확인할 수 있습니다.</p><p>결국 resolution 미디어 쿼리를 이용해 이미지를 다룰경우, 불필요한 이미지도 모두 받아오게 됩니다.
따라서 고밀도 유저나 일반 유저나 모두 약 2배 가까운 이미지를 받게됩니다. 여러 이미지를 사용하는 페이지라면,
보이지 않는 이미지를 받는 도중 도메인 연결 제한에 걸려 보여줘야할 이미지를 받는데 더 시간이 걸릴 수도 있습니다.</p><blockquote><p>단, background-image를 이용할 경우에는 필요한 이미지만 받아옵니다.
따라서 가능하다면 <strong>보여줘야할 이미지만 선택해서 받아오게 해야합니다</strong>. 그럼 다른 방법은 없을 까요?</p></blockquote><h1>JS를 이용해 동적으로 가져오기</h1><p><code>window.devicePixelRatio</code> (<a href="https://caniuse.com/#feat=devicepixelratio">IE 11</a>부터 지원)을 사용하거나,
위에 있는 미디어 쿼리를 적용한 element 상태를 보고 적합한 이미지를 가져오는 방법도 있습니다.</p><p>이 방식을 사용하실 거면, <a href="https://github.com/strues/retinajs">retinajs</a>를 추천합니다.
retinajs는 css js를 모두 지원하고 특히 다음과 같은 문법을 지원하는데요,</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/images/my_image.png<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">data-rjs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/images/my-image@2x.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- or --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/images/my_image.png<span class="token punctuation">)</span></span></span><span class="token punctuation">&quot;</span></span></span>
  <span class="token attr-name">data-rjs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/images/my-image@2x.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre></div><p>이렇게 사용하면, 일반 디스플레이 이용자들은 <code>/images/my_image.png</code>만을 받아 올 수 있습니다.</p><p>하지만 여전히 고밀도 이용자들은 여러 이미지를 받거나, 깜박임을 겪는 문제를 겪습니다.</p><h1>srcset</h1><p>HTML 5.1 부터 img element에 <a href="https://www.w3.org/TR/html51/semantics-embedded-content.html#element-attrdef-img-srcset">srcset</a> 속성이 추가 되었습니다.
현재 IE와 오페라미니를 제외한 모든 브라우저 에서 <a href="https://caniuse.com/#feat=srcset">지원하고 있습니다</a>.</p><p><code>srcset</code>은 조건에 따라 다른 이미지를 가져오게 할 수 있는데요 다음과 같은 문법으로 사용합니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[이미지위치] [조건], ...<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span></code></pre></div><p>쉼표로 구분하며, 앞에 조건과 사용할 이미지를 적으면 됩니다.
<code>resolution</code>이 2이상인 디스플레이와 일반디스플레이를 구분해 이미지를 보여주려면 다음과 같이 사용합니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-src.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-1x.png 1x, image-2x.png 2x<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p>srcset을 사용하면 브라우저는 적합한 이미지만을 선택해 가져옵니다.
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACOklEQVQoz62QS08TURzF5xPxWZgQPogLH+xcuvCxAWFDYpRo4qNKMYxB2wIFSpVHpylCZDrvR8q8O49OO5N7zB1AFyYSExe/nPM/yb33/C/T2jqYed05w/zRKZ4enWH+8BRPvp2geqrAsiLoVgRF80uMch5CM0JIqg9Z9UtVtACS4qHW+DrD7O3w7HJXwm1uK597x+X3d46LueZh8YwXC8NMC8VICs2kpIVqJCXX8xW5bqW5okfYbHZYZq/ZYZd5EXe5bXLv5Xty5/kb3Hr1AS++azCMBKqRQDMTqOalV//MiGYmRNaGaGwfs0xz64B9eyLi4fpn8mhtgzzmGniwXkelXDmGaoRQ9KBU3YxgWDE0c3iZ6SGF6FZM6DdsNg9Z5svGJ7bTO8MuL5Af/T45l2TIug5BFCHJMiRJxvm5UHpZVtDv9yGKEgSBqghRkogkyUQQBHAcxzKbjRorSCoE3SOObRPbtuH7AaLhEGEYwvN8RFGEJElKdV0XjuPA9314nouBFxJ7mBHTCdFsH7HMzu4ua5kGAs8hjuMQeiBOEiRpWl4SxzGS5NKnaYrRaFQqzSlpmpLxeExo1u12WWZ/f5+9uLiA47i0HfE8D1mW3ch4PL72hEIf5HmeZVqt1vRgMKBr5LZt567rFqPRqCRN01/+L+RZluVXF04z7XZ7ljakzShBEGAymdxIPsl/+zwv2/Z6vVlmaWlpqlKpLK6uri5Uq9WFtbWPC7Va7Z+o1+tUF1dWVqYYAP+Vn+oDPtw585BRAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="webkit 2x" title="webkit 2x" src="/static/6b89a7a3b6ecd77e1a66dab09bf392f8/663f3/webkit-2x.png" srcSet="/static/6b89a7a3b6ecd77e1a66dab09bf392f8/5e043/webkit-2x.png 163w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/e5cc6/webkit-2x.png 325w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/663f3/webkit-2x.png 650w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/d880f/webkit-2x.png 975w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/4c573/webkit-2x.png 1300w,/static/6b89a7a3b6ecd77e1a66dab09bf392f8/a93a9/webkit-2x.png 2960w" sizes="(max-width: 650px) 100vw, 650px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span>
위 이미지를 보시면 <code>image-src.png</code>나 <code>image-1x.png</code>를 받지 않고 <code>image-2x.png</code>만 받는걸 확인 할 수 있습니다.
<a href="https://webkit.org/demos/srcset/">여기에서</a> 직접 확인해 볼 수 있습니다.</p><p>어떤 조건에도 해당 되지 않거나, 이미지를 가져올 수 없다면 <code>src</code>에 있는 이미지를 가져오게 됩니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-src.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-2x.png 2x<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p>예를 들어 위와 같이 작성하면 2x, 3x ... 밀도를 가진 기기는 <code>image-2x.png</code>를 가져오고,
<code>srcset</code>을 지원하지 않는 브라우저나 일반 디스플레이는 <code>image-src.png</code>을 가져오게 됩니다.</p><p>따라서 <code>srcset</code>을 지원하지 않는 브라우저도 (비록 상대적으로 흐린 이미지 겠지만) 이미지 자체는 표시가 될 뿐더러,
불필요한 이미지를 가져오지 않아, 성능에도 도움이 됩니다.</p><h2>덤</h2><p><code>srcset</code>으로 가져온 이미지는 한가지 특징을 가지게 됩니다.</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-src.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image-2x.png 2x<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p>다음과 같이 HTML을 작성하였고, image-2x.png는 200px<em>200px 크기의 이미지 라면,
<code>img</code>에 <code>width: 100%</code>를 주었어도 100px</em>100px으로 표시됩니다.</p><p>따라서 이미지 크기를 반드시 2배 키워서 사용해야 크기 실수를 방지 할 수 있습니다.
safari는 개발자용 &gt; 응답형디자인모드 에서 최대 3x 까지 디스플레이 밀도를 조정하며 확인해 볼 수 있습니다.</p><h3>img-set</h3><p>css에도 img-set이란 속성이 있습니다. 아쉽게도 현재는 사파리와 크롬만 <a href="https://caniuse.com/#search=image-set">지원하고</a> 있는데요,
다음과 같은 방법으로 사용할 수 있습니다.</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.test</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>image-1x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-image-set</span><span class="token punctuation">(</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>image-1x.png<span class="token punctuation">)</span></span> 1x<span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>image-2x.png<span class="token punctuation">)</span></span> 2x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span>75px<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>아쉽게도 사파리와 크롬만 지원하지만 <code>srcset</code>처럼 fallback이 있으므로 콘텐츠에 문제를 만들지 않으며, 적합한 이미지만 골라 받아 오게 됩니다.</p><p>하지만,</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.img-retina</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>위의 css를 사용해도 적합한 파일만을 받기 때문에 현재로썬 복잡한 미디어 쿼리를 작성하기 싫을 경우에 유용합니다.</p><h1>결론</h1><ul><li>문서 상단처럼 고밀도 디스플레이에 서로 다른 HTML Element를 보여줘야 한다</li><li>동적으로 이미지를 가져오는 것이 싫다</li><li>IE에도 고해상도 이미지를 보여주고 싶다</li></ul><p><code>resolution</code> 미디어 쿼리를 이용하세요.</p><ul><li>IE를 지원해야 합니다</li><li>동적으로 이미지를 가져와도 좋다.</li></ul><p>자바스크립트를 이용해 구현하여 사용합니다. 개인적으로는 retinajs를 추천합니다.</p><p>그외의 경우에는 <code>srcset</code>과 사용하시는 것을 권장합니다.</p></article><div class="c-jEDjTQ"><img src="/images/profile.png" draggable="false" alt="" class="c-dvRuTq"/><div class="c-bZcNek"><h2 class="c-jwOSHF">이한</h2><p class="c-dMmbPO">Coding a Better World Together</p><a role="menuitem" href="https://hanlee.io" class="c-euCchw">About</a><a role="menuitem" href="https://github.com/hahnlee" class="c-euCchw">GitHub</a><a role="menuitem" href="/rss.xml" class="c-euCchw">RSS</a></div></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-111601591-4', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018/high-density-display-and-images";window.___webpackCompilationHash="404e0ea2380a666b324b";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-38856857010c707155ba.js"],"app":["/app-2f912a54a7be46d95e50.js"],"component---src-containers-post-tsx":["/component---src-containers-post-tsx-04e02e434c586a440b06.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-dee006d33227048c692c.js"]};/*]]>*/</script><script src="/polyfill-38856857010c707155ba.js" nomodule=""></script><script src="/app-2f912a54a7be46d95e50.js" async=""></script><script src="/framework-043a7c4ea56bed9a642b.js" async=""></script><script src="/webpack-runtime-3f5db17dec4efafe5e36.js" async=""></script></body></html>