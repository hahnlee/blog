<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.331d573335de48526e14.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.ArticleCard-module--articleCard--11z6V{display:flex;flex-wrap:nowrap;flex-direction:column;justify-content:space-between;padding:1rem 0;text-decoration:none;border-bottom:1px solid #e4e6eb}.ArticleCard-module--articleCard--11z6V:last-child{border-bottom:none}.ArticleCard-module--articleCard--11z6V .ArticleCard-module--date--276QY{margin:0}.ArticleCard-module--articleCard--11z6V .ArticleCard-module--title--1qLBI{font-size:1.75rem;word-break:keep-all;margin:.5rem 0;line-height:1.2;color:#4d5256}.ArticleCard-module--articleCard--11z6V .ArticleCard-module--timeToRead--30lQv{text-align:right;line-height:1.2;margin:0}.ArticleCard-module--articleCard--11z6V .ArticleCard-module--timeToRead--30lQv i{font-size:1rem;margin-right:.25rem;vertical-align:top}.Footer-module--footer--VUGIP{border-top:1px solid #e4e6eb;color:#a5a5a5}.Footer-module--footer--VUGIP .Footer-module--content--3u_Ao{max-width:800px;margin:0 auto;padding:1rem}.NavBar-module--navBar--34wO1{height:56px;background:#fff;width:100%;box-shadow:0 1px 3px rgba(0,0,0,.07)}.NavBar-module--navBar--34wO1 .NavBar-module--content--1z5Z5{display:flex;width:100%;height:100%;max-width:800px;padding:1rem;margin:0 auto;align-items:center;justify-content:space-between}.NavBar-module--navBar--34wO1 .NavBar-module--homeLink--2g7Yn{color:#4d5256;font-size:1.5rem;font-weight:700;text-decoration:none}.NavBar-module--navBar--34wO1 .NavBar-module--links--lZl1w a{padding:0 .5rem;color:#a5a5a5;text-decoration:none}.Page-module--page--2nMky{display:flex;flex-direction:column;width:100%;height:100%}.Page-module--page--2nMky .Page-module--content--pXhYh{flex:1 1;flex-wrap:nowrap;width:100%;max-width:800px;padding:1rem;margin:0 auto}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}dl,ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-spacing:0}*,:after,:before{box-sizing:border-box}code,pre{font-family:Menlo,Courier New,Monaco,Spoqa Han Sans,monospace}code.language-text{padding:.25em .5em!important;font-size:85%!important;color:#364fc7!important;background-color:#f1f3f5!important;border-radius:3px!important;text-shadow:none!important}html{font-size:18px}body{font-family:Spoqa Han Sans,Source Sans Pro,Apple SD Gothic Neo,Nanum Barun Gothic,Nanum Gothic,Verdana,Arial,Dotum,sans-serif;color:#4d5256;line-height:1.6}body,html{font-family:sans-serif}body,body>div,body>div>div,html,html>div,html>div>div{width:100%;height:100%;padding:0;margin:0}h1,h2,h3,h4,h5,h6{line-height:1.7;margin:1em 0 15px;padding:0}@media screen and (max-width:640px){h1,h2,h3,h4,h5,h6{line-height:1.4}}h1,h2,h3,h5{font-weight:700}h1{font-size:30px}h1 a{color:inherit}h2{font-size:24px}h3,h4{font-size:20px}h4,h6{color:#868e96}p{color:#343a40;margin:15px 0}a{text-decoration:none;cursor:pointer}a,a:active,a:hover{color:#1b6ec2}em,i{font-style:italic}b,strong{font-weight:700}sub{vertical-align:sub}sub,sup{font-size:smaller}sup{vertical-align:super}hr{border:0;border-top:1px solid #f1f3f5;margin:1.5em auto}ol>li:before,ul>li:before{position:absolute;width:1.4em;margin-left:-1.4em;display:inline-block;box-sizing:border-box;text-align:right}ul>li:before{content:"\2022";padding-right:.3em;font-family:inherit;font-size:1.4em;line-height:1.2}ol{counter-reset:section}ol>li:before{counter-increment:section;content:counter(section) ".";padding-right:.3em;font-family:inherit;font-size:1em;line-height:inherit}ol>li,ul>li{margin:0 auto .4em 1.4em;line-height:1.55}ol>li>ol,ol>li>ul,ul>li>ol,ul>li>ul{margin-top:.4em}li>ol>li,li>ul>li{font-size:.95em;margin:0 auto .38em 1.33em}dt{float:left;width:180px;overflow:auto;clear:left;text-align:right;white-space:nowrap;font-weight:700;margin-bottom:.4em}@media screen and (max-width:640px){dt{width:120px}}dd{margin-left:200px;margin-bottom:.4em}@media screen and (max-width:640px){dd{margin-left:140px}}table{margin-bottom:1rem;width:100%;border:1px solid #e9ecef;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e9ecef}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f1f3f5}blockquote{font-weight:300;padding:0 0 0 1.4rem;margin:0 2rem 1rem 0;border-left:.2em solid #dee2e6}blockquote p{color:#868e96}blockquote p:last-child{margin-bottom:0}.post-module--title--hTIc5{font-size:1.75rem}.post-module--content--J5WVo figcaption{text-align:center;margin-top:.5rem;margin-bottom:1rem;font-size:.825rem}</style><meta name="generator" content="Gatsby 2.7.0"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Under the C: 소개</title><link data-react-helmet="true" href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="manifest" href="/site.webmanifest"/><link data-react-helmet="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000"/><meta data-react-helmet="true" property="og:title" content="Under the C: 소개"/><meta data-react-helmet="true" property="og:description" content="소개Under the C…"/><link as="script" rel="preload" href="/webpack-runtime-c5708a111932d8c5c267.js"/><link as="script" rel="preload" href="/app-3cac94f02162c269cdaa.js"/><link as="script" rel="preload" href="/styles-bf5d716907322150a4f8.js"/><link as="script" rel="preload" href="/1-7b2458236c266513e282.js"/><link as="script" rel="preload" href="/component---src-templates-post-jsx-dd67b5b2f5802c543f16.js"/><link as="fetch" rel="preload" href="/static/d/347/path---2018-under-the-c-1-bcb-517-RYGolKueCnvFFD4ElSI3u6X2Wos.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="Page-module--page--2nMky"><nav class="NavBar-module--navBar--34wO1"><div class="NavBar-module--content--1z5Z5"><a class="NavBar-module--homeLink--2g7Yn" href="/">HAN LEE</a><section class="NavBar-module--links--lZl1w"><a href="https://hanlee.io" target="_blink" rel="noopener noreferrer">About</a><a href="https://github.com/hahnlee" target="_blink" rel="noopener noreferrer">GitHub</a><a href="https://blog.hanlee.io/rss.xml" target="_blink" rel="noopener noreferrer">RSS</a></section></div></nav><main class="Page-module--content--pXhYh"><h1 class="post-module--title--hTIc5">Under the C: 소개</h1><p>2018-04-11</p><div class="post-module--content--J5WVo"><h1>소개</h1>
<ul>
<li>Under the C 시리즈는 작년, 파이썬에 <a href="https://github.com/python/cpython/pull/3085">아주 작은 기여</a>를 하며 공부한 내용을 정리한 글 입니다.</li>
<li>잘못된 내용을 알려주신다면, 최대한 빨리 수정하도록 하겠습니다</li>
<li>파이썬 구현체는 계속 발전하고 있으므로, 이 글의 내용과 다소 달라질 수 있습니다.</li>
<li>특별한 언급이 없다면, 파이썬은 공식 구현체인
<a href="https://github.com/python/cpython">CPython</a>의 파이썬 3.x 구현을 의미합니다.</li>
</ul>
<h1>들어가며</h1>
<p>파이썬은 <code class="language-text">인터프리터 언어</code>다. 사소한 말이지만 몇가지 사실을 품고 있다.
코드를 한줄 한줄 읽고 실행을 하는 인터프리터 언어는 컴파일 언어에 비해 최적화의 여지가 적다.</p>
<p>인터프리터 언어를 다룬다면, 같은 결과가 나오는 코드를 작성하여도,
프로그래머의 최적화, 언어의 이해도에 따라 꽤 다른 실행을 하는 코드를 작성할 수 있다.</p>
<p>몇가지 동일한 결과를 내는 파이썬 코드를 비교해보자.</p>
<h1>코드 최적화</h1>
<p>다음 코드를 보자.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">fruits <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fruits<span class="token punctuation">[</span><span class="token string">'apple'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
fruits<span class="token punctuation">[</span><span class="token string">'strawberry'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span></code></pre></div>
<p>빈 딕셔너리를 만들고 두쌍의 키-값을 할당했다. 위의 코드는 어떤 바이트 코드를 만들까?</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
fruits = dict()
fruits['apple'] = 10
fruits['strawberry'] = 20
'''</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">'&lt;string>'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div>
<p>위 코드로 바이트 코드를 확인 할 수 있다. <code class="language-text">dis</code> 모듈은 파이썬의 내장 모듈로, 바이트코드 역어셈블러 모듈이다.</p>
<p>위 코드를 인터프리터 모드에서 실행하면 다음와 같은 결과를 볼 수 있다.</p>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  2           0 LOAD_NAME                0 (dict)
              2 CALL_FUNCTION            0
              4 STORE_NAME               1 (fruits)

  3           6 LOAD_CONST               0 (10)
              8 LOAD_NAME                1 (fruits)
             10 LOAD_CONST               1 (&#39;apple&#39;)
             12 STORE_SUBSCR

  4          14 LOAD_CONST               2 (20)
             16 LOAD_NAME                1 (fruits)
             18 LOAD_CONST               3 (&#39;strawberry&#39;)
             20 STORE_SUBSCR
             22 LOAD_CONST               4 (None)
             24 RETURN_VALUE</code></pre></div>
<p>딕셔너리를 만드는, 더 파이썬다운 코드는 제너릭을 이용하는 것 이다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">fruits <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'apple'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token string">'strawberry'</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>위 코드도 같은 바이트코드를 만들까? 한번 코드의 바이트코드를 한번 확인해보자.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
fruits = {
    'apple': 10,
    'strawberry': 20,
}
'''</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">'&lt;string>'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  3           0 LOAD_CONST               0 (10)

  4           2 LOAD_CONST               1 (20)
              4 LOAD_CONST               2 ((&#39;apple&#39;, &#39;strawberry&#39;))
              6 BUILD_CONST_KEY_MAP      2
              8 STORE_NAME               0 (fruits)
             10 LOAD_CONST               3 (None)
             12 RETURN_VALUE</code></pre></div>
<p>같은 역할을 하지만 서로 다른 바이트코드를 생성하는 것을 확인 할 수 있다.
사실 이 예제는 파이썬 입장에선 조금 억울 하고, 최적화가 쉽지 않을 수 있다.
파이썬 인터프리터에게 첫번째 코드는 3줄의 코드이며, 두번째 코드는 한줄의 코드이기 때문이다.
(파이썬은 괄호안의 줄바꿈을 무시한다)</p>
<p>그렇다면 한가지 예를 더 살펴 보자.
PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
<a href="https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/">Back to the Low Level</a>
에서 코드와 내용을 가져왔다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">A <span class="token operator">=</span> <span class="token boolean">False</span>
<span class="token keyword">if</span> A <span class="token operator">!=</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
A = False
if A != True:
    pass
'''</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">'&lt;string>'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  2           0 LOAD_CONST               0 (False)
              2 STORE_NAME               0 (A)

  3           4 LOAD_NAME                0 (A)
              6 LOAD_CONST               1 (True)
              8 COMPARE_OP               3 (!=)
             10 POP_JUMP_IF_FALSE       12

  4     &gt;&gt;   12 LOAD_CONST               2 (None)
             14 RETURN_VALUE</code></pre></div>
<p>위 코드보다 더 파이썬 다운 코드는 아래와 같다. (조건문 실행여부를 이미 알고 있는건 넘어가자)</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">A <span class="token operator">=</span> <span class="token boolean">False</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> A<span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
A = False
if not A:
    pass
'''</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">'&lt;string>'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  2           0 LOAD_CONST               0 (False)
              2 STORE_NAME               0 (A)

  3           4 LOAD_NAME                0 (A)
              6 POP_JUMP_IF_TRUE         8

  4     &gt;&gt;    8 LOAD_CONST               1 (None)
             10 RETURN_VALUE</code></pre></div>
<p>위 코드는 매우 비슷하며, 같은 역할을 하지만, 두 코드는 서로 다른 바이트코드를 만들었고, 연산 횟수도 다르다.</p>
<h2>Under the C</h2>
<p>위의 두 코드를 C언어레벨에서 확인하면 더 두드러진 차이를 볼 수 있다.
마찬가지로 PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
<a href="https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/">Back to the Low Level</a>
에서 코드와 내용을 가져왔다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">if</span> A <span class="token operator">!=</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div>
<p>파이썬 인터프리터에게 위 코드는 다음의 C 코드와 같다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">PyObject <span class="token operator">*</span>T <span class="token operator">=</span> Py_True<span class="token punctuation">;</span>
<span class="token function">Py_INCREF</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">PyObject_RichCompareBool</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Py_NE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token function">Py_DECREF</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>그리고 이 코드는</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">if</span> <span class="token keyword">not</span> A<span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div>
<p>다음의 코드와 같다</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">PyObject_Not</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></code></pre></div>
<p>왜 파이썬 다운 코드를 작성해야하는지 이해할 수 있을 것이다.</p>
<h2>여담</h2>
<p>파이썬다운 코드가 항상 성능 향상을 약속하진 않다, 예를 들어 <code class="language-text">elif</code>가 있다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis

<span class="token keyword">def</span> <span class="token function">print_2</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> raw <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> raw <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

dis<span class="token punctuation">(</span>print_2<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  2           0 LOAD_FAST                0 (raw)
              2 LOAD_CONST               1 (2)
              4 COMPARE_OP               2 (==)
              6 POP_JUMP_IF_FALSE       18

  3           8 LOAD_GLOBAL              0 (print)
             10 LOAD_FAST                0 (raw)
             12 CALL_FUNCTION            1
             14 POP_TOP
             16 JUMP_FORWARD            26 (to 44)

  5     &gt;&gt;   18 LOAD_FAST                0 (raw)
             20 LOAD_CONST               2 (1)
             22 COMPARE_OP               2 (==)
             24 POP_JUMP_IF_FALSE       36

  6          26 LOAD_GLOBAL              0 (print)
             28 LOAD_FAST                0 (raw)
             30 CALL_FUNCTION            1
             32 POP_TOP
             34 JUMP_FORWARD             8 (to 44)

  8     &gt;&gt;   36 LOAD_GLOBAL              0 (print)
             38 LOAD_CONST               1 (2)
             40 CALL_FUNCTION            1
             42 POP_TOP
        &gt;&gt;   44 LOAD_CONST               0 (None)
             46 RETURN_VALUE</code></pre></div>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis

<span class="token keyword">def</span> <span class="token function">print_2</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> raw <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> raw <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

dis<span class="token punctuation">(</span>print_2<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  2           0 LOAD_FAST                0 (raw)
              2 LOAD_CONST               1 (2)
              4 COMPARE_OP               2 (==)
              6 POP_JUMP_IF_FALSE       18

  3           8 LOAD_GLOBAL              0 (print)
             10 LOAD_FAST                0 (raw)
             12 CALL_FUNCTION            1
             14 POP_TOP
             16 JUMP_FORWARD            26 (to 44)

  4     &gt;&gt;   18 LOAD_FAST                0 (raw)
             20 LOAD_CONST               2 (1)
             22 COMPARE_OP               2 (==)
             24 POP_JUMP_IF_FALSE       36

  5          26 LOAD_GLOBAL              0 (print)
             28 LOAD_FAST                0 (raw)
             30 CALL_FUNCTION            1
             32 POP_TOP
             34 JUMP_FORWARD             8 (to 44)

  7     &gt;&gt;   36 LOAD_GLOBAL              0 (print)
             38 LOAD_CONST               1 (2)
             40 CALL_FUNCTION            1
             42 POP_TOP
        &gt;&gt;   44 LOAD_CONST               0 (None)
             46 RETURN_VALUE</code></pre></div>
<p>줄번호는 다르지만 같은 바이트코드를 생성하는 걸 볼 수 있다. <code class="language-text">elif</code>는 그저 문법 설탕이다.</p>
<h1>마치며</h1>
<blockquote>
<p>섣부른 최적화는 만악의 근원이다 — 도널드 커누스</p>
</blockquote>
<p>사실 언어적 특성이 코딩에 미치는 영향보단, 프로그램의 로직이 더 중요하다고 생각한다.</p>
<p>그러나 파이썬 인터프리터 (C언어) 아래에서 일어나는 일을 이해한다면,
분명 더 나은 프로그래머가 될 수 있을 것이고, 재미있는 특성들도 알게 될 것이다.</p>
<p>다음에는 파이썬을 이해하는데 매우 중요한 <code class="language-text">PyObject</code>를 다룰 예정이다.</p></div><div></div></main><footer class="Footer-module--footer--VUGIP"><div class="Footer-module--content--3u_Ao">© 2018 - 2019 Han Lee. All right Reserved.</div></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-111601591-4', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-jsx","jsonName":"2018-under-the-c-1-bcb","path":"/2018/under-the-c-1/"};window.dataPath="347/path---2018-under-the-c-1-bcb-517-RYGolKueCnvFFD4ElSI3u6X2Wos";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-3cac94f02162c269cdaa.js"],"component---src-templates-post-jsx":["/component---src-templates-post-jsx-dd67b5b2f5802c543f16.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-708312de3e4a23153bf1.js"],"pages-manifest":["/pages-manifest-25ebf46146b93a8430bc.js"]};/*]]>*/</script><script src="/component---src-templates-post-jsx-dd67b5b2f5802c543f16.js" async=""></script><script src="/1-7b2458236c266513e282.js" async=""></script><script src="/styles-bf5d716907322150a4f8.js" async=""></script><script src="/app-3cac94f02162c269cdaa.js" async=""></script><script src="/webpack-runtime-c5708a111932d8c5c267.js" async=""></script></body></html>