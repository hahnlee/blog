<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.6d82a24cc2891ca3975f.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 3.11.1"/><title data-react-helmet="true">명시지(形式知) | Under the C: 소개</title><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="명시지(形式知) - 기록할 수 있는 지식을 나눕니다" href="/rss.xml"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link data-react-helmet="true" rel="manifest" href="/favicon/site.webmanifest"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Under the C: 소개"/><meta data-react-helmet="true" property="og:description" content="CPython의 구현을 살펴봅시다"/><meta data-react-helmet="true" property="og:image" content="/static/3176fe09bf63006f0013bb98ac036702/d4548/thumbnail.jpg"/><meta data-react-helmet="true" property="og:author" content="이한"/><meta data-react-helmet="true" property="og:site_name" content="명시지(形式知) - 기록할 수 있는 지식을 나눕니다"/><meta data-react-helmet="true" property="article:published_time" content="2018-04-11"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#000000"/><meta data-react-helmet="true" name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><style id="stitches">--stitches{--:1 enCcya hBRgbT}@media{html{margin:0;padding:0;width:100%;height:100%}body{margin:0;padding:0;width:100%;height:100%;color:#495057}#___gatsby{width:100%;height:100%}#gatsby-focus-wrapper{width:100%;height:100%}body{font-family:sans-serif}:not(pre) > code[class*="language-"]{background-color:#F8F9FA}pre[class*="language-"]{background-color:#F8F9FA;border-radius:16px}}--stitches{--:2 c-gpJIkg c-hlRxgL c-kcIPMQ c-yxsxd c-flgmOJ c-cCFjSH c-hsmrWG c-gPjxah c-lkBNdM c-plkQq c-gSkSwe c-kfnMqp c-eXcpMM c-eaUsUP c-BOIMQ}@media{.c-gpJIkg{max-width:800px;margin:0 auto;padding:30px;padding-bottom:calc(30px + env(safe-area-inset-bottom, 0))}@media(max-width: 600px){.c-gpJIkg{padding:15px;padding-bottom:calc(15px + env(safe-area-inset-bottom, 0))}}.c-hlRxgL{color:#868E96;text-decoration:none;margin:15px 0;display:inline-block}.c-kcIPMQ{font-size:36px;margin:0}.c-yxsxd{padding:60px;min-height:100%;font-family:'Noto Serif KR', serf;padding-bottom:calc(60px + env(safe-area-inset-bottom, 0))}@media(max-width: 600px){.c-yxsxd{padding:30px;padding-bottom:calc(30px + env(safe-area-inset-bottom, 0))}}.c-flgmOJ{position:fixed}@media(max-width: 600px){.c-flgmOJ{position:static}}.c-cCFjSH{margin:0 auto;white-space:pre;font-size:48px}@media(max-width: 600px){.c-cCFjSH{font-size:36px}}.c-hsmrWG{font-size:24px;margin-left:10px}@media(max-width: 600px){.c-hsmrWG{font-size:18px}}.c-gPjxah{margin:0}.c-lkBNdM{height:100%}.c-plkQq{display:flex;flex-direction:column;width:min-content;padding-top:30px;margin-top:30px;margin-bottom:15px;border-top:1px solid #E9ECEF}@media(max-width: 600px){.c-plkQq{flex-direction:row;padding-top:10px;margin-top:10px}}.c-gSkSwe{color:#495057;margin-right:15px;margin-bottom:10px}.c-gSkSwe:active{color:#495057}.c-gSkSwe:visited{color:#495057}@media(max-width: 600px){.c-gSkSwe{font-size:14px}}.c-kfnMqp{display:grid;grid-template-columns:1fr 1fr;margin-top:150px;margin-left:200px;grid-row-gap:35px;grid-column-gap:15px}@media(max-width: 800px){.c-kfnMqp{grid-template-columns:1fr}}@media(max-width: 600px){.c-kfnMqp{margin:0 auto}}.c-eXcpMM{color:#495057;text-decoration:none}.c-eaUsUP{margin:0;font-size:24px;word-break:keep-all}.c-BOIMQ{margin:0;font-size:14px;word-break:keep-all}}</style><link as="script" rel="preload" href="/webpack-runtime-1ce45f9118e6389e02d1.js"/><link as="script" rel="preload" href="/framework-4c82f2c0baf06da7d4bc.js"/><link as="script" rel="preload" href="/app-42984d940a43d77eea6b.js"/><link as="script" rel="preload" href="/commons-25c15844ed80dd2e6650.js"/><link as="script" rel="preload" href="/component---src-containers-post-tsx-932086c0a29b4fe57784.js"/><link as="fetch" rel="preload" href="/page-data/2018/under-the-c-1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main><article class="c-gpJIkg"><a class="c-hlRxgL" href="/">← 글 목록</a><header><h1 class="c-kcIPMQ">Under the C: 소개</h1><p>2018-04-11</p></header><h1>소개</h1><ul><li>Under the C 시리즈는 작년, 파이썬에 <a href="https://github.com/python/cpython/pull/3085">아주 작은 기여</a>를 하며 공부한 내용을 정리한 글 입니다.</li><li>잘못된 내용을 알려주신다면, 최대한 빨리 수정하도록 하겠습니다</li><li>파이썬 구현체는 계속 발전하고 있으므로, 이 글의 내용과 다소 달라질 수 있습니다.</li><li>특별한 언급이 없다면, 파이썬은 공식 구현체인
<a href="https://github.com/python/cpython">CPython</a>의 파이썬 3.x 구현을 의미합니다.</li></ul><h1>들어가며</h1><p>파이썬은 <code class="language-text">인터프리터 언어</code>다. 사소한 말이지만 몇가지 사실을 품고 있다.
코드를 한줄 한줄 읽고 실행을 하는 인터프리터 언어는 컴파일 언어에 비해 최적화의 여지가 적다.</p><p>인터프리터 언어를 다룬다면, 같은 결과가 나오는 코드를 작성하여도,
프로그래머의 최적화, 언어의 이해도에 따라 꽤 다른 실행을 하는 코드를 작성할 수 있다.</p><p>몇가지 동일한 결과를 내는 파이썬 코드를 비교해보자.</p><h1>코드 최적화</h1><p>다음 코드를 보자.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">fruits <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fruits<span class="token punctuation">[</span><span class="token string">&#x27;apple&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
fruits<span class="token punctuation">[</span><span class="token string">&#x27;strawberry&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span></code></pre></div><p>빈 딕셔너리를 만들고 두쌍의 키-값을 할당했다. 위의 코드는 어떤 바이트 코드를 만들까?</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">&#x27;&#x27;&#x27;
fruits = dict()
fruits[&#x27;apple&#x27;] = 10
fruits[&#x27;strawberry&#x27;] = 20
&#x27;&#x27;&#x27;</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">&#x27;&lt;string&gt;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;exec&#x27;</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div><p>위 코드로 바이트 코드를 확인 할 수 있다. <code class="language-text">dis</code> 모듈은 파이썬의 내장 모듈로, 바이트코드 역어셈블러 모듈이다.</p><p>위 코드를 인터프리터 모드에서 실행하면 다음와 같은 결과를 볼 수 있다.</p><div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  <span class="token number">2</span>           <span class="token number">0</span> LOAD_NAME                <span class="token number">0</span> <span class="token operator">(</span>dict<span class="token operator">)</span>
              <span class="token number">2</span> CALL_FUNCTION            <span class="token number">0</span>
              <span class="token number">4</span> STORE_NAME               <span class="token number">1</span> <span class="token operator">(</span>fruits<span class="token operator">)</span>

  <span class="token number">3</span>           <span class="token number">6</span> LOAD_CONST               <span class="token number">0</span> <span class="token operator">(</span><span class="token number">10</span><span class="token operator">)</span>
              <span class="token number">8</span> LOAD_NAME                <span class="token number">1</span> <span class="token operator">(</span>fruits<span class="token operator">)</span>
             <span class="token number">10</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token string">&#x27;apple&#x27;</span><span class="token operator">)</span>
             <span class="token number">12</span> STORE_SUBSCR

  <span class="token number">4</span>          <span class="token number">14</span> LOAD_CONST               <span class="token number">2</span> <span class="token operator">(</span><span class="token number">20</span><span class="token operator">)</span>
             <span class="token number">16</span> LOAD_NAME                <span class="token number">1</span> <span class="token operator">(</span>fruits<span class="token operator">)</span>
             <span class="token number">18</span> LOAD_CONST               <span class="token number">3</span> <span class="token operator">(</span><span class="token string">&#x27;strawberry&#x27;</span><span class="token operator">)</span>
             <span class="token number">20</span> STORE_SUBSCR
             <span class="token number">22</span> LOAD_CONST               <span class="token number">4</span> <span class="token operator">(</span>None<span class="token operator">)</span>
             <span class="token number">24</span> RETURN_VALUE</code></pre></div><p>딕셔너리를 만드는, 더 파이썬다운 코드는 제너릭을 이용하는 것 이다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">fruits <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&#x27;apple&#x27;</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;strawberry&#x27;</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div><p>위 코드도 같은 바이트코드를 만들까? 한번 코드의 바이트코드를 한번 확인해보자.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">&#x27;&#x27;&#x27;
fruits = {
    &#x27;apple&#x27;: 10,
    &#x27;strawberry&#x27;: 20,
}
&#x27;&#x27;&#x27;</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">&#x27;&lt;string&gt;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;exec&#x27;</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  <span class="token number">3</span>           <span class="token number">0</span> LOAD_CONST               <span class="token number">0</span> <span class="token operator">(</span><span class="token number">10</span><span class="token operator">)</span>

  <span class="token number">4</span>           <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token number">20</span><span class="token operator">)</span>
              <span class="token number">4</span> LOAD_CONST               <span class="token number">2</span> <span class="token operator">(</span><span class="token operator">(</span><span class="token string">&#x27;apple&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;strawberry&#x27;</span><span class="token operator">)</span><span class="token operator">)</span>
              <span class="token number">6</span> BUILD_CONST_KEY_MAP      <span class="token number">2</span>
              <span class="token number">8</span> STORE_NAME               <span class="token number">0</span> <span class="token operator">(</span>fruits<span class="token operator">)</span>
             <span class="token number">10</span> LOAD_CONST               <span class="token number">3</span> <span class="token operator">(</span>None<span class="token operator">)</span>
             <span class="token number">12</span> RETURN_VALUE</code></pre></div><p>같은 역할을 하지만 서로 다른 바이트코드를 생성하는 것을 확인 할 수 있다.
사실 이 예제는 파이썬 입장에선 조금 억울 하고, 최적화가 쉽지 않을 수 있다.
파이썬 인터프리터에게 첫번째 코드는 3줄의 코드이며, 두번째 코드는 한줄의 코드이기 때문이다.
(파이썬은 괄호안의 줄바꿈을 무시한다)</p><p>그렇다면 한가지 예를 더 살펴 보자.
PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
<a href="https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/">Back to the Low Level</a>
에서 코드와 내용을 가져왔다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">A <span class="token operator">=</span> <span class="token boolean">False</span>
<span class="token keyword">if</span> A <span class="token operator">!=</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">&#x27;&#x27;&#x27;
A = False
if A != True:
    pass
&#x27;&#x27;&#x27;</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">&#x27;&lt;string&gt;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;exec&#x27;</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  <span class="token number">2</span>           <span class="token number">0</span> LOAD_CONST               <span class="token number">0</span> <span class="token operator">(</span><span class="token boolean">False</span><span class="token operator">)</span>
              <span class="token number">2</span> STORE_NAME               <span class="token number">0</span> <span class="token operator">(</span>A<span class="token operator">)</span>

  <span class="token number">3</span>           <span class="token number">4</span> LOAD_NAME                <span class="token number">0</span> <span class="token operator">(</span>A<span class="token operator">)</span>
              <span class="token number">6</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token boolean">True</span><span class="token operator">)</span>
              <span class="token number">8</span> COMPARE_OP               <span class="token number">3</span> <span class="token operator">(</span><span class="token operator">!</span><span class="token operator">=</span><span class="token operator">)</span>
             <span class="token number">10</span> POP_JUMP_IF_FALSE       <span class="token number">12</span>

  <span class="token number">4</span>     <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">12</span> LOAD_CONST               <span class="token number">2</span> <span class="token operator">(</span>None<span class="token operator">)</span>
             <span class="token number">14</span> RETURN_VALUE</code></pre></div><p>위 코드보다 더 파이썬 다운 코드는 아래와 같다. (조건문 실행여부를 이미 알고 있는건 넘어가자)</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">A <span class="token operator">=</span> <span class="token boolean">False</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> A<span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis
code <span class="token operator">=</span> <span class="token triple-quoted-string string">&#x27;&#x27;&#x27;
A = False
if not A:
    pass
&#x27;&#x27;&#x27;</span>
co <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token string">&#x27;&lt;string&gt;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;exec&#x27;</span><span class="token punctuation">)</span>
dis<span class="token punctuation">(</span>co<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  <span class="token number">2</span>           <span class="token number">0</span> LOAD_CONST               <span class="token number">0</span> <span class="token operator">(</span><span class="token boolean">False</span><span class="token operator">)</span>
              <span class="token number">2</span> STORE_NAME               <span class="token number">0</span> <span class="token operator">(</span>A<span class="token operator">)</span>

  <span class="token number">3</span>           <span class="token number">4</span> LOAD_NAME                <span class="token number">0</span> <span class="token operator">(</span>A<span class="token operator">)</span>
              <span class="token number">6</span> POP_JUMP_IF_TRUE         <span class="token number">8</span>

  <span class="token number">4</span>     <span class="token operator">&gt;</span><span class="token operator">&gt;</span>    <span class="token number">8</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span>None<span class="token operator">)</span>
             <span class="token number">10</span> RETURN_VALUE</code></pre></div><p>위 코드는 매우 비슷하며, 같은 역할을 하지만, 두 코드는 서로 다른 바이트코드를 만들었고, 연산 횟수도 다르다.</p><h2>Under the C</h2><p>위의 두 코드를 C언어레벨에서 확인하면 더 두드러진 차이를 볼 수 있다.
마찬가지로 PyConKR 2017에서 차영호님이 라이트닝 토크 시간에 발표한,
<a href="https://docs.google.com/presentation/d/1mpgEviFIolgPLy3tYjK2DIEWRKT671vJdb4RCiXvCyY/">Back to the Low Level</a>
에서 코드와 내용을 가져왔다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">if</span> A <span class="token operator">!=</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div><p>파이썬 인터프리터에게 위 코드는 다음의 C 코드와 같다.</p><div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">PyObject <span class="token operator">*</span>T <span class="token operator">=</span> Py_True<span class="token punctuation">;</span>
<span class="token function">Py_INCREF</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">PyObject_RichCompareBool</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Py_NE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token function">Py_DECREF</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>그리고 이 코드는</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">if</span> <span class="token keyword">not</span> A<span class="token punctuation">:</span>
    <span class="token keyword">pass</span></code></pre></div><p>다음의 코드와 같다</p><div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">PyObject_Not</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></code></pre></div><p>왜 파이썬 다운 코드를 작성해야하는지 이해할 수 있을 것이다.</p><h2>여담</h2><p>파이썬다운 코드가 항상 성능 향상을 약속하진 않다, 예를 들어 <code class="language-text">elif</code>가 있다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis

<span class="token keyword">def</span> <span class="token function">print_2</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> raw <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> raw <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

dis<span class="token punctuation">(</span>print_2<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  <span class="token number">2</span>           <span class="token number">0</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
              <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token number">2</span><span class="token operator">)</span>
              <span class="token number">4</span> COMPARE_OP               <span class="token number">2</span> <span class="token operator">(</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">)</span>
              <span class="token number">6</span> POP_JUMP_IF_FALSE       <span class="token number">18</span>

  <span class="token number">3</span>           <span class="token number">8</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token operator">(</span>print<span class="token operator">)</span>
             <span class="token number">10</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
             <span class="token number">12</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">14</span> POP_TOP
             <span class="token number">16</span> JUMP_FORWARD            <span class="token number">26</span> <span class="token operator">(</span>to <span class="token number">44</span><span class="token operator">)</span>

  <span class="token number">5</span>     <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">18</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
             <span class="token number">20</span> LOAD_CONST               <span class="token number">2</span> <span class="token operator">(</span><span class="token number">1</span><span class="token operator">)</span>
             <span class="token number">22</span> COMPARE_OP               <span class="token number">2</span> <span class="token operator">(</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">)</span>
             <span class="token number">24</span> POP_JUMP_IF_FALSE       <span class="token number">36</span>

  <span class="token number">6</span>          <span class="token number">26</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token operator">(</span>print<span class="token operator">)</span>
             <span class="token number">28</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
             <span class="token number">30</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">32</span> POP_TOP
             <span class="token number">34</span> JUMP_FORWARD             <span class="token number">8</span> <span class="token operator">(</span>to <span class="token number">44</span><span class="token operator">)</span>

  <span class="token number">8</span>     <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">36</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token operator">(</span>print<span class="token operator">)</span>
             <span class="token number">38</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token number">2</span><span class="token operator">)</span>
             <span class="token number">40</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">42</span> POP_TOP
        <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">44</span> LOAD_CONST               <span class="token number">0</span> <span class="token operator">(</span>None<span class="token operator">)</span>
             <span class="token number">46</span> RETURN_VALUE</code></pre></div><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dis <span class="token keyword">import</span> dis

<span class="token keyword">def</span> <span class="token function">print_2</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> raw <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> raw <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

dis<span class="token punctuation">(</span>print_2<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="log"><pre class="language-log"><code class="language-log">  <span class="token number">2</span>           <span class="token number">0</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
              <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token number">2</span><span class="token operator">)</span>
              <span class="token number">4</span> COMPARE_OP               <span class="token number">2</span> <span class="token operator">(</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">)</span>
              <span class="token number">6</span> POP_JUMP_IF_FALSE       <span class="token number">18</span>

  <span class="token number">3</span>           <span class="token number">8</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token operator">(</span>print<span class="token operator">)</span>
             <span class="token number">10</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
             <span class="token number">12</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">14</span> POP_TOP
             <span class="token number">16</span> JUMP_FORWARD            <span class="token number">26</span> <span class="token operator">(</span>to <span class="token number">44</span><span class="token operator">)</span>

  <span class="token number">4</span>     <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">18</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
             <span class="token number">20</span> LOAD_CONST               <span class="token number">2</span> <span class="token operator">(</span><span class="token number">1</span><span class="token operator">)</span>
             <span class="token number">22</span> COMPARE_OP               <span class="token number">2</span> <span class="token operator">(</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">)</span>
             <span class="token number">24</span> POP_JUMP_IF_FALSE       <span class="token number">36</span>

  <span class="token number">5</span>          <span class="token number">26</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token operator">(</span>print<span class="token operator">)</span>
             <span class="token number">28</span> LOAD_FAST                <span class="token number">0</span> <span class="token operator">(</span>raw<span class="token operator">)</span>
             <span class="token number">30</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">32</span> POP_TOP
             <span class="token number">34</span> JUMP_FORWARD             <span class="token number">8</span> <span class="token operator">(</span>to <span class="token number">44</span><span class="token operator">)</span>

  <span class="token number">7</span>     <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">36</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token operator">(</span>print<span class="token operator">)</span>
             <span class="token number">38</span> LOAD_CONST               <span class="token number">1</span> <span class="token operator">(</span><span class="token number">2</span><span class="token operator">)</span>
             <span class="token number">40</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">42</span> POP_TOP
        <span class="token operator">&gt;</span><span class="token operator">&gt;</span>   <span class="token number">44</span> LOAD_CONST               <span class="token number">0</span> <span class="token operator">(</span>None<span class="token operator">)</span>
             <span class="token number">46</span> RETURN_VALUE</code></pre></div><p>줄번호는 다르지만 같은 바이트코드를 생성하는 걸 볼 수 있다. <code class="language-text">elif</code>는 그저 문법 설탕이다.</p><h1>마치며</h1><blockquote><p>섣부른 최적화는 만악의 근원이다 — 도널드 커누스</p></blockquote><p>사실 언어적 특성이 코딩에 미치는 영향보단, 프로그램의 로직이 더 중요하다고 생각한다.</p><p>그러나 파이썬 인터프리터 (C언어) 아래에서 일어나는 일을 이해한다면,
분명 더 나은 프로그래머가 될 수 있을 것이고, 재미있는 특성들도 알게 될 것이다.</p><p>다음에는 파이썬을 이해하는데 매우 중요한 <code class="language-text">PyObject</code>를 다룰 예정이다.</p><a class="c-hlRxgL" href="/">← 글 목록</a></article><section></section></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-111601591-4', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018/under-the-c-1";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-bd312ff6d8fd834f2338.js"],"app":["/app-42984d940a43d77eea6b.js"],"component---src-containers-category-tsx":["/component---src-containers-category-tsx-67c49d877a0516091281.js"],"component---src-containers-post-tsx":["/component---src-containers-post-tsx-932086c0a29b4fe57784.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-a58919b069889481e58a.js"]};/*]]>*/</script><script src="/polyfill-bd312ff6d8fd834f2338.js" nomodule=""></script><script src="/component---src-containers-post-tsx-932086c0a29b4fe57784.js" async=""></script><script src="/commons-25c15844ed80dd2e6650.js" async=""></script><script src="/app-42984d940a43d77eea6b.js" async=""></script><script src="/framework-4c82f2c0baf06da7d4bc.js" async=""></script><script src="/webpack-runtime-1ce45f9118e6389e02d1.js" async=""></script></body></html>